import{R as Rn,j as a,F as B,A as $l,r as u,b as xe,c as y,L as F,I as G,aq as X,bM as Kl,bN as Pn,v as Yl,K as rt,c5 as ql,c6 as Xl,bL as pt,T as Ne,b$ as zl,C as dt,G as Jl}from"./index.2690966c.js";import{D as In}from"./index.esm.ff751faf.js";import{N as Dl}from"./not-found.46bdbc04.js";import{G as Ql}from"./GlobalFilter.8f451d69.js";import{E as Zl}from"./excel.9601f4f9.js";import{c as Vl}from"./calendar.6b75ea36.js";import{u as Bn,w as Fl}from"./jspdf.plugin.autotable.1f789a28.js";import"./jspdf.es.min.53a8a7ee.js";import"./html2canvas.esm.0eae2bf4.js";import{M as gt}from"./Modal.7c14002e.js";const wl=Rn.forwardRef(({indeterminate:L,...P},H)=>{const m=Rn.useRef(),z=H||m;return Rn.useEffect(()=>{z.current.indeterminate=L},[z,L]),a(B,{children:a("input",{type:"checkbox",ref:z,...P,className:"table-checkbox"})})}),Q={option:(L,P)=>({...L,fontSize:"14px"})},ei=({showModal:L})=>a("div",{className:"thumbnail-container",children:L&&a("div",{className:"modal-overlay-property align-center-important",children:y("div",{className:"w-[300px]",children:[a("div",{className:"mb-3",children:a("img",{className:" w-[100%]",src:Yl,alt:"Logo"})}),y("svg",{className:"animate-spin  h-12 w-12 m-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a("circle",{className:"opacity-25 text-white",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a("path",{className:"opacity-75 text-white",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})})}),ni=({allBooking:L,handleDataUpdate:P,dataRole:H,forFilterData:m,handleFilterSearch:z,handleClearFilter:Z,filterLoader:J,dataFilterActive:v,removeDateFilter:M,typeOfBooking:w,selectedtypeOfBooking:K,setSelectedtypeOfBooking:Le})=>{const oe=window.location.origin,V=$l(),[ee,Ce]=u.exports.useState(!1),[ne,$]=u.exports.useState(!1),[se,je]=u.exports.useState(""),[He,me]=u.exports.useState("");u.exports.useState("");const[Re,ke]=u.exports.useState(!1),[S,O]=u.exports.useState(""),[t,d]=u.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",owner_email:"",email:"",bookingagent:""}),[i,Ae]=u.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",owner_email:"",email:"",bookingagent:""});console.log("groupUnits",i);const[E,N]=u.exports.useState(""),[Mn,ue]=u.exports.useState(""),[C,U]=u.exports.useState(""),[Un,Ie]=u.exports.useState(""),[k,Y]=u.exports.useState(""),[Wn,Be]=u.exports.useState(""),[o,x]=u.exports.useState(""),[g,h]=u.exports.useState(""),[b,A]=u.exports.useState(""),j=e=>{const{name:n,value:l}=e.target;d(s=>({...s,[n]:l})),Ae(s=>({...s,[n]:l}))};u.exports.useEffect(()=>(i.unitnumber&&(N(i.unitnumber),U(i.unitnumber),Y(i.unitnumber),x(i.unitnumber),h(i.unitnumber),A(i.unitnumber)),i.owner_email&&(O(i.owner_email),N(i.owner_email),U(i.owner_email),Y(i.owner_email),h(i.owner_email),A(i.owner_email)),i.communityid&&(O(i.communityid),U(i.communityid),Y(i.communityid),x(i.communityid),h(i.communityid),A(i.communityid)),i.projectnameid&&(O(i.projectnameid),N(i.projectnameid),Y(i.projectnameid),x(i.projectnameid),h(i.projectnameid),A(i.projectnameid)),i.buildingid&&(O(i.buildingid),N(i.buildingid),U(i.buildingid),x(i.buildingid),h(i.buildingid),A(i.buildingid)),i.email&&(O(i.email),N(i.email),U(i.email),Y(i.email),x(i.email),h(i.email)),i.bookingagent&&(O(i.bookingagent),N(i.bookingagent),U(i.bookingagent),Y(i.bookingagent),x(i.bookingagent)),()=>{N(""),U(""),Y(""),x(""),h(""),O("")}),[i]);const W=e=>{const{name:n,value:l}=e.target;i.unitnumber&&(N(i.unitnumber),d({...t,[n]:l}),ue({...t,[n]:l})),i.owner_email&&(O(i.owner_email),d({...t,[n]:l}),N(i.owner_email)),i.communityid&&(O(i.communityid),d({...t,[n]:l})),i.projectnameid&&(O(i.projectnameid),d({...t,[n]:l})),i.buildingid&&(O(i.buildingid),d({...t,[n]:l})),i.email&&(O(i.email),d({...t,[n]:l})),i.bookingagent&&(O(i.bookingagent),d({...t,[n]:l}))},te=e=>{const{name:n,value:l}=e.target;i.unitnumber&&d({...t,[n]:l}),i.owner_email&&(d({...t,[n]:l}),U(i.owner_email)),i.communityid&&(d({...t,[n]:l}),U(i.communityid)),i.buildingid&&d({...t,[n]:l}),i.email&&d({...t,[n]:l}),i.bookingagent&&d({...t,[n]:l})},le=e=>{const{name:n,value:l}=e.target;i.unitnumber&&d({...t,[n]:l}),i.owner_email&&d({...t,[n]:l}),i.communityid&&d({...t,[n]:l}),i.projectnameid&&d({...t,[n]:l}),i.email&&d({...t,[n]:l}),i.bookingagent&&d({...t,[n]:l})},ie=e=>{const{name:n,value:l}=e.target;i.unitnumber&&d({...t,[n]:l}),i.communityid&&d({...t,[n]:l}),i.projectnameid&&d({...t,[n]:l}),i.buildingid&&d({...t,[n]:l}),i.email&&d({...t,[n]:l}),i.bookingagent&&d({...t,[n]:l})},ae=e=>{const{name:n,value:l}=e.target;i.email&&d({...t,[n]:l}),i.unitnumber&&d({...t,[n]:l}),i.communityid&&d({...t,[n]:l}),i.projectnameid&&d({...t,[n]:l}),i.buildingid&&d({...t,[n]:l}),i.bookingagent&&d({...t,[n]:l})},bt=async e=>{Ce(!0),me(e)},ce=e=>{const{name:n,value:l}=e.target;i.email&&d({...t,[n]:l}),i.unitnumber&&d({...t,[n]:l}),i.communityid&&d({...t,[n]:l}),i.projectnameid&&d({...t,[n]:l}),i.buildingid&&d({...t,[n]:l}),i.bookingagent&&d({...t,[n]:l})},ft=()=>{Ce(!1)},vt=async e=>{try{await rt.patch("http://dev-rare.srp.ai/booking/api/updatebooking",{_id:e,softdelete:!0}),P()}catch(n){console.log(n,"error")}};function p(e){var s,r;const n={},l=[];for(const c of e){const T=`${(s=c==null?void 0:c.label)==null?void 0:s.trim()}|${(r=c==null?void 0:c.value)==null?void 0:r.trim()}`;n[T]||(l.push(c),n[T]=!0)}return l}const[Se,ht]=u.exports.useState(!1),[yt,xt]=u.exports.useState(0),Gn=u.exports.useRef(null),$n=e=>{const n=Gn.current;if(n){const s=n.scrollWidth-n.clientWidth;let r;e==="left"?r=Math.max(yt-100,0):r=s,n.scrollLeft=r,xt(r)}},Nt=async e=>{const l=`http://dev-rare.srp.ai/property/${e.propertyid}`,s=await rt.get(`${l}`);if(console.log("proData",s),s.statusText==="OK"&&s.status===200){const{propertyimages:r,propertylocation:c,subtype:T}=s.data,R={propertyimages:r.length>0?r[0]:null,propertylocation:c,subtype:T};V("/bookingsd",{state:{data:e,obj:R}})}},Ct=[{Header:"Sr no",accessor:"id",Cell:({row:e,flatRows:n})=>a("span",{children:n.indexOf(e)+1})},{Header:"Booking Number",accessor:"bookingnumber",Cell:e=>{var n,l,s,r,c,T,R,_,I,q,D;return a(B,{children:oe==="http://127.0.0.1:5173"||oe==="http://stg.srp.ai"||oe==="http://127.0.0.1:5174"?a(F,{to:`/view-booking/${(s=(l=(n=e==null?void 0:e.cell)==null?void 0:n.row)==null?void 0:l.original)==null?void 0:s._id}`,children:(r=e==null?void 0:e.cell)!=null&&r.value?((T=(c=e==null?void 0:e.cell)==null?void 0:c.value)==null?void 0:T.slice(0,15))+(((R=e==null?void 0:e.cell)==null?void 0:R.value.length)>15?"...":""):"Not Available"}):a("span",{children:(_=e==null?void 0:e.cell)!=null&&_.value?((q=(I=e==null?void 0:e.cell)==null?void 0:I.value)==null?void 0:q.slice(0,15))+(((D=e==null?void 0:e.cell)==null?void 0:D.value.length)>15?"...":""):"Not Available"})})}},{Header:"Booking Status",accessor:"cancelled",Cell:e=>{var n,l,s;return a("span",{className:"block w-full",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)===!1?"text-success-500 bg-success-500":""} 
            ${((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-danger-500 bg-danger-500":""}
            
             `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)===!0?"Cancelled":"Approved"})})}},{Header:"Unit No",accessor:e=>`${e.unitnumber}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Building Name",accessor:e=>`${e.building_name}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Floor Level",accessor:e=>`${e.floor}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Community Name",accessor:e=>`${e.community_name}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Project Name",accessor:e=>`${e.project_name}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Owner Name",accessor:"owner_name",Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Guest Name",accessor:"guestname",Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Check in Type",accessor:"checkintype",Cell:e=>{var n,l,s,r;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"Nationality",accessor:"nationality",Cell:e=>{var n,l,s,r;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"passport no",accessor:"passportnumber",Cell:e=>{var n,l,s,r;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"Mobile Number",accessor:"mobilenumber",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Email",accessor:"email",Cell:e=>{var n,l,s,r;return a("span",{className:"lowercase",children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"No. of Adults",accessor:"noadults",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"No. of Children",accessor:"nochildern",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"0"})}},{Header:"No. Of Occupants",accessor:"totaloccupants",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Confirmation Code",accessor:"confirmationcode",Cell:e=>{var n,l,s,r;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"Booking Date",accessor:"reservation_date",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?new Date((l=e==null?void 0:e.cell)==null?void 0:l.value).toDateString():"Not Available"})}},{Header:"Booking Agent",accessor:"bookingagent",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Mode of Payment",accessor:"modepayment",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Check in Date",accessor:"checkindate",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})},sortType:(e,n,l,s)=>ql(e,n,l,s)},{Header:"Check out Date",accessor:"checkoutdate",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})},sortType:(e,n,l,s)=>Xl(e,n,l,s)},{Header:"No. of Nights",accessor:"nonight",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"0.00"})}},{Header:"Tourism Fee /Unit",accessor:"tourismfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value)+" AED":"0.00"})}},{Header:"Security Deposit Amount",accessor:"securitydeposit",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"TOTAL PAYOUT",accessor:"totalpayout",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Host Service Fee (portal)",accessor:"hostservicefee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Collection All incl",accessor:"totalcollectall",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Cleaning Fee",accessor:"cleaningfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"TOTAL ADDITIONAL FEE",accessor:"totaladditionalfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Room Rent Amount: ( Incl. portal fee)",accessor:"roomrentamount",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"Room Rent Amount: (host Payable)",accessor:"roomrenthostpayable",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"Guest Service Fee",accessor:"guestservicefee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Guest Management Fee",accessor:"guestmanagementfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Host Management Fee",accessor:"hostmanagementfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Room Rent Amount (incl. GM FEE)",accessor:"propertyid",Cell:e=>{var l,s,r,c,T,R,_,I,q,D,de,ge,pe,be,fe,ve,he,ye,Hn,Dn,Qn,Zn,Vn,Fn,wn,et,nt,tt,lt,it,at,ct,ot,st,mt,ut;let n;return((r=(s=(l=e==null?void 0:e.cell)==null?void 0:l.row)==null?void 0:s.original)==null?void 0:r.guestservicefee)&&((R=(T=(c=e==null?void 0:e.cell)==null?void 0:c.row)==null?void 0:T.original)==null?void 0:R.guestservicefee)>0?n=(parseFloat((q=(I=(_=e==null?void 0:e.cell)==null?void 0:_.row)==null?void 0:I.original)!=null&&q.roomrentamount?(ge=(de=(D=e==null?void 0:e.cell)==null?void 0:D.row)==null?void 0:de.original)==null?void 0:ge.roomrentamount:0)+parseFloat((fe=(be=(pe=e==null?void 0:e.cell)==null?void 0:pe.row)==null?void 0:be.original)!=null&&fe.guestmanagementfee?(ye=(he=(ve=e==null?void 0:e.cell)==null?void 0:ve.row)==null?void 0:he.original)==null?void 0:ye.guestmanagementfee:0)+parseFloat((Qn=(Dn=(Hn=e==null?void 0:e.cell)==null?void 0:Hn.row)==null?void 0:Dn.original)!=null&&Qn.guestservicefee?(Fn=(Vn=(Zn=e==null?void 0:e.cell)==null?void 0:Zn.row)==null?void 0:Vn.original)==null?void 0:Fn.guestservicefee:0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):n=(parseFloat((nt=(et=(wn=e==null?void 0:e.cell)==null?void 0:wn.row)==null?void 0:et.original)!=null&&nt.roomrentamount?(it=(lt=(tt=e==null?void 0:e.cell)==null?void 0:tt.row)==null?void 0:lt.original)==null?void 0:it.roomrentamount:0)+parseFloat((ot=(ct=(at=e==null?void 0:e.cell)==null?void 0:at.row)==null?void 0:ct.original)!=null&&ot.guestmanagementfee?(ut=(mt=(st=e==null?void 0:e.cell)==null?void 0:st.row)==null?void 0:mt.original)==null?void 0:ut.guestmanagementfee:0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),a("span",{children:n?n+" AED":"0.00"})}},{Header:"VAT 5% on Booking Room Rent",accessor:"vatperbookingrent",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Service fee",accessor:"vatperservicefee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Cleaning fee",accessor:"vatpercleaningfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Guest Management",accessor:"vatperguestmanagementfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% On Host Management Fee",accessor:"vatperhostmanagementfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Payout Vat",accessor:"totalvatper",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Room rent + GM+VAT",accessor:e=>`${e.totalroomrent}`,Cell:e=>{var n,l,s;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value))==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Audit Difference",accessor:e=>`${e.auditdiff}`,Cell:e=>a("span",{children:"0"})},{Header:"Total Collection All incl",accessor:e=>`${e.totalcollectall}`,Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"DTCM uploaded",accessor:"dtcm_uploaded",Cell:e=>{var n,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"passort id collected",accessor:"passortid_collected",Cell:e=>{var n,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"Signature verified as per Passport",accessor:"sign_verified",Cell:e=>{var n,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"smart code provided",accessor:"smartcode_provided",Cell:e=>{var n,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"Payment collected",accessor:"payment_collected",Cell:e=>{var n,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"created-by",accessor:"employee_email_createdBy",Cell:e=>{var n,l;return a("span",{className:"normal-case",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"created-on",accessor:"Created_At",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"updated-by",accessor:"employee_email_updatedBy",Cell:e=>{var n,l;return a("span",{className:"normal-case",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"updated-on",accessor:"updated_At",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"action",accessor:e=>`${e._id}`,Cell:e=>{var I,q,D,de,ge,pe,be,fe,ve,he,ye;const n=localStorage.getItem("isAuth"),l=JSON.parse(n),{data:s}=pt(l==null?void 0:l.roleid);if(!s)return null;const r=(s==null?void 0:s.readbooking)===!0,c=(s==null?void 0:s.updatebooking)===!0,T=(s==null?void 0:s.deletebooking)===!0,R=(s==null?void 0:s.updatecustomer)===!0,_=(q=(I=e==null?void 0:e.cell)==null?void 0:I.row)==null?void 0:q.original;return y("div",{className:"flex space-x-3 rtl:space-x-reverse",children:[a(Ne,{content:"Download PDF Under Maintenance",placement:"top",arrow:!0,animation:"shift-away",children:a("button",{className:"action-btn",onClick:Hn=>Nt(_),type:"button",children:a(G,{icon:"heroicons:arrow-down"})})}),R&&a(Ne,{content:"Edit Customer",placement:"top",arrow:!0,animation:"shift-away",children:((ge=(de=(D=e==null?void 0:e.cell)==null?void 0:D.row)==null?void 0:de.original)==null?void 0:ge.customertype)==="New Customer"?a(F,{className:"action-btn",to:`/update-customer/${(fe=(be=(pe=e==null?void 0:e.cell)==null?void 0:pe.row)==null?void 0:be.original)==null?void 0:fe.guest_id}`,type:"button",children:a(G,{icon:"heroicons:user"})}):a(F,{className:"action-btn",to:`/update-customer/${(ye=(he=(ve=e==null?void 0:e.cell)==null?void 0:ve.row)==null?void 0:he.original)==null?void 0:ye.customerid}`,type:"button",children:a(G,{icon:"heroicons:user"})})}),r&&a(Ne,{content:"View",placement:"top",arrow:!0,animation:"shift-away",children:a(F,{className:"action-btn",to:`/view-booking/${e==null?void 0:e.cell.value}`,type:"button",children:a(G,{icon:"heroicons:eye"})})}),c&&a(Ne,{content:"Edit",placement:"top",arrow:!0,animation:"shift-away",children:a(F,{to:`/update-booking/${e==null?void 0:e.cell.value}`,className:"action-btn",type:"button",children:a(G,{icon:"heroicons:pencil-square"})})}),T&&a(Ne,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:a("button",{className:"action-btn",type:"button",onClick:()=>bt(e==null?void 0:e.cell.value),children:a(G,{icon:"heroicons:trash"})})})]})}}];function kt(e){const n=[["BOOKING NUMBER","BOOKING STATUS","UNIT NO","BUILDING NAME","FLOOR LEVEL","COMMUNITY NAME","PROJECT NAME","OWNER NAME","GUEST NAME","CHECK IN TYPE","NATIONALITY","PASSPORT NO","MOBILE NUMBER","EMAIL","NO. OF ADULTS","NO. OF CHILDREN","NO. OF OCCUPANTS","CONFIRMATION CODE","BOOKING DATE","BOOKING DATE","MODE OF PAYMENT","CHECK IN DATE","CHECK OUT DATE","NO. OF NIGHTS","NO. OF NIGHTS","SECURITY DEPOSIT AMOUNT","TOTAL PAYOUT","HOST SERVICE FEE (PORTAL)","TOTAL COLLECTION ALL INCL","CLEANING FEE","TOTAL ADDITIONAL FEE","ROOM RENT AMOUNT: ( INCL. PORTAL FEE)","Room Rent Amount: (host Payable)","GUEST SERVICE FEE","GUEST MANAGEMENT FEE","HOST MANAGEMENT FEE","VAT 5% ON BOOKING ROOM RENT","VAT 5% ON BOOKING ROOM RENT","VAT 5% ON CLEANING FEE","VAT 5% ON GUEST MANAGEMENT","VAT 5% ON HOST MANAGEMENT FEE","TOTAL PAYOUT VAT","TOTAL ROOM RENT + GM+VAT","AUDIT DIFFERENCE","TOTAL COLLECTION ALL INCL","CREATED-BY","CREATED-ON"],...e.map(c=>[c.bookingnumber,c.cancelled===!1?"Approved":"Cancelled",c.unitnumber,c==null?void 0:c.building_name,c==null?void 0:c.floor,c==null?void 0:c.community_name,c==null?void 0:c.project_name,c==null?void 0:c.owner_name,c.guestname,c.checkintype,c.nationality,c.passportnumber,c.mobilenumber,c.email,c.noadults,c.nochildern,c.totaloccupants,c.confirmationcode,new Date(c.reservationdate).toDateString(),c.bookingagent,c.modepayment,new Date(c.checkindate).toDateString(),new Date(c.checkoutdate).toDateString(),c.nonight,c.tourismfee,c.securitydeposit?c.securitydeposit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalpayout?c.totalpayout.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.hostservicefee?c.hostservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalcollectall?c.totalcollectall.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.cleaningfee?c.cleaningfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totaladditionalfee?c.totaladditionalfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.roomrentamount?c.roomrentamount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.roomrenthostpayable?c.roomrenthostpayable.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.guestservicefee?c.guestservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.guestmanagementfee?c.guestmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.hostmanagementfee?c.hostmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperbookingrent?c.vatperbookingrent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperservicefee?c.vatperservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatpercleaningfee?c.vatpercleaningfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperguestmanagementfee?c.vatperguestmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperhostmanagementfee?c.vatperhostmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalvatper?c.totalvatper.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalroomrent?c.totalroomrent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,0,c.totalcollectall?c.totalcollectall.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c==null?void 0:c.employee_email_createdBy,new Date(c.createdAt).toDateString()])],l=Bn.aoa_to_sheet(n),s=Bn.book_new();Bn.book_append_sheet(s,l,"Sheet1");const r=Fl(s,{bookType:"xlsx",type:"array"});zl.exports.saveAs(new Blob([r],{type:"application/octet-stream"}),"bookings.xlsx")}const At=u.exports.useMemo(()=>Ct,[]),St=u.exports.useMemo(()=>L),[f,Kn]=u.exports.useState(""),[ii,Yn]=u.exports.useState(!1),[qn,Xn]=u.exports.useState(!1);u.exports.useState(!1),u.exports.useState(""),u.exports.useState(!1),u.exports.useEffect(()=>{Kn(""),Xn(!1)},[L]);const Et=xe.exports.useTable({columns:At,data:St,initialState:{pageIndex:0,pageSize:50}},xe.exports.useGlobalFilter,xe.exports.useSortBy,xe.exports.usePagination,xe.exports.useRowSelect,e=>{e.visibleColumns.push(n=>[{id:"selection",Header:({getToggleAllRowsSelectedProps:l})=>a("div",{children:a(wl,{...l()})}),Cell:({row:l})=>{var R;const[s,r]=u.exports.useState(""),c=_=>{_!=null&&_._id?Yn(!0):Yn(!1),r(I=>I===_?"":_),Kn(I=>I===_?"":_)};let T;return u.exports.useEffect(()=>{var _;Xn(((_=l==null?void 0:l.original)==null?void 0:_._id)===(s==null?void 0:s._id)),qn===!0?T=!0:qn===!1&&(T=!1)},[(R=l==null?void 0:l.original)==null?void 0:R._id,s==null?void 0:s._id]),a("div",{children:a("input",{type:"checkbox",...l.getToggleRowSelectedProps(),checked:T,onChange:()=>c(l.original),className:"table-checkbox"})})}},...n])}),{getTableProps:_t,getTableBodyProps:Tt,headerGroups:Ot,footerGroups:ai,page:Lt,nextPage:jt,previousPage:Ht,canNextPage:Ee,canPreviousPage:_e,pageOptions:zn,state:Rt,gotoPage:Pe,pageCount:It,setPageSize:Bt,setGlobalFilter:Pt,prepareRow:Mt}=Et,{globalFilter:Ut,pageIndex:Jn,pageSize:Wt}=Rt,Gt=m.filter(e=>e.unitnumber!==void 0),Te=[...new Set(Gt.map(e=>e.unitnumber))].sort((e,n)=>e.localeCompare(n,void 0,{sensitivity:"base"})).map(e=>({label:e,value:e})),$t=m.filter(e=>e.community_name!==void 0),Me=[...[...new Set($t.map(e=>e.communityid))].map(e=>{const n=m.find(l=>l.communityid===e);return n?{label:n.community_name,value:n.communityid}:null}).filter(Boolean)].sort((e,n)=>e.label.localeCompare(n.label)),Kt=m.filter(e=>e.project_name!==void 0),Ue=[...[...new Set(Kt.map(e=>e.projectnameid))].map(e=>{const n=m.find(l=>l.projectnameid===e);return n?{label:n.project_name,value:n.projectnameid}:null}).filter(Boolean)].sort((e,n)=>e.label.localeCompare(n.label)),Yt=m.filter(e=>e.building_name!==void 0),We=[...[...new Set(Yt.map(e=>e.buildingid))].map(e=>{const n=m.find(l=>l.buildingid===e);return n?{label:n.building_name,value:n.buildingid}:null}).filter(Boolean)].sort((e,n)=>e.label.localeCompare(n.label)),qt=m.filter(e=>e.owner_email!==void 0),Ge=[...[...new Set(qt.map(e=>e.owner_email))].map(e=>{const n=m.find(l=>l.owner_email===e);return n?{label:n.owner_name+" | "+n.owner_email,value:n.owner_email}:null}).filter(Boolean)].sort((e,n)=>{var l;return(l=e.label)==null?void 0:l.localeCompare(n.label)}),Xt=m.filter(e=>e.email!==void 0),$e=[...[...new Set(Xt.map(e=>e.email))].map(e=>{const n=m.find(l=>l.email===e);return n?{label:n.guestname+" | "+n.email,value:n.email}:null}).filter(Boolean)].sort((e,n)=>e.label.localeCompare(n.label)),Ke=[...[{value:"Airbnb",label:"Airbnb"},{value:"Booking.com",label:"Booking.com"},{value:"vrbo",label:"vrbo"},{value:"Direct Booking",label:"Direct Booking"},{value:"Not in the List",label:"Not in the List"}]].sort((e,n)=>e.label.localeCompare(n.label)),zt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),Jt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),Dt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),Qt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),Zt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),Vt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),Ft=p(zt),wt=p(Jt),el=p(Dt),nl=p(Qt),tl=p(Zt),ll=p(Vt),Ye=Ft.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),qe=wt.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Xe=el.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),ze=nl.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Je=tl.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),De=ll.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),il=m.filter(e=>e.communityid===i.communityid).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),al=m.filter(e=>e.communityid===i.communityid).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),cl=m.filter(e=>e.communityid===i.communityid).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),ol=m.filter(e=>e.communityid===i.communityid).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),sl=m.filter(e=>e.communityid===i.communityid).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),ml=m.filter(e=>e.communityid===i.communityid).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),Qe=p(il).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ze=p(al).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ve=p(cl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Fe=p(ol).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),we=p(sl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),en=p(ml).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),ul=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),nn=p(ul).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),rl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),tn=p(rl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),dl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),ln=p(dl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),gl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),an=p(gl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),pl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),cn=p(pl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),bl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),on=p(bl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),fl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),sn=p(fl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),vl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),mn=p(vl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),hl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),un=p(hl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),yl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),rn=p(yl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),xl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),dn=p(xl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Nl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),gn=p(Nl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Cl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),kl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),Al=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),Sl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),El=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),_l=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),Oe=p(Cl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),pn=p(kl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),bn=p(Al).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),fn=p(Sl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),vn=p(El).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),hn=p(_l).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Tl=m.filter(e=>e.email===i.email).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),yn=p(Tl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ol=m.filter(e=>e.email===i.email).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),xn=p(Ol).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ll=m.filter(e=>e.email===i.email).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),Nn=p(Ll).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),jl=m.filter(e=>e.email===i.email).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),Cn=p(jl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Hl=m.filter(e=>e.email===i.email).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),kn=p(Hl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Rl=m.filter(e=>e.email===i.email).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),An=p(Rl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Il=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),Sn=p(Il).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Bl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),En=p(Bl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Pl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),_n=p(Pl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ml=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),Tn=p(Ml).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ul=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),On=p(Ul).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Wl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),Ln=p(Wl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Gl=()=>{Z(),N(""),Ae(""),ue(""),U(""),Ie(""),d(""),x(""),Be(""),h(""),A("")},[jn,re]=u.exports.useState(!1);return u.exports.useEffect(()=>{const e=n=>{const{_id:l,propertyid:s,checkindate:r,checkoutdate:c,cancelled:T}=n,{checkindate:R,checkoutdate:_,propertyid:I}=f;return l!==(f==null?void 0:f._id)&&T===!1?new Date(r).toISOString()<new Date(_).toISOString()&&new Date(c).toISOString()>new Date(R).toISOString()&&s===I?(re(!0),!0):(re(!1),!1):(console.log("first else"),re(!1),!1)};if((f==null?void 0:f.checkindate)&&(f==null?void 0:f.checkoutdate)&&(f==null?void 0:f.propertyid)){let n=!1;for(let l=0;l<m.length;l++){const s=m[l];if(e(s)){n=!0;break}}re(n)}else re(!1)},[f==null?void 0:f.checkindate,f==null?void 0:f.checkoutdate,f==null?void 0:f.propertyid]),y(B,{children:[y("div",{className:"md:flex justify-end items-center mb-6 gap-x-[25px]",children:[y(F,{to:"/calendar-2-0",className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer",children:[a("img",{src:Vl,alt:"Calendar icon",className:"w-[20px] h-[20px] noselect"}),a("p",{className:"text-[14px] leading regular color-black",children:"Calendar View"})]}),y("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer",onClick:()=>kt(L),children:[a("img",{src:Zl,alt:"Excel icon",className:"w-[20px] h-[20px] noselect"}),a("p",{className:"text-[14px] leading regular color-black",children:"Export in Excel"})]}),f&&(f==null?void 0:f.cancelled)===!1?a(B,{children:a(gt,{title:"Do you want to Cancel this booking?",label:"Cancel booking",labelClass:"btn btn inline-flex justify-center btn-danger py-[8px] px-[24px] rounded-[5px]",uncontrol:!0,alldata:f,onDataUpdate:P,bookingtable:!0,cancelkrnihai:!0,bookingUpdate:!0,children:a("h4",{className:"font-medium text-lg mb-3 text-slate-900 text-center",children:"Are you sure?"})})}):null,jn===!1&&f&&(f==null?void 0:f.cancelled)===!0?a(B,{children:a(gt,{title:"Do you want to Approve this booking?",label:"Approve booking",labelClass:"btn btn inline-flex justify-center btn-dark py-[8px] px-[24px] rounded-[5px]",uncontrol:!0,alldata:f,onDataUpdate:P,bookingtable:!0,cancelkrnihai:!1,alreadyBooking:jn,bookingUpdate:!0,children:a("h4",{className:"font-medium text-lg mb-3 text-slate-900 text-center",children:"Are you sure?"})})}):null,jn===!0&&f&&(f==null?void 0:f.cancelled)===!0?a(B,{children:a("button",{type:"button",class:"btn btn btn inline-flex justify-center btn-danger py-[8px] px-[24px] rounded-[5px]",children:"This property cannot be approved as it is already booked"})}):null,a(B,{}),y("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer md:mb-0 mb-4",onClick:()=>ht(!Se),children:[Se===!0?a(G,{icon:"heroicons:minus-small",className:"w-[20px] h-[20px]"}):a(G,{icon:"heroicons:plus-small",className:"w-[20px] h-[20px]"}),a("p",{className:"text-[16px] leading regular color-black",children:"Advance filter"})]}),v===!0?a("button",{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",type:"button",onClick:M,children:"Remove Date Filter"}):null,a("div",{className:"w-[180px]",children:a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:w,value:w==null?void 0:w.filter(function(e){return e.value===K}),onChange:e=>{Le(e==null?void 0:e.value)},styles:Q,id:"hh",placeholder:"Select Date filter option..."})}),a(Ql,{filter:Ut,setFilter:Pt})]}),console.log("unitNumberOptions",Te,"first",Oe),y("div",{className:`xl:grid-cols-3 grid gap-5 grid-cols-1 ${Se===!0?"filter-show mt-6 pointer-events-auto":"filter-remove -mt-4 pointer-events-none"}`,children:[y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Unit No."}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:S?i.communityid&&S?Qe:i.projectnameid&&S?nn:i.buildingid&&S?sn:i.email&&S?yn:i.bookingagent&&S?Sn:Oe:Te,value:S?i.communityid&&S?Qe&&Qe.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):i.projectnameid&&S?nn&&nn.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):i.buildingid&&S?sn&&sn.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):i.email&&S?yn&&yn.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):i.bookingagent&&S?Sn&&Sn.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):Oe&&Oe.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):Te&&Te.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}),onChange:e=>{S?i.communityid&&S?W({target:{name:"unitnumber",value:e.value}}):i.projectnameid&&S?W({target:{name:"unitnumber",value:e.value}}):i.buildingid&&S?W({target:{name:"unitnumber",value:e.value}}):i.email&&S?W({target:{name:"unitnumber",value:e.value}}):i.bookingagent&&S?W({target:{name:"unitnumber",value:e.value}}):W({target:{name:"unitnumber",value:e.value}}):j({target:{name:"unitnumber",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.unitnumber?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...t,unitnumber:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Community Name"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:E?i.owner_email&&E?pn:i.projectnameid&&E?tn:i.buildingid&&E?mn:i.email&&E?xn:i.bookingagent&&E?En:Ye:Me,value:E?i.owner_email&&E?pn&&pn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):i.projectnameid&&E?tn&&tn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):i.buildingid&&E?mn&&mn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):i.email&&E?xn&&xn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):i.bookingagent&&E?En&&En.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):Ye&&Ye.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):Me&&Me.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}),onChange:e=>{E?i.owner_email&&E?W({target:{name:"communityid",value:e.value}}):i.projectnameid&&E?W({target:{name:"communityid",value:e.value}}):i.buildingid&&E?W({target:{name:"communityid",value:e.value}}):i.email&&E?W({target:{name:"communityid",value:e.value}}):i.bookingagent&&E?W({target:{name:"communityid",value:e.value}}):W({target:{name:"communityid",value:e.value}}):j({target:{name:"communityid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.communityid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...t,communityid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Project Name"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:C?i.owner_email&&C?bn:i.communityid&&C?Ze:i.buildingid&&C?un:i.email&&C?Nn:i.bookingagent&&C?_n:qe:Ue,value:C?i.owner_email&&C?bn&&bn.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):i.communityid&&C?Ze&&Ze.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):i.buildingid&&C?un&&un.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):i.email&&C?Nn&&Nn.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):i.bookingagent&&C?_n&&_n.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):qe&&qe.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):Ue&&Ue.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}),onChange:e=>{C?i.owner_email&&C?te({target:{name:"projectnameid",value:e.value}}):i.communityid&&C?te({target:{name:"projectnameid",value:e.value}}):i.buildingid&&C?te({target:{name:"projectnameid",value:e.value}}):i.email&&C?te({target:{name:"projectnameid",value:e.value}}):i.bookingagent&&C?te({target:{name:"projectnameid",value:e.value}}):te({target:{name:"projectnameid",value:e.value}}):j({target:{name:"projectnameid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.projectnameid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...t,projectnameid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Building Name"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:k?i.owner_email&&k?fn:i.communityid&&k?Ve:i.projectnameid&&k?ln:i.email&&k?Cn:i.bookingagent&&k?Tn:Xe:We,value:k?i.owner_email&&k?fn&&fn.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):i.communityid&&k?Ve&&Ve.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):i.projectnameid&&k?ln&&ln.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):i.email&&k?Cn&&Cn.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):i.bookingagent&&k?Tn&&Tn.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):Xe&&Xe.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):We&&We.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}),onChange:e=>{k?i.owner_email&&k?le({target:{name:"buildingid",value:e.value}}):i.communityid&&k?le({target:{name:"buildingid",value:e.value}}):i.projectnameid&&k?le({target:{name:"buildingid",value:e.value}}):i.email&&k?le({target:{name:"buildingid",value:e.value}}):i.bookingagent&&k?le({target:{name:"buildingid",value:e.value}}):le({target:{name:"buildingid",value:e.value}}):j({target:{name:"buildingid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.buildingid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...t,buildingid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Owner Name"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:o?i.communityid&&o?Fe:i.projectnameid&&o?an:i.buildingid&&o?rn:i.email&&o?kn:i.bookingagent&&o?On:ze:Ge,value:o?i.communityid&&o?Fe&&Fe.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):i.projectnameid&&o?an&&an.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):i.buildingid&&o?rn&&rn.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):i.email&&o?kn&&kn.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):i.bookingagent&&o?On&&On.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):ze&&ze.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):Ge&&Ge.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}),onChange:e=>{o?i.communityid&&o?ie({target:{name:"owner_email",value:e.value}}):i.projectnameid&&o?ie({target:{name:"owner_email",value:e.value}}):i.buildingid&&o?ie({target:{name:"owner_email",value:e.value}}):i.email&&o?ie({target:{name:"owner_email",value:e.value}}):i.bookingagent&&o?ie({target:{name:"owner_email",value:e.value}}):ie({target:{name:"owner_email",value:e.value}}):j({target:{name:"owner_email",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.owner_email?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...t,owner_email:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Guest Name / Email"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:b?i.communityid&&b?we:i.buildingid&&b?dn:i.projectnameid&&b?cn:i.owner_email&&b?vn:i.bookingagent&&b?An:Je:$e,value:b?i.communityid&&b?we&&we.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):i.buildingid&&b?dn&&dn.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):i.projectnameid&&b?cn&&cn.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):i.owner_email&&b?vn&&vn.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):i.bookingagent&&b?An&&An.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):Je&&Je.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):$e&&$e.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}),onChange:e=>{b?i.communityid&&b?ae({target:{name:"email",value:e.value}}):i.buildingid&&b?ae({target:{name:"email",value:e.value}}):i.projectnameid&&b?ae({target:{name:"email",value:e.value}}):i.owner_email&&b?ae({target:{name:"email",value:e.value}}):i.bookingagent&&b?ae({target:{name:"email",value:e.value}}):ae({target:{name:"email",value:e.value}}):j({target:{name:"email",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.email?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...t,email:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Booking Agent"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:g?i.communityid&&g?en:i.projectnameid&&g?on:i.buildingid&&g?gn:i.owner_email&&g?hn:i.email&&g?Ln:De:Ke,value:g?i.communityid&&g?en&&en.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):i.projectnameid&&g?on&&on.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):i.buildingid&&g?gn&&gn.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):i.owner_email&&g?hn&&hn.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):i.email&&g?Ln&&Ln.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):De&&De.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):Ke&&Ke.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}),onChange:e=>{g?i.communityid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.projectnameid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.buildingid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.owner_email&&g?ce({target:{name:"bookingagent",value:e.value}}):i.email&&g?ce({target:{name:"bookingagent",value:e.value}}):ce({target:{name:"bookingagent",value:e.value}}):j({target:{name:"bookingagent",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.bookingagent?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...t,bookingagent:""}),children:"Clear filter"}):null]})]}),y("div",{className:`flex ${Se===!0?"filter-show mt-6 pointer-events-auto":"filter-remove mt-0 pointer-events-none"} justify-end gap-x-[10px]`,children:[a("button",{className:"btn btn-secondary  text-center",type:"button",onClick:()=>Gl(),children:"Clear filter"}),a("button",{className:"btn btn-dark  text-center",type:"button",onClick:()=>z(t),children:"Search"})]}),a(Kl,{showModal:ee,handleClose:ft,loaderModal:ne,linkedData:se,handleDeleteData:vt,dataId:He,moduleName:"Booking"}),a(ei,{showModal:Re}),y("div",{className:"flex gap-x-[10px] mb-[10px]",children:[a("button",{className:"btn bg-white border  text-center",onClick:()=>$n("left"),children:a(G,{icon:"heroicons-arrow-left"})}),a("button",{className:"btn bg-white border text-center",onClick:()=>$n("right"),children:a(G,{icon:"heroicons-arrow-right"})})]}),a("div",{style:{overflow:"auto"},ref:Gn,children:a("div",{className:"inline-block min-w-full align-middle",children:a("div",{className:"",children:y("table",{className:"min-w-[206%] overflow-x-hidden  table-fixed dark:divide-slate-700",..._t,children:[a("thead",{className:"bg-slate-200 dark:bg-slate-700",children:Ot.map(e=>a("tr",{...e.getHeaderGroupProps(),children:e.headers.map(n=>n.Header==="action"&&!((H==null?void 0:H.readbooking)===!0||(H==null?void 0:H.updatebooking)===!0||(H==null?void 0:H.deletebooking)===!0)?a("th",{}):y("th",{...n.getHeaderProps(n.getSortByToggleProps()),scope:"col",className:"table-th",children:[n.render("Header"),a("span",{children:n.isSorted?n.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),J===!0?a("div",{className:"pl-[10px]",children:a(Pn,{})}):a("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...Tt,children:Lt.map(e=>(Mt(e),a("tr",{...e.getRowProps(),children:e.cells.map(n=>a("td",{...n.getCellProps(),className:"table-td",children:n.render("Cell")}))})))})]})})})}),y("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[y("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[a("select",{className:"form-control py-2 w-max",value:Wt,onChange:e=>Bt(Number(e.target.value)),children:[50,100,200].map(e=>y("option",{value:e,children:["Show ",e]},e))}),y("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",y("span",{children:[Jn+1," of ",zn.length]})]})]}),y("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[a("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${_e?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Pe(0),disabled:!_e,children:a(G,{icon:"heroicons:chevron-double-left-solid"})})}),a("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${_e?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Ht(),disabled:!_e,children:"Prev"})}),zn.map((e,n)=>a("li",{children:a("button",{href:"#","aria-current":"page",className:` ${n===Jn?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>Pe(n),children:e+1})},n)),a("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${Ee?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>jt(),disabled:!Ee,children:"Next"})}),a("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{onClick:()=>Pe(It-1),disabled:!Ee,className:` ${Ee?"":"opacity-50 cursor-not-allowed"}`,children:a(G,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})},ti={option:(L,P)=>({...L,fontSize:"14px"})},li=({title:L,linktitle:P,pagelink:H,handleDataUpdate:m})=>{const z=localStorage.getItem("isAuth"),Z=JSON.parse(z),{data:J}=pt(Z==null?void 0:Z.roleid),[v,M]=u.exports.useState([]),[w,K]=u.exports.useState(!1),[Le,oe]=u.exports.useState(""),[V,ee]=u.exports.useState(""),[Ce,ne]=u.exports.useState(!1);u.exports.useState({startDate:"",endDate:""});const[$,se]=u.exports.useState(""),je=[{value:"SELECT RESERVATION DATE",label:"SELECT RESERVATION DATE"},{value:"SELECT CHECK-IN DATE",label:"SELECT CHECK-IN DATE"},{value:"SELECT CHECK-OUT DATE",label:"SELECT CHECK-OUT DATE"}],[He,me]=u.exports.useState({startDate:"",endDate:""}),[Re,ke]=u.exports.useState({startDate:"",endDate:""}),[S,O]=u.exports.useState({startDate:"",endDate:""}),[t,d]=u.exports.useState(!1),i=async o=>{if($==="SELECT RESERVATION DATE"){me(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.reservationdate),A=new Date(o==null?void 0:o.startDate),j=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),j.setHours(0,0,0,0),(b<A||b>j)&&(h=!1)}return h});M(x),d(!0)}else if($==="SELECT CHECK-IN DATE"){ke(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.checkindate),A=new Date(o==null?void 0:o.startDate),j=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),j.setHours(0,0,0,0),(b<A||b>j)&&(h=!1)}return h});M(x),d(!0)}else if($==="SELECT CHECK-OUT DATE"){O(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.checkoutdate),A=new Date(o==null?void 0:o.startDate),j=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),j.setHours(0,0,0,0),(b<A||b>j)&&(h=!1)}return h});M(x),d(!0)}},Ae=async()=>{K(!0);const x=await(await fetch("http://dev-rare.srp.ai/booking")).json();M(x),ee(x),me({startDate:"",endDate:""}),ke({startDate:"",endDate:""}),O({startDate:"",endDate:""}),se(""),K(!1),d(!1)},E=[{value:"All Booking",label:"All Booking"},{value:"Approved Booking",label:"Approved Booking"},{value:"Cancelled Booking",label:"Cancelled Booking"}],[N,Mn]=u.exports.useState("All Booking");u.exports.useEffect(()=>{N==="All Booking"?(async()=>{K(!0);const g=await(await fetch("http://dev-rare.srp.ai/booking")).json();M(g),ee(g),oe(g),K(!1)})():N==="Approved Booking"?(async()=>{K(!0);const g=await(await fetch("http://dev-rare.srp.ai/booking/api/approvedbooking")).json();M(g),ee(g),K(!1)})():N==="Cancelled Booking"&&(async()=>{K(!0);const g=await(await fetch("http://dev-rare.srp.ai/booking/api/cancelledbooking?cancelled=true")).json();M(g),ee(g),K(!1)})()},[N]);const[ue,C]=u.exports.useState(0),U={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#00EBFF"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},Un={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#FB8F65"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}};u.exports.useEffect(()=>{var o,x,g;if(N==="All Booking"){let h=0;for(let b=0;b<(v==null?void 0:v.length);b++){let A=parseFloat((o=v[b])==null?void 0:o.roomrentamount);!isNaN(A)&&((x=v[b])==null?void 0:x.cancelled)===!1&&(h+=A)}C(h||0)}else{let h=0;for(let b=0;b<(v==null?void 0:v.length);b++){let A=parseFloat((g=v[b])==null?void 0:g.roomrentamount);isNaN(A)||(h+=A)}C(h||0)}},[v==null?void 0:v.length,N]);const[Ie,k]=u.exports.useState(0);u.exports.useEffect(()=>{if(N==="All Booking"||N==="Approved Booking"){let o=v==null?void 0:v.filter(x=>x.cancelled===!1).length;k(o)}else{let o=v==null?void 0:v.length;k(o)}},[N,v]);const Y=[{name:U,title:"Total No of Check-In ",count:Ie,bg:"bg-[#E5F9FF] dark:bg-slate-900	"},{name:Un,title:"Total Collection",count:ue?ue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":0,bg:"bg-[#FFEDE5] dark:bg-slate-900	"}];function Wn(o){if(o){const x=v.filter(g=>{ne(!0);let h=!0;return o.buildingid&&g.buildingid!==o.buildingid&&(h=!1),o.communityid&&g.communityid!==o.communityid&&(h=!1),o.owner_email&&g.owner_email!==o.owner_email&&(h=!1),o.projectnameid&&g.projectnameid!==o.projectnameid&&(h=!1),o.unitnumber&&g.unitnumber!==o.unitnumber&&(h=!1),o.email&&g.email!==o.email&&(h=!1),o.bookingagent&&g.bookingagent!==o.bookingagent&&(h=!1),h});M(x),ne(!1)}else M(V)}const Be=async()=>{ne(!0),me({startDate:"",endDate:""}),ke({startDate:"",endDate:""}),O({startDate:"",endDate:""}),se(""),M(V),ne(!1),d(!1)};return a(B,{children:w===!0?a(Pn,{}):y(dt,{children:[y("div",{className:"flex justify-between items-center mb-6",children:[a("h4",{className:"card-title",children:L}),(J==null?void 0:J.createbooking)===!0&&a(F,{to:H,className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:P})]}),a("div",{className:"grid grid-cols-12 gap-5 mb-5",children:y("div",{className:"2xl:col-span-12 lg:col-span-12 col-span-12",children:[a(dt,{bodyClass:"p-4",children:a("div",{className:"grid md:grid-cols-2 col-span-1 gap-4",children:a(Jl,{statistics:Y})})}),a("div",{className:"flex justify-end items-center mb-[15px] mt-[25px]",children:a("div",{className:"flex justify-end items-center ",children:y("div",{className:"flex -gap-x-[5px] items-center",children:[a("div",{className:"w-[300px]",children:a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:je,value:je.filter(function(o){return o.value===$}),onChange:o=>{se(o==null?void 0:o.value)},styles:ti,id:"hh",placeholder:"Select Date filter option..."})}),$&&$==="SELECT RESERVATION DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(In,{value:He,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT RESERVATION DATE"})})}):null,$&&$==="SELECT CHECK-IN DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(In,{value:Re,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT CHECK-IN DATE"})})}):null,$&&$==="SELECT CHECK-OUT DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(In,{value:S,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT CHECK-OUT DATE"})})}):null]})})})]})}),(V==null?void 0:V.length)&&(v==null?void 0:v.length)?a(ni,{allBooking:v,handleDataUpdate:m,dataRole:J,forFilterData:Le,handleClearFilter:Be,typeOfBooking:E,selectedtypeOfBooking:N,setSelectedtypeOfBooking:Mn,filterLoader:Ce,handleFilterSearch:Wn,dataFilterActive:t,removeDateFilter:Ae}):a("div",{className:"flex justify-center items-center",children:a("img",{src:Dl,alt:"NotFound",className:"h-[564px] object-contain"})})]})})},Ti=()=>{const[L,P]=u.exports.useState([]),[H,m]=u.exports.useState(!1);return u.exports.useEffect(()=>{m(!0),(async()=>{const v=await(await fetch("http://dev-rare.srp.ai/booking")).json();P(v),m(!1)})()},[]),a(B,{children:H===!1?a("div",{className:" space-y-5",children:a(li,{pagelink:"/add-booking",linktitle:"Add new Booking",title:"All Booking",allData:L,handleDataUpdate:()=>{(async()=>{m(!0);const v=await(await fetch("http://dev-rare.srp.ai/booking")).json();P(v),m(!1)})()}})}):a(Pn,{})})};export{Ti as default};
