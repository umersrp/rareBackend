import{R as Ht,j as a,F as B,A as $l,r as u,b as xe,c as y,L as F,I as G,aq as X,bM as Kl,bN as Bt,v as Yl,K as rn,bL as pn,T as Ne,b$ as ql,C as dn,G as Xl}from"./index.4b2918c9.js";import{D as Rt}from"./index.esm.d80b77fb.js";import{N as zl}from"./not-found.46bdbc04.js";import{G as Dl}from"./GlobalFilter.e1f0c3d7.js";import{E as Jl}from"./excel.9601f4f9.js";import{c as Ql}from"./calendar.6b75ea36.js";import{u as It,w as Zl}from"./jspdf.plugin.autotable.3816ad0b.js";import"./jspdf.es.min.cbd2e4d7.js";import"./html2canvas.esm.0eae2bf4.js";import{M as gn}from"./Modal.0045ccf0.js";const Vl=Ht.forwardRef(({indeterminate:L,...P},H)=>{const m=Ht.useRef(),z=H||m;return Ht.useEffect(()=>{z.current.indeterminate=L},[z,L]),a(B,{children:a("input",{type:"checkbox",ref:z,...P,className:"table-checkbox"})})}),Q={option:(L,P)=>({...L,fontSize:"14px"})},Fl=({showModal:L})=>a("div",{className:"thumbnail-container",children:L&&a("div",{className:"modal-overlay-property align-center-important",children:y("div",{className:"w-[300px]",children:[a("div",{className:"mb-3",children:a("img",{className:" w-[100%]",src:Yl,alt:"Logo"})}),y("svg",{className:"animate-spin  h-12 w-12 m-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a("circle",{className:"opacity-25 text-white",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a("path",{className:"opacity-75 text-white",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})})}),wl=({allBooking:L,handleDataUpdate:P,dataRole:H,forFilterData:m,handleFilterSearch:z,handleClearFilter:Z,filterLoader:D,dataFilterActive:v,removeDateFilter:M,typeOfBooking:w,selectedtypeOfBooking:K,setSelectedtypeOfBooking:Le})=>{const oe=window.location.origin,V=$l(),[ee,Ce]=u.exports.useState(!1),[te,$]=u.exports.useState(!1),[se,je]=u.exports.useState(""),[He,me]=u.exports.useState("");u.exports.useState("");const[Re,ke]=u.exports.useState(!1),[S,O]=u.exports.useState(""),[n,d]=u.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",owner_email:"",email:"",bookingagent:""}),[i,Ae]=u.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",owner_email:"",email:"",bookingagent:""});console.log("groupUnits",i);const[E,N]=u.exports.useState(""),[Pt,ue]=u.exports.useState(""),[C,U]=u.exports.useState(""),[Mt,Ie]=u.exports.useState(""),[k,Y]=u.exports.useState(""),[Ut,Be]=u.exports.useState(""),[o,x]=u.exports.useState(""),[g,h]=u.exports.useState(""),[b,A]=u.exports.useState(""),j=e=>{const{name:t,value:l}=e.target;d(s=>({...s,[t]:l})),Ae(s=>({...s,[t]:l}))};u.exports.useEffect(()=>(i.unitnumber&&(N(i.unitnumber),U(i.unitnumber),Y(i.unitnumber),x(i.unitnumber),h(i.unitnumber),A(i.unitnumber)),i.owner_email&&(O(i.owner_email),N(i.owner_email),U(i.owner_email),Y(i.owner_email),h(i.owner_email),A(i.owner_email)),i.communityid&&(O(i.communityid),U(i.communityid),Y(i.communityid),x(i.communityid),h(i.communityid),A(i.communityid)),i.projectnameid&&(O(i.projectnameid),N(i.projectnameid),Y(i.projectnameid),x(i.projectnameid),h(i.projectnameid),A(i.projectnameid)),i.buildingid&&(O(i.buildingid),N(i.buildingid),U(i.buildingid),x(i.buildingid),h(i.buildingid),A(i.buildingid)),i.email&&(O(i.email),N(i.email),U(i.email),Y(i.email),x(i.email),h(i.email)),i.bookingagent&&(O(i.bookingagent),N(i.bookingagent),U(i.bookingagent),Y(i.bookingagent),x(i.bookingagent)),()=>{N(""),U(""),Y(""),x(""),h(""),O("")}),[i]);const W=e=>{const{name:t,value:l}=e.target;i.unitnumber&&(N(i.unitnumber),d({...n,[t]:l}),ue({...n,[t]:l})),i.owner_email&&(O(i.owner_email),d({...n,[t]:l}),N(i.owner_email)),i.communityid&&(O(i.communityid),d({...n,[t]:l})),i.projectnameid&&(O(i.projectnameid),d({...n,[t]:l})),i.buildingid&&(O(i.buildingid),d({...n,[t]:l})),i.email&&(O(i.email),d({...n,[t]:l})),i.bookingagent&&(O(i.bookingagent),d({...n,[t]:l}))},ne=e=>{const{name:t,value:l}=e.target;i.unitnumber&&d({...n,[t]:l}),i.owner_email&&(d({...n,[t]:l}),U(i.owner_email)),i.communityid&&(d({...n,[t]:l}),U(i.communityid)),i.buildingid&&d({...n,[t]:l}),i.email&&d({...n,[t]:l}),i.bookingagent&&d({...n,[t]:l})},le=e=>{const{name:t,value:l}=e.target;i.unitnumber&&d({...n,[t]:l}),i.owner_email&&d({...n,[t]:l}),i.communityid&&d({...n,[t]:l}),i.projectnameid&&d({...n,[t]:l}),i.email&&d({...n,[t]:l}),i.bookingagent&&d({...n,[t]:l})},ie=e=>{const{name:t,value:l}=e.target;i.unitnumber&&d({...n,[t]:l}),i.communityid&&d({...n,[t]:l}),i.projectnameid&&d({...n,[t]:l}),i.buildingid&&d({...n,[t]:l}),i.email&&d({...n,[t]:l}),i.bookingagent&&d({...n,[t]:l})},ae=e=>{const{name:t,value:l}=e.target;i.email&&d({...n,[t]:l}),i.unitnumber&&d({...n,[t]:l}),i.communityid&&d({...n,[t]:l}),i.projectnameid&&d({...n,[t]:l}),i.buildingid&&d({...n,[t]:l}),i.bookingagent&&d({...n,[t]:l})},bn=async e=>{Ce(!0),me(e)},ce=e=>{const{name:t,value:l}=e.target;i.email&&d({...n,[t]:l}),i.unitnumber&&d({...n,[t]:l}),i.communityid&&d({...n,[t]:l}),i.projectnameid&&d({...n,[t]:l}),i.buildingid&&d({...n,[t]:l}),i.bookingagent&&d({...n,[t]:l})},fn=()=>{Ce(!1)},vn=async e=>{try{await rn.patch("http://portals.rarehomesgroup.com/booking/api/updatebooking",{_id:e,softdelete:!0}),P()}catch(t){console.log(t,"error")}};function p(e){var s,r;const t={},l=[];for(const c of e){const T=`${(s=c==null?void 0:c.label)==null?void 0:s.trim()}|${(r=c==null?void 0:c.value)==null?void 0:r.trim()}`;t[T]||(l.push(c),t[T]=!0)}return l}const[Se,hn]=u.exports.useState(!1),[yn,xn]=u.exports.useState(0),Wt=u.exports.useRef(null),Gt=e=>{const t=Wt.current;if(t){const s=t.scrollWidth-t.clientWidth;let r;e==="left"?r=Math.max(yn-100,0):r=s,t.scrollLeft=r,xn(r)}},Nn=async e=>{const l=`http://portals.rarehomesgroup.com/property/${e.propertyid}`,s=await rn.get(`${l}`);if(console.log("proData",s),s.statusText==="OK"&&s.status===200){const{propertyimages:r,propertylocation:c,subtype:T}=s.data,R={propertyimages:r.length>0?r[0]:null,propertylocation:c,subtype:T};V("/bookingsd",{state:{data:e,obj:R}})}},Cn=[{Header:"Sr no",accessor:"id",Cell:({row:e,flatRows:t})=>a("span",{children:t.indexOf(e)+1})},{Header:"Booking Number",accessor:"bookingnumber",Cell:e=>{var t,l,s,r,c,T,R,_,I,q,J;return a(B,{children:oe==="http://127.0.0.1:5173"||oe==="http://stg.srp.ai"||oe==="http://127.0.0.1:5174"?a(F,{to:`/view-booking/${(s=(l=(t=e==null?void 0:e.cell)==null?void 0:t.row)==null?void 0:l.original)==null?void 0:s._id}`,children:(r=e==null?void 0:e.cell)!=null&&r.value?((T=(c=e==null?void 0:e.cell)==null?void 0:c.value)==null?void 0:T.slice(0,15))+(((R=e==null?void 0:e.cell)==null?void 0:R.value.length)>15?"...":""):"Not Available"}):a("span",{children:(_=e==null?void 0:e.cell)!=null&&_.value?((q=(I=e==null?void 0:e.cell)==null?void 0:I.value)==null?void 0:q.slice(0,15))+(((J=e==null?void 0:e.cell)==null?void 0:J.value.length)>15?"...":""):"Not Available"})})}},{Header:"Booking Status",accessor:"cancelled",Cell:e=>{var t,l,s;return a("span",{className:"block w-full",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((t=e==null?void 0:e.cell)==null?void 0:t.value)===!1?"text-success-500 bg-success-500":""} 
            ${((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-danger-500 bg-danger-500":""}
            
             `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)===!0?"Cancelled":"Approved"})})}},{Header:"Unit No",accessor:e=>`${e.unitnumber}`,Cell:e=>{var t,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Building Name",accessor:e=>`${e.building_name}`,Cell:e=>{var t,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Floor Level",accessor:e=>`${e.floor}`,Cell:e=>{var t,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Community Name",accessor:e=>`${e.community_name}`,Cell:e=>{var t,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Project Name",accessor:e=>`${e.project_name}`,Cell:e=>{var t,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Owner Name",accessor:"owner_name",Cell:e=>{var t,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Guest Name",accessor:"guestname",Cell:e=>{var t,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Check in Type",accessor:"checkintype",Cell:e=>{var t,l,s,r;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"Nationality",accessor:"nationality",Cell:e=>{var t,l,s,r;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"passport no",accessor:"passportnumber",Cell:e=>{var t,l,s,r;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"Mobile Number",accessor:"mobilenumber",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Email",accessor:"email",Cell:e=>{var t,l,s,r;return a("span",{className:"lowercase",children:(t=e==null?void 0:e.cell)!=null&&t.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"No. of Adults",accessor:"noadults",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"No. of Children",accessor:"nochildern",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"0"})}},{Header:"No. Of Occupants",accessor:"totaloccupants",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Confirmation Code",accessor:"confirmationcode",Cell:e=>{var t,l,s,r;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((r=e==null?void 0:e.cell)==null?void 0:r.value.length)>15?"...":""):"Not Available"})}},{Header:"Booking Date",accessor:"reservation_date",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?new Date((l=e==null?void 0:e.cell)==null?void 0:l.value).toDateString():"Not Available"})}},{Header:"Booking Agent",accessor:"bookingagent",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Mode of Payment",accessor:"modepayment",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Check in Date",accessor:"checkindate",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?new Date((l=e==null?void 0:e.cell)==null?void 0:l.value).toDateString():"Not Available"})}},{Header:"Check out Date",accessor:"checkoutdate",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?new Date((l=e==null?void 0:e.cell)==null?void 0:l.value).toDateString():"Not Available"})}},{Header:"No. of Nights",accessor:"nonight",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"0.00"})}},{Header:"Tourism Fee /Unit",accessor:"tourismfee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value)+" AED":"0.00"})}},{Header:"Security Deposit Amount",accessor:"securitydeposit",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"TOTAL PAYOUT",accessor:"totalpayout",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Host Service Fee (portal)",accessor:"hostservicefee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Collection All incl",accessor:"totalcollectall",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Cleaning Fee",accessor:"cleaningfee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"TOTAL ADDITIONAL FEE",accessor:"totaladditionalfee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Room Rent Amount: ( Incl. portal fee)",accessor:"roomrentamount",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"Room Rent Amount: (host Payable)",accessor:"roomrenthostpayable",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"Guest Service Fee",accessor:"guestservicefee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Guest Management Fee",accessor:"guestmanagementfee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Host Management Fee",accessor:"hostmanagementfee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Room Rent Amount (incl. GM FEE)",accessor:"propertyid",Cell:e=>{var l,s,r,c,T,R,_,I,q,J,de,ge,pe,be,fe,ve,he,ye,jt,Dt,Jt,Qt,Zt,Vt,Ft,wt,en,tn,nn,ln,an,cn,on,sn,mn,un;let t;return((r=(s=(l=e==null?void 0:e.cell)==null?void 0:l.row)==null?void 0:s.original)==null?void 0:r.guestservicefee)&&((R=(T=(c=e==null?void 0:e.cell)==null?void 0:c.row)==null?void 0:T.original)==null?void 0:R.guestservicefee)>0?t=(parseFloat((q=(I=(_=e==null?void 0:e.cell)==null?void 0:_.row)==null?void 0:I.original)!=null&&q.roomrentamount?(ge=(de=(J=e==null?void 0:e.cell)==null?void 0:J.row)==null?void 0:de.original)==null?void 0:ge.roomrentamount:0)+parseFloat((fe=(be=(pe=e==null?void 0:e.cell)==null?void 0:pe.row)==null?void 0:be.original)!=null&&fe.guestmanagementfee?(ye=(he=(ve=e==null?void 0:e.cell)==null?void 0:ve.row)==null?void 0:he.original)==null?void 0:ye.guestmanagementfee:0)+parseFloat((Jt=(Dt=(jt=e==null?void 0:e.cell)==null?void 0:jt.row)==null?void 0:Dt.original)!=null&&Jt.guestservicefee?(Vt=(Zt=(Qt=e==null?void 0:e.cell)==null?void 0:Qt.row)==null?void 0:Zt.original)==null?void 0:Vt.guestservicefee:0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):t=(parseFloat((en=(wt=(Ft=e==null?void 0:e.cell)==null?void 0:Ft.row)==null?void 0:wt.original)!=null&&en.roomrentamount?(ln=(nn=(tn=e==null?void 0:e.cell)==null?void 0:tn.row)==null?void 0:nn.original)==null?void 0:ln.roomrentamount:0)+parseFloat((on=(cn=(an=e==null?void 0:e.cell)==null?void 0:an.row)==null?void 0:cn.original)!=null&&on.guestmanagementfee?(un=(mn=(sn=e==null?void 0:e.cell)==null?void 0:sn.row)==null?void 0:mn.original)==null?void 0:un.guestmanagementfee:0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),a("span",{children:t?t+" AED":"0.00"})}},{Header:"VAT 5% on Booking Room Rent",accessor:"vatperbookingrent",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Service fee",accessor:"vatperservicefee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Cleaning fee",accessor:"vatpercleaningfee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Guest Management",accessor:"vatperguestmanagementfee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% On Host Management Fee",accessor:"vatperhostmanagementfee",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Payout Vat",accessor:"totalvatper",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Room rent + GM+VAT",accessor:e=>`${e.totalroomrent}`,Cell:e=>{var t,l,s;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?((s=parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value))==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Audit Difference",accessor:e=>`${e.auditdiff}`,Cell:e=>a("span",{children:"0"})},{Header:"Total Collection All incl",accessor:e=>`${e.totalcollectall}`,Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"DTCM uploaded",accessor:"dtcm_uploaded",Cell:e=>{var t,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((t=e==null?void 0:e.cell)==null?void 0:t.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"passort id collected",accessor:"passortid_collected",Cell:e=>{var t,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((t=e==null?void 0:e.cell)==null?void 0:t.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"Signature verified as per Passport",accessor:"sign_verified",Cell:e=>{var t,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((t=e==null?void 0:e.cell)==null?void 0:t.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"smart code provided",accessor:"smartcode_provided",Cell:e=>{var t,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((t=e==null?void 0:e.cell)==null?void 0:t.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"Payment collected",accessor:"payment_collected",Cell:e=>{var t,l,s,r;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((t=e==null?void 0:e.cell)==null?void 0:t.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)===!0?"Yes":"No"})})})}},{Header:"created-by",accessor:"employee_email_createdBy",Cell:e=>{var t,l;return a("span",{className:"normal-case",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"created-on",accessor:"Created_At",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"updated-by",accessor:"employee_email_updatedBy",Cell:e=>{var t,l;return a("span",{className:"normal-case",children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"updated-on",accessor:"updated_At",Cell:e=>{var t,l;return a("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"action",accessor:e=>`${e._id}`,Cell:e=>{var I,q,J,de,ge,pe,be,fe,ve,he,ye;const t=localStorage.getItem("isAuth"),l=JSON.parse(t),{data:s}=pn(l==null?void 0:l.roleid);if(!s)return null;const r=(s==null?void 0:s.readbooking)===!0,c=(s==null?void 0:s.updatebooking)===!0,T=(s==null?void 0:s.deletebooking)===!0,R=(s==null?void 0:s.updatecustomer)===!0,_=(q=(I=e==null?void 0:e.cell)==null?void 0:I.row)==null?void 0:q.original;return y("div",{className:"flex space-x-3 rtl:space-x-reverse",children:[a(Ne,{content:"Download PDF Under Maintenance",placement:"top",arrow:!0,animation:"shift-away",children:a("button",{className:"action-btn",onClick:jt=>Nn(_),type:"button",children:a(G,{icon:"heroicons:arrow-down"})})}),R&&a(Ne,{content:"Edit Customer",placement:"top",arrow:!0,animation:"shift-away",children:((ge=(de=(J=e==null?void 0:e.cell)==null?void 0:J.row)==null?void 0:de.original)==null?void 0:ge.customertype)==="New Customer"?a(F,{className:"action-btn",to:`/update-customer/${(fe=(be=(pe=e==null?void 0:e.cell)==null?void 0:pe.row)==null?void 0:be.original)==null?void 0:fe.guest_id}`,type:"button",children:a(G,{icon:"heroicons:user"})}):a(F,{className:"action-btn",to:`/update-customer/${(ye=(he=(ve=e==null?void 0:e.cell)==null?void 0:ve.row)==null?void 0:he.original)==null?void 0:ye.customerid}`,type:"button",children:a(G,{icon:"heroicons:user"})})}),r&&a(Ne,{content:"View",placement:"top",arrow:!0,animation:"shift-away",children:a(F,{className:"action-btn",to:`/view-booking/${e==null?void 0:e.cell.value}`,type:"button",children:a(G,{icon:"heroicons:eye"})})}),c&&a(Ne,{content:"Edit",placement:"top",arrow:!0,animation:"shift-away",children:a(F,{to:`/update-booking/${e==null?void 0:e.cell.value}`,className:"action-btn",type:"button",children:a(G,{icon:"heroicons:pencil-square"})})}),T&&a(Ne,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:a("button",{className:"action-btn",type:"button",onClick:()=>bn(e==null?void 0:e.cell.value),children:a(G,{icon:"heroicons:trash"})})})]})}}];function kn(e){const t=[["BOOKING NUMBER","BOOKING STATUS","UNIT NO","BUILDING NAME","FLOOR LEVEL","COMMUNITY NAME","PROJECT NAME","OWNER NAME","GUEST NAME","CHECK IN TYPE","NATIONALITY","PASSPORT NO","MOBILE NUMBER","EMAIL","NO. OF ADULTS","NO. OF CHILDREN","NO. OF OCCUPANTS","CONFIRMATION CODE","BOOKING DATE","BOOKING DATE","MODE OF PAYMENT","CHECK IN DATE","CHECK OUT DATE","NO. OF NIGHTS","NO. OF NIGHTS","SECURITY DEPOSIT AMOUNT","TOTAL PAYOUT","HOST SERVICE FEE (PORTAL)","TOTAL COLLECTION ALL INCL","CLEANING FEE","TOTAL ADDITIONAL FEE","ROOM RENT AMOUNT: ( INCL. PORTAL FEE)","Room Rent Amount: (host Payable)","GUEST SERVICE FEE","GUEST MANAGEMENT FEE","HOST MANAGEMENT FEE","VAT 5% ON BOOKING ROOM RENT","VAT 5% ON BOOKING ROOM RENT","VAT 5% ON CLEANING FEE","VAT 5% ON GUEST MANAGEMENT","VAT 5% ON HOST MANAGEMENT FEE","TOTAL PAYOUT VAT","TOTAL ROOM RENT + GM+VAT","AUDIT DIFFERENCE","TOTAL COLLECTION ALL INCL","CREATED-BY","CREATED-ON"],...e.map(c=>[c.bookingnumber,c.cancelled===!1?"Approved":"Cancelled",c.unitnumber,c==null?void 0:c.building_name,c==null?void 0:c.floor,c==null?void 0:c.community_name,c==null?void 0:c.project_name,c==null?void 0:c.owner_name,c.guestname,c.checkintype,c.nationality,c.passportnumber,c.mobilenumber,c.email,c.noadults,c.nochildern,c.totaloccupants,c.confirmationcode,new Date(c.reservationdate).toDateString(),c.bookingagent,c.modepayment,new Date(c.checkindate).toDateString(),new Date(c.checkoutdate).toDateString(),c.nonight,c.tourismfee,c.securitydeposit?c.securitydeposit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalpayout?c.totalpayout.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.hostservicefee?c.hostservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalcollectall?c.totalcollectall.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.cleaningfee?c.cleaningfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totaladditionalfee?c.totaladditionalfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.roomrentamount?c.roomrentamount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.roomrenthostpayable?c.roomrenthostpayable.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.guestservicefee?c.guestservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.guestmanagementfee?c.guestmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.hostmanagementfee?c.hostmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperbookingrent?c.vatperbookingrent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperservicefee?c.vatperservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatpercleaningfee?c.vatpercleaningfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperguestmanagementfee?c.vatperguestmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperhostmanagementfee?c.vatperhostmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalvatper?c.totalvatper.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalroomrent?c.totalroomrent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,0,c.totalcollectall?c.totalcollectall.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c==null?void 0:c.employee_email_createdBy,new Date(c.createdAt).toDateString()])],l=It.aoa_to_sheet(t),s=It.book_new();It.book_append_sheet(s,l,"Sheet1");const r=Zl(s,{bookType:"xlsx",type:"array"});ql.exports.saveAs(new Blob([r],{type:"application/octet-stream"}),"bookings.xlsx")}const An=u.exports.useMemo(()=>Cn,[]),Sn=u.exports.useMemo(()=>L),[f,$t]=u.exports.useState(""),[ni,Kt]=u.exports.useState(!1),[Yt,qt]=u.exports.useState(!1);u.exports.useState(!1),u.exports.useState(""),u.exports.useState(!1),u.exports.useEffect(()=>{$t(""),qt(!1)},[L]);const En=xe.exports.useTable({columns:An,data:Sn,initialState:{pageIndex:0,pageSize:50}},xe.exports.useGlobalFilter,xe.exports.useSortBy,xe.exports.usePagination,xe.exports.useRowSelect,e=>{e.visibleColumns.push(t=>[{id:"selection",Header:({getToggleAllRowsSelectedProps:l})=>a("div",{children:a(Vl,{...l()})}),Cell:({row:l})=>{var R;const[s,r]=u.exports.useState(""),c=_=>{_!=null&&_._id?Kt(!0):Kt(!1),r(I=>I===_?"":_),$t(I=>I===_?"":_)};let T;return u.exports.useEffect(()=>{var _;qt(((_=l==null?void 0:l.original)==null?void 0:_._id)===(s==null?void 0:s._id)),Yt===!0?T=!0:Yt===!1&&(T=!1)},[(R=l==null?void 0:l.original)==null?void 0:R._id,s==null?void 0:s._id]),a("div",{children:a("input",{type:"checkbox",...l.getToggleRowSelectedProps(),checked:T,onChange:()=>c(l.original),className:"table-checkbox"})})}},...t])}),{getTableProps:_n,getTableBodyProps:Tn,headerGroups:On,footerGroups:li,page:Ln,nextPage:jn,previousPage:Hn,canNextPage:Ee,canPreviousPage:_e,pageOptions:Xt,state:Rn,gotoPage:Pe,pageCount:In,setPageSize:Bn,setGlobalFilter:Pn,prepareRow:Mn}=En,{globalFilter:Un,pageIndex:zt,pageSize:Wn}=Rn,Gn=m.filter(e=>e.unitnumber!==void 0),Te=[...new Set(Gn.map(e=>e.unitnumber))].sort((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"})).map(e=>({label:e,value:e})),$n=m.filter(e=>e.community_name!==void 0),Me=[...[...new Set($n.map(e=>e.communityid))].map(e=>{const t=m.find(l=>l.communityid===e);return t?{label:t.community_name,value:t.communityid}:null}).filter(Boolean)].sort((e,t)=>e.label.localeCompare(t.label)),Kn=m.filter(e=>e.project_name!==void 0),Ue=[...[...new Set(Kn.map(e=>e.projectnameid))].map(e=>{const t=m.find(l=>l.projectnameid===e);return t?{label:t.project_name,value:t.projectnameid}:null}).filter(Boolean)].sort((e,t)=>e.label.localeCompare(t.label)),Yn=m.filter(e=>e.building_name!==void 0),We=[...[...new Set(Yn.map(e=>e.buildingid))].map(e=>{const t=m.find(l=>l.buildingid===e);return t?{label:t.building_name,value:t.buildingid}:null}).filter(Boolean)].sort((e,t)=>e.label.localeCompare(t.label)),qn=m.filter(e=>e.owner_email!==void 0),Ge=[...[...new Set(qn.map(e=>e.owner_email))].map(e=>{const t=m.find(l=>l.owner_email===e);return t?{label:t.owner_name+" | "+t.owner_email,value:t.owner_email}:null}).filter(Boolean)].sort((e,t)=>{var l;return(l=e.label)==null?void 0:l.localeCompare(t.label)}),Xn=m.filter(e=>e.email!==void 0),$e=[...[...new Set(Xn.map(e=>e.email))].map(e=>{const t=m.find(l=>l.email===e);return t?{label:t.guestname+" | "+t.email,value:t.email}:null}).filter(Boolean)].sort((e,t)=>e.label.localeCompare(t.label)),Ke=[...[{value:"Airbnb",label:"Airbnb"},{value:"Booking.com",label:"Booking.com"},{value:"vrbo",label:"vrbo"},{value:"Direct Booking",label:"Direct Booking"},{value:"Not in the List",label:"Not in the List"}]].sort((e,t)=>e.label.localeCompare(t.label)),zn=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{community_name:t,communityid:l}=e;if(t!=""&&l!="")return{label:t,value:l}}),Dn=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{projectnameid:t,project_name:l}=e;if(t!=""&&l!="")return{label:l,value:t}}),Jn=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{building_name:t,buildingid:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),Qn=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{owner_name:t,owner_email:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),Zn=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{email:t,guestname:l}=e;if(t!=""&&l!="")return{label:l+"|"+t,value:t}}),Vn=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{bookingagent:t}=e;if(t!="")return{label:t,value:t}}),Fn=p(zn),wn=p(Dn),el=p(Jn),tl=p(Qn),nl=p(Zn),ll=p(Vn),Ye=Fn.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),qe=wn.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Xe=el.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),ze=tl.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),De=nl.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Je=ll.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),il=m.filter(e=>e.communityid===i.communityid).map(e=>{const{unitnumber:t}=e;if(t!="")return{label:t,value:t}}),al=m.filter(e=>e.communityid===i.communityid).map(e=>{const{projectnameid:t,project_name:l}=e;if(t!=""&&l!="")return{label:l,value:t}}),cl=m.filter(e=>e.communityid===i.communityid).map(e=>{const{building_name:t,buildingid:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),ol=m.filter(e=>e.communityid===i.communityid).map(e=>{const{owner_name:t,owner_email:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),sl=m.filter(e=>e.communityid===i.communityid).map(e=>{const{email:t,guestname:l}=e;if(t!=""&&l!="")return{label:l+"|"+t,value:t}}),ml=m.filter(e=>e.communityid===i.communityid).map(e=>{const{bookingagent:t}=e;if(t!="")return{label:t,value:t}}),Qe=p(il).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Ze=p(al).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Ve=p(cl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Fe=p(ol).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),we=p(sl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),et=p(ml).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),ul=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{unitnumber:t}=e;if(t!="")return{label:t,value:t}}),tt=p(ul).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),rl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{community_name:t,communityid:l}=e;if(t!=""&&l!="")return{label:t,value:l}}),nt=p(rl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),dl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{building_name:t,buildingid:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),lt=p(dl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),gl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{owner_name:t,owner_email:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),it=p(gl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),pl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{email:t,guestname:l}=e;if(t!=""&&l!="")return{label:l+"|"+t,value:t}}),at=p(pl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),bl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{bookingagent:t}=e;if(t!="")return{label:t,value:t}}),ct=p(bl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),fl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{unitnumber:t}=e;if(t!="")return{label:t,value:t}}),ot=p(fl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),vl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{community_name:t,communityid:l}=e;if(t!=""&&l!="")return{label:t,value:l}}),st=p(vl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),hl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{projectnameid:t,project_name:l}=e;if(t!=""&&l!="")return{label:l,value:t}}),mt=p(hl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),yl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{owner_name:t,owner_email:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),ut=p(yl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),xl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{email:t,guestname:l}=e;if(t!=""&&l!="")return{label:l+"|"+t,value:t}}),rt=p(xl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Nl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{bookingagent:t}=e;if(t!="")return{label:t,value:t}}),dt=p(Nl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Cl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{unitnumber:t}=e;if(t!="")return{label:t,value:t}}),kl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{community_name:t,communityid:l}=e;if(t!=""&&l!="")return{label:t,value:l}}),Al=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{projectnameid:t,project_name:l}=e;if(t!=""&&l!="")return{label:l,value:t}}),Sl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{building_name:t,buildingid:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),El=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{email:t,guestname:l}=e;if(t!=""&&l!="")return{label:l+"|"+t,value:t}}),_l=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{bookingagent:t}=e;if(t!="")return{label:t,value:t}}),Oe=p(Cl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),gt=p(kl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),pt=p(Al).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),bt=p(Sl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),ft=p(El).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),vt=p(_l).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Tl=m.filter(e=>e.email===i.email).map(e=>{const{unitnumber:t}=e;if(t!="")return{label:t,value:t}}),ht=p(Tl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Ol=m.filter(e=>e.email===i.email).map(e=>{const{community_name:t,communityid:l}=e;if(t!=""&&l!="")return{label:t,value:l}}),yt=p(Ol).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Ll=m.filter(e=>e.email===i.email).map(e=>{const{projectnameid:t,project_name:l}=e;if(t!=""&&l!="")return{label:l,value:t}}),xt=p(Ll).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),jl=m.filter(e=>e.email===i.email).map(e=>{const{building_name:t,buildingid:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),Nt=p(jl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Hl=m.filter(e=>e.email===i.email).map(e=>{const{owner_name:t,owner_email:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),Ct=p(Hl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Rl=m.filter(e=>e.email===i.email).map(e=>{const{bookingagent:t}=e;if(t!="")return{label:t,value:t}}),kt=p(Rl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Il=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{unitnumber:t}=e;if(t!="")return{label:t,value:t}}),At=p(Il).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Bl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{community_name:t,communityid:l}=e;if(t!=""&&l!="")return{label:t,value:l}}),St=p(Bl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Pl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{projectnameid:t,project_name:l}=e;if(t!=""&&l!="")return{label:l,value:t}}),Et=p(Pl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Ml=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{building_name:t,buildingid:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),_t=p(Ml).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Ul=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{owner_name:t,owner_email:l}=e;if(l!=""&&t!="")return{label:t,value:l}}),Tt=p(Ul).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Wl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{email:t,guestname:l}=e;if(t!=""&&l!="")return{label:l+"|"+t,value:t}}),Ot=p(Wl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,t)=>e.label.localeCompare(t.label)),Gl=()=>{Z(),N(""),Ae(""),ue(""),U(""),Ie(""),d(""),x(""),Be(""),h(""),A("")},[Lt,re]=u.exports.useState(!1);return u.exports.useEffect(()=>{const e=t=>{const{_id:l,propertyid:s,checkindate:r,checkoutdate:c,cancelled:T}=t,{checkindate:R,checkoutdate:_,propertyid:I}=f;return l!==(f==null?void 0:f._id)&&T===!1?new Date(r).toISOString()<new Date(_).toISOString()&&new Date(c).toISOString()>new Date(R).toISOString()&&s===I?(re(!0),!0):(re(!1),!1):(console.log("first else"),re(!1),!1)};if((f==null?void 0:f.checkindate)&&(f==null?void 0:f.checkoutdate)&&(f==null?void 0:f.propertyid)){let t=!1;for(let l=0;l<m.length;l++){const s=m[l];if(e(s)){t=!0;break}}re(t)}else re(!1)},[f==null?void 0:f.checkindate,f==null?void 0:f.checkoutdate,f==null?void 0:f.propertyid]),y(B,{children:[y("div",{className:"md:flex justify-end items-center mb-6 gap-x-[25px]",children:[y(F,{to:"/calendar-2-0",className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer",children:[a("img",{src:Ql,alt:"Calendar icon",className:"w-[20px] h-[20px] noselect"}),a("p",{className:"text-[14px] leading regular color-black",children:"Calendar View"})]}),y("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer",onClick:()=>kn(L),children:[a("img",{src:Jl,alt:"Excel icon",className:"w-[20px] h-[20px] noselect"}),a("p",{className:"text-[14px] leading regular color-black",children:"Export in Excel"})]}),f&&(f==null?void 0:f.cancelled)===!1?a(B,{children:a(gn,{title:"Do you want to Cancel this booking?",label:"Cancel booking",labelClass:"btn btn inline-flex justify-center btn-danger py-[8px] px-[24px] rounded-[5px]",uncontrol:!0,alldata:f,onDataUpdate:P,bookingtable:!0,cancelkrnihai:!0,bookingUpdate:!0,children:a("h4",{className:"font-medium text-lg mb-3 text-slate-900 text-center",children:"Are you sure?"})})}):null,Lt===!1&&f&&(f==null?void 0:f.cancelled)===!0?a(B,{children:a(gn,{title:"Do you want to Approve this booking?",label:"Approve booking",labelClass:"btn btn inline-flex justify-center btn-dark py-[8px] px-[24px] rounded-[5px]",uncontrol:!0,alldata:f,onDataUpdate:P,bookingtable:!0,cancelkrnihai:!1,alreadyBooking:Lt,bookingUpdate:!0,children:a("h4",{className:"font-medium text-lg mb-3 text-slate-900 text-center",children:"Are you sure?"})})}):null,Lt===!0&&f&&(f==null?void 0:f.cancelled)===!0?a(B,{children:a("button",{type:"button",class:"btn btn btn inline-flex justify-center btn-danger py-[8px] px-[24px] rounded-[5px]",children:"This property cannot be approved as it is already booked"})}):null,a(B,{}),y("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer md:mb-0 mb-4",onClick:()=>hn(!Se),children:[Se===!0?a(G,{icon:"heroicons:minus-small",className:"w-[20px] h-[20px]"}):a(G,{icon:"heroicons:plus-small",className:"w-[20px] h-[20px]"}),a("p",{className:"text-[16px] leading regular color-black",children:"Advance filter"})]}),v===!0?a("button",{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",type:"button",onClick:M,children:"Remove Date Filter"}):null,a("div",{className:"w-[180px]",children:a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:w,value:w==null?void 0:w.filter(function(e){return e.value===K}),onChange:e=>{Le(e==null?void 0:e.value)},styles:Q,id:"hh",placeholder:"Select Date filter option..."})}),a(Dl,{filter:Un,setFilter:Pn})]}),console.log("unitNumberOptions",Te,"first",Oe),y("div",{className:`xl:grid-cols-3 grid gap-5 grid-cols-1 ${Se===!0?"filter-show mt-6 pointer-events-auto":"filter-remove -mt-4 pointer-events-none"}`,children:[y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Unit No."}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:S?i.communityid&&S?Qe:i.projectnameid&&S?tt:i.buildingid&&S?ot:i.email&&S?ht:i.bookingagent&&S?At:Oe:Te,value:S?i.communityid&&S?Qe&&Qe.filter(function(e){if((n==null?void 0:n.unitnumber)!=="")return e.value===(n==null?void 0:n.unitnumber)}):i.projectnameid&&S?tt&&tt.filter(function(e){if((n==null?void 0:n.unitnumber)!=="")return e.value===(n==null?void 0:n.unitnumber)}):i.buildingid&&S?ot&&ot.filter(function(e){if((n==null?void 0:n.unitnumber)!=="")return e.value===(n==null?void 0:n.unitnumber)}):i.email&&S?ht&&ht.filter(function(e){if((n==null?void 0:n.unitnumber)!=="")return e.value===(n==null?void 0:n.unitnumber)}):i.bookingagent&&S?At&&At.filter(function(e){if((n==null?void 0:n.unitnumber)!=="")return e.value===(n==null?void 0:n.unitnumber)}):Oe&&Oe.filter(function(e){if((n==null?void 0:n.unitnumber)!=="")return e.value===(n==null?void 0:n.unitnumber)}):Te&&Te.filter(function(e){if((n==null?void 0:n.unitnumber)!=="")return e.value===(n==null?void 0:n.unitnumber)}),onChange:e=>{S?i.communityid&&S?W({target:{name:"unitnumber",value:e.value}}):i.projectnameid&&S?W({target:{name:"unitnumber",value:e.value}}):i.buildingid&&S?W({target:{name:"unitnumber",value:e.value}}):i.email&&S?W({target:{name:"unitnumber",value:e.value}}):i.bookingagent&&S?W({target:{name:"unitnumber",value:e.value}}):W({target:{name:"unitnumber",value:e.value}}):j({target:{name:"unitnumber",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),n!=null&&n.unitnumber?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...n,unitnumber:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Community Name"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:E?i.owner_email&&E?gt:i.projectnameid&&E?nt:i.buildingid&&E?st:i.email&&E?yt:i.bookingagent&&E?St:Ye:Me,value:E?i.owner_email&&E?gt&&gt.filter(function(e){if((n==null?void 0:n.communityid)!=="")return e.value===(n==null?void 0:n.communityid)}):i.projectnameid&&E?nt&&nt.filter(function(e){if((n==null?void 0:n.communityid)!=="")return e.value===(n==null?void 0:n.communityid)}):i.buildingid&&E?st&&st.filter(function(e){if((n==null?void 0:n.communityid)!=="")return e.value===(n==null?void 0:n.communityid)}):i.email&&E?yt&&yt.filter(function(e){if((n==null?void 0:n.communityid)!=="")return e.value===(n==null?void 0:n.communityid)}):i.bookingagent&&E?St&&St.filter(function(e){if((n==null?void 0:n.communityid)!=="")return e.value===(n==null?void 0:n.communityid)}):Ye&&Ye.filter(function(e){if((n==null?void 0:n.communityid)!=="")return e.value===(n==null?void 0:n.communityid)}):Me&&Me.filter(function(e){if((n==null?void 0:n.communityid)!=="")return e.value===(n==null?void 0:n.communityid)}),onChange:e=>{E?i.owner_email&&E?W({target:{name:"communityid",value:e.value}}):i.projectnameid&&E?W({target:{name:"communityid",value:e.value}}):i.buildingid&&E?W({target:{name:"communityid",value:e.value}}):i.email&&E?W({target:{name:"communityid",value:e.value}}):i.bookingagent&&E?W({target:{name:"communityid",value:e.value}}):W({target:{name:"communityid",value:e.value}}):j({target:{name:"communityid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),n!=null&&n.communityid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...n,communityid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Project Name"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:C?i.owner_email&&C?pt:i.communityid&&C?Ze:i.buildingid&&C?mt:i.email&&C?xt:i.bookingagent&&C?Et:qe:Ue,value:C?i.owner_email&&C?pt&&pt.filter(function(e){if((n==null?void 0:n.projectnameid)!=="")return e.value===(n==null?void 0:n.projectnameid)}):i.communityid&&C?Ze&&Ze.filter(function(e){if((n==null?void 0:n.projectnameid)!=="")return e.value===(n==null?void 0:n.projectnameid)}):i.buildingid&&C?mt&&mt.filter(function(e){if((n==null?void 0:n.projectnameid)!=="")return e.value===(n==null?void 0:n.projectnameid)}):i.email&&C?xt&&xt.filter(function(e){if((n==null?void 0:n.projectnameid)!=="")return e.value===(n==null?void 0:n.projectnameid)}):i.bookingagent&&C?Et&&Et.filter(function(e){if((n==null?void 0:n.projectnameid)!=="")return e.value===(n==null?void 0:n.projectnameid)}):qe&&qe.filter(function(e){if((n==null?void 0:n.projectnameid)!=="")return e.value===(n==null?void 0:n.projectnameid)}):Ue&&Ue.filter(function(e){if((n==null?void 0:n.projectnameid)!=="")return e.value===(n==null?void 0:n.projectnameid)}),onChange:e=>{C?i.owner_email&&C?ne({target:{name:"projectnameid",value:e.value}}):i.communityid&&C?ne({target:{name:"projectnameid",value:e.value}}):i.buildingid&&C?ne({target:{name:"projectnameid",value:e.value}}):i.email&&C?ne({target:{name:"projectnameid",value:e.value}}):i.bookingagent&&C?ne({target:{name:"projectnameid",value:e.value}}):ne({target:{name:"projectnameid",value:e.value}}):j({target:{name:"projectnameid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),n!=null&&n.projectnameid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...n,projectnameid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Building Name"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:k?i.owner_email&&k?bt:i.communityid&&k?Ve:i.projectnameid&&k?lt:i.email&&k?Nt:i.bookingagent&&k?_t:Xe:We,value:k?i.owner_email&&k?bt&&bt.filter(function(e){if((n==null?void 0:n.buildingid)!=="")return e.value===(n==null?void 0:n.buildingid)}):i.communityid&&k?Ve&&Ve.filter(function(e){if((n==null?void 0:n.buildingid)!=="")return e.value===(n==null?void 0:n.buildingid)}):i.projectnameid&&k?lt&&lt.filter(function(e){if((n==null?void 0:n.buildingid)!=="")return e.value===(n==null?void 0:n.buildingid)}):i.email&&k?Nt&&Nt.filter(function(e){if((n==null?void 0:n.buildingid)!=="")return e.value===(n==null?void 0:n.buildingid)}):i.bookingagent&&k?_t&&_t.filter(function(e){if((n==null?void 0:n.buildingid)!=="")return e.value===(n==null?void 0:n.buildingid)}):Xe&&Xe.filter(function(e){if((n==null?void 0:n.buildingid)!=="")return e.value===(n==null?void 0:n.buildingid)}):We&&We.filter(function(e){if((n==null?void 0:n.buildingid)!=="")return e.value===(n==null?void 0:n.buildingid)}),onChange:e=>{k?i.owner_email&&k?le({target:{name:"buildingid",value:e.value}}):i.communityid&&k?le({target:{name:"buildingid",value:e.value}}):i.projectnameid&&k?le({target:{name:"buildingid",value:e.value}}):i.email&&k?le({target:{name:"buildingid",value:e.value}}):i.bookingagent&&k?le({target:{name:"buildingid",value:e.value}}):le({target:{name:"buildingid",value:e.value}}):j({target:{name:"buildingid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),n!=null&&n.buildingid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...n,buildingid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Owner Name"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:o?i.communityid&&o?Fe:i.projectnameid&&o?it:i.buildingid&&o?ut:i.email&&o?Ct:i.bookingagent&&o?Tt:ze:Ge,value:o?i.communityid&&o?Fe&&Fe.filter(function(e){if((n==null?void 0:n.owner_email)!=="")return e.value===(n==null?void 0:n.owner_email)}):i.projectnameid&&o?it&&it.filter(function(e){if((n==null?void 0:n.owner_email)!=="")return e.value===(n==null?void 0:n.owner_email)}):i.buildingid&&o?ut&&ut.filter(function(e){if((n==null?void 0:n.owner_email)!=="")return e.value===(n==null?void 0:n.owner_email)}):i.email&&o?Ct&&Ct.filter(function(e){if((n==null?void 0:n.owner_email)!=="")return e.value===(n==null?void 0:n.owner_email)}):i.bookingagent&&o?Tt&&Tt.filter(function(e){if((n==null?void 0:n.owner_email)!=="")return e.value===(n==null?void 0:n.owner_email)}):ze&&ze.filter(function(e){if((n==null?void 0:n.owner_email)!=="")return e.value===(n==null?void 0:n.owner_email)}):Ge&&Ge.filter(function(e){if((n==null?void 0:n.owner_email)!=="")return e.value===(n==null?void 0:n.owner_email)}),onChange:e=>{o?i.communityid&&o?ie({target:{name:"owner_email",value:e.value}}):i.projectnameid&&o?ie({target:{name:"owner_email",value:e.value}}):i.buildingid&&o?ie({target:{name:"owner_email",value:e.value}}):i.email&&o?ie({target:{name:"owner_email",value:e.value}}):i.bookingagent&&o?ie({target:{name:"owner_email",value:e.value}}):ie({target:{name:"owner_email",value:e.value}}):j({target:{name:"owner_email",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),n!=null&&n.owner_email?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...n,owner_email:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Guest Name / Email"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:b?i.communityid&&b?we:i.buildingid&&b?rt:i.projectnameid&&b?at:i.owner_email&&b?ft:i.bookingagent&&b?kt:De:$e,value:b?i.communityid&&b?we&&we.filter(function(e){if((n==null?void 0:n.email)!=="")return e.value===(n==null?void 0:n.email)}):i.buildingid&&b?rt&&rt.filter(function(e){if((n==null?void 0:n.email)!=="")return e.value===(n==null?void 0:n.email)}):i.projectnameid&&b?at&&at.filter(function(e){if((n==null?void 0:n.email)!=="")return e.value===(n==null?void 0:n.email)}):i.owner_email&&b?ft&&ft.filter(function(e){if((n==null?void 0:n.email)!=="")return e.value===(n==null?void 0:n.email)}):i.bookingagent&&b?kt&&kt.filter(function(e){if((n==null?void 0:n.email)!=="")return e.value===(n==null?void 0:n.email)}):De&&De.filter(function(e){if((n==null?void 0:n.email)!=="")return e.value===(n==null?void 0:n.email)}):$e&&$e.filter(function(e){if((n==null?void 0:n.email)!=="")return e.value===(n==null?void 0:n.email)}),onChange:e=>{b?i.communityid&&b?ae({target:{name:"email",value:e.value}}):i.buildingid&&b?ae({target:{name:"email",value:e.value}}):i.projectnameid&&b?ae({target:{name:"email",value:e.value}}):i.owner_email&&b?ae({target:{name:"email",value:e.value}}):i.bookingagent&&b?ae({target:{name:"email",value:e.value}}):ae({target:{name:"email",value:e.value}}):j({target:{name:"email",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),n!=null&&n.email?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...n,email:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Booking Agent"}),a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:g?i.communityid&&g?et:i.projectnameid&&g?ct:i.buildingid&&g?dt:i.owner_email&&g?vt:i.email&&g?Ot:Je:Ke,value:g?i.communityid&&g?et&&et.filter(function(e){if((n==null?void 0:n.bookingagent)!=="")return e.value===(n==null?void 0:n.bookingagent)}):i.projectnameid&&g?ct&&ct.filter(function(e){if((n==null?void 0:n.bookingagent)!=="")return e.value===(n==null?void 0:n.bookingagent)}):i.buildingid&&g?dt&&dt.filter(function(e){if((n==null?void 0:n.bookingagent)!=="")return e.value===(n==null?void 0:n.bookingagent)}):i.owner_email&&g?vt&&vt.filter(function(e){if((n==null?void 0:n.bookingagent)!=="")return e.value===(n==null?void 0:n.bookingagent)}):i.email&&g?Ot&&Ot.filter(function(e){if((n==null?void 0:n.bookingagent)!=="")return e.value===(n==null?void 0:n.bookingagent)}):Je&&Je.filter(function(e){if((n==null?void 0:n.bookingagent)!=="")return e.value===(n==null?void 0:n.bookingagent)}):Ke&&Ke.filter(function(e){if((n==null?void 0:n.bookingagent)!=="")return e.value===(n==null?void 0:n.bookingagent)}),onChange:e=>{g?i.communityid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.projectnameid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.buildingid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.owner_email&&g?ce({target:{name:"bookingagent",value:e.value}}):i.email&&g?ce({target:{name:"bookingagent",value:e.value}}):ce({target:{name:"bookingagent",value:e.value}}):j({target:{name:"bookingagent",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),n!=null&&n.bookingagent?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>d({...n,bookingagent:""}),children:"Clear filter"}):null]})]}),y("div",{className:`flex ${Se===!0?"filter-show mt-6 pointer-events-auto":"filter-remove mt-0 pointer-events-none"} justify-end gap-x-[10px]`,children:[a("button",{className:"btn btn-secondary  text-center",type:"button",onClick:()=>Gl(),children:"Clear filter"}),a("button",{className:"btn btn-dark  text-center",type:"button",onClick:()=>z(n),children:"Search"})]}),a(Kl,{showModal:ee,handleClose:fn,loaderModal:te,linkedData:se,handleDeleteData:vn,dataId:He,moduleName:"Booking"}),a(Fl,{showModal:Re}),y("div",{className:"flex gap-x-[10px] mb-[10px]",children:[a("button",{className:"btn bg-white border  text-center",onClick:()=>Gt("left"),children:a(G,{icon:"heroicons-arrow-left"})}),a("button",{className:"btn bg-white border text-center",onClick:()=>Gt("right"),children:a(G,{icon:"heroicons-arrow-right"})})]}),a("div",{style:{overflow:"auto"},ref:Wt,children:a("div",{className:"inline-block min-w-full align-middle",children:a("div",{className:"",children:y("table",{className:"min-w-[206%] overflow-x-hidden  table-fixed dark:divide-slate-700",..._n,children:[a("thead",{className:"bg-slate-200 dark:bg-slate-700",children:On.map(e=>a("tr",{...e.getHeaderGroupProps(),children:e.headers.map(t=>t.Header==="action"&&!((H==null?void 0:H.readbooking)===!0||(H==null?void 0:H.updatebooking)===!0||(H==null?void 0:H.deletebooking)===!0)?a("th",{}):y("th",{...t.getHeaderProps(t.getSortByToggleProps()),scope:"col",className:"table-th",children:[t.render("Header"),a("span",{children:t.isSorted?t.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),D===!0?a("div",{className:"pl-[10px]",children:a(Bt,{})}):a("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...Tn,children:Ln.map(e=>(Mn(e),a("tr",{...e.getRowProps(),children:e.cells.map(t=>a("td",{...t.getCellProps(),className:"table-td",children:t.render("Cell")}))})))})]})})})}),y("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[y("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[a("select",{className:"form-control py-2 w-max",value:Wn,onChange:e=>Bn(Number(e.target.value)),children:[50,100,200].map(e=>y("option",{value:e,children:["Show ",e]},e))}),y("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",y("span",{children:[zt+1," of ",Xt.length]})]})]}),y("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[a("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${_e?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Pe(0),disabled:!_e,children:a(G,{icon:"heroicons:chevron-double-left-solid"})})}),a("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${_e?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Hn(),disabled:!_e,children:"Prev"})}),Xt.map((e,t)=>a("li",{children:a("button",{href:"#","aria-current":"page",className:` ${t===zt?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>Pe(t),children:e+1})},t)),a("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${Ee?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>jn(),disabled:!Ee,children:"Next"})}),a("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{onClick:()=>Pe(In-1),disabled:!Ee,className:` ${Ee?"":"opacity-50 cursor-not-allowed"}`,children:a(G,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})},ei={option:(L,P)=>({...L,fontSize:"14px"})},ti=({title:L,linktitle:P,pagelink:H,handleDataUpdate:m})=>{const z=localStorage.getItem("isAuth"),Z=JSON.parse(z),{data:D}=pn(Z==null?void 0:Z.roleid),[v,M]=u.exports.useState([]),[w,K]=u.exports.useState(!1),[Le,oe]=u.exports.useState(""),[V,ee]=u.exports.useState(""),[Ce,te]=u.exports.useState(!1);u.exports.useState({startDate:"",endDate:""});const[$,se]=u.exports.useState(""),je=[{value:"SELECT RESERVATION DATE",label:"SELECT RESERVATION DATE"},{value:"SELECT CHECK-IN DATE",label:"SELECT CHECK-IN DATE"},{value:"SELECT CHECK-OUT DATE",label:"SELECT CHECK-OUT DATE"}],[He,me]=u.exports.useState({startDate:"",endDate:""}),[Re,ke]=u.exports.useState({startDate:"",endDate:""}),[S,O]=u.exports.useState({startDate:"",endDate:""}),[n,d]=u.exports.useState(!1),i=async o=>{if($==="SELECT RESERVATION DATE"){me(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.reservationdate),A=new Date(o==null?void 0:o.startDate),j=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),j.setHours(0,0,0,0),(b<A||b>j)&&(h=!1)}return h});M(x),d(!0)}else if($==="SELECT CHECK-IN DATE"){ke(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.checkindate),A=new Date(o==null?void 0:o.startDate),j=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),j.setHours(0,0,0,0),(b<A||b>j)&&(h=!1)}return h});M(x),d(!0)}else if($==="SELECT CHECK-OUT DATE"){O(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.checkoutdate),A=new Date(o==null?void 0:o.startDate),j=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),j.setHours(0,0,0,0),(b<A||b>j)&&(h=!1)}return h});M(x),d(!0)}},Ae=async()=>{K(!0);const x=await(await fetch("http://portals.rarehomesgroup.com/booking")).json();M(x),ee(x),me({startDate:"",endDate:""}),ke({startDate:"",endDate:""}),O({startDate:"",endDate:""}),se(""),K(!1),d(!1)},E=[{value:"All Booking",label:"All Booking"},{value:"Approved Booking",label:"Approved Booking"},{value:"Cancelled Booking",label:"Cancelled Booking"}],[N,Pt]=u.exports.useState("All Booking");u.exports.useEffect(()=>{N==="All Booking"?(async()=>{K(!0);const g=await(await fetch("http://portals.rarehomesgroup.com/booking")).json();M(g),ee(g),oe(g),K(!1)})():N==="Approved Booking"?(async()=>{K(!0);const g=await(await fetch("http://portals.rarehomesgroup.com/booking/api/approvedbooking")).json();M(g),ee(g),K(!1)})():N==="Cancelled Booking"&&(async()=>{K(!0);const g=await(await fetch("http://portals.rarehomesgroup.com/booking/api/cancelledbooking?cancelled=true")).json();M(g),ee(g),K(!1)})()},[N]);const[ue,C]=u.exports.useState(0),U={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#00EBFF"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},Mt={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#FB8F65"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}};u.exports.useEffect(()=>{var o,x,g;if(N==="All Booking"){let h=0;for(let b=0;b<(v==null?void 0:v.length);b++){let A=parseFloat((o=v[b])==null?void 0:o.roomrentamount);!isNaN(A)&&((x=v[b])==null?void 0:x.cancelled)===!1&&(h+=A)}C(h||0)}else{let h=0;for(let b=0;b<(v==null?void 0:v.length);b++){let A=parseFloat((g=v[b])==null?void 0:g.roomrentamount);isNaN(A)||(h+=A)}C(h||0)}},[v==null?void 0:v.length,N]);const[Ie,k]=u.exports.useState(0);u.exports.useEffect(()=>{if(N==="All Booking"||N==="Approved Booking"){let o=v==null?void 0:v.filter(x=>x.cancelled===!1).length;k(o)}else{let o=v==null?void 0:v.length;k(o)}},[N,v]);const Y=[{name:U,title:"Total No of Check-In ",count:Ie,bg:"bg-[#E5F9FF] dark:bg-slate-900	"},{name:Mt,title:"Total Collection",count:ue?ue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":0,bg:"bg-[#FFEDE5] dark:bg-slate-900	"}];function Ut(o){if(o){const x=v.filter(g=>{te(!0);let h=!0;return o.buildingid&&g.buildingid!==o.buildingid&&(h=!1),o.communityid&&g.communityid!==o.communityid&&(h=!1),o.owner_email&&g.owner_email!==o.owner_email&&(h=!1),o.projectnameid&&g.projectnameid!==o.projectnameid&&(h=!1),o.unitnumber&&g.unitnumber!==o.unitnumber&&(h=!1),o.email&&g.email!==o.email&&(h=!1),o.bookingagent&&g.bookingagent!==o.bookingagent&&(h=!1),h});M(x),te(!1)}else M(V)}const Be=async()=>{te(!0),me({startDate:"",endDate:""}),ke({startDate:"",endDate:""}),O({startDate:"",endDate:""}),se(""),M(V),te(!1),d(!1)};return a(B,{children:w===!0?a(Bt,{}):y(dn,{children:[y("div",{className:"flex justify-between items-center mb-6",children:[a("h4",{className:"card-title",children:L}),(D==null?void 0:D.createbooking)===!0&&a(F,{to:H,className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:P})]}),a("div",{className:"grid grid-cols-12 gap-5 mb-5",children:y("div",{className:"2xl:col-span-12 lg:col-span-12 col-span-12",children:[a(dn,{bodyClass:"p-4",children:a("div",{className:"grid md:grid-cols-2 col-span-1 gap-4",children:a(Xl,{statistics:Y})})}),a("div",{className:"flex justify-end items-center mb-[15px] mt-[25px]",children:a("div",{className:"flex justify-end items-center ",children:y("div",{className:"flex -gap-x-[5px] items-center",children:[a("div",{className:"w-[300px]",children:a(X,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:je,value:je.filter(function(o){return o.value===$}),onChange:o=>{se(o==null?void 0:o.value)},styles:ei,id:"hh",placeholder:"Select Date filter option..."})}),$&&$==="SELECT RESERVATION DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(Rt,{value:He,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT RESERVATION DATE"})})}):null,$&&$==="SELECT CHECK-IN DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(Rt,{value:Re,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT CHECK-IN DATE"})})}):null,$&&$==="SELECT CHECK-OUT DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(Rt,{value:S,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT CHECK-OUT DATE"})})}):null]})})})]})}),(V==null?void 0:V.length)&&(v==null?void 0:v.length)?a(wl,{allBooking:v,handleDataUpdate:m,dataRole:D,forFilterData:Le,handleClearFilter:Be,typeOfBooking:E,selectedtypeOfBooking:N,setSelectedtypeOfBooking:Pt,filterLoader:Ce,handleFilterSearch:Ut,dataFilterActive:n,removeDateFilter:Ae}):a("div",{className:"flex justify-center items-center",children:a("img",{src:zl,alt:"NotFound",className:"h-[564px] object-contain"})})]})})},Ei=()=>{const[L,P]=u.exports.useState([]),[H,m]=u.exports.useState(!1);return u.exports.useEffect(()=>{m(!0),(async()=>{const v=await(await fetch("http://portals.rarehomesgroup.com/booking")).json();P(v),m(!1)})()},[]),a(B,{children:H===!1?a("div",{className:" space-y-5",children:a(ti,{pagelink:"/add-booking",linktitle:"Add new Booking",title:"All Booking",allData:L,handleDataUpdate:()=>{(async()=>{m(!0);const v=await(await fetch("http://portals.rarehomesgroup.com/booking")).json();P(v),m(!1)})()}})}):a(Bt,{})})};export{Ei as default};
