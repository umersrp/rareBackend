import{R as ll,j as t,F as _,cb as fl,r as h,b as m,C as vl,L as M,I as K,an as me,cc as tl,cd as Wn,H as Tn,cl as qn,cm as Xn}from"./index.50bb4499.js";import{T as nl}from"./Tooltip.abd3e534.js";import{r as be}from"./index.c0e2c666.js";import{G as Gn}from"./GlobalFilter.e6c59df2.js";import{G as zn}from"./group-chart-1.eed0d673.js";import{D as Ae}from"./DeleteParagraph.2d3a38f0.js";/* empty css                     */import"./react-apexcharts.min.17b67d2c.js";const Yn=ll.forwardRef(({indeterminate:A,...Y},w)=>{const v=ll.useRef(),R=w||v;return ll.useEffect(()=>{R.current.indeterminate=A},[R,A]),t(_,{children:t("input",{type:"checkbox",ref:R,...Y,className:"table-checkbox",indeterminate:A?"true":"false"})})}),he={option:(A,Y)=>({...A,fontSize:"14px"})},Vn=({showModal:A,handleClose:Y,loaderModal:w,linkedData:v,handleDeleteData:R,dataId:j,moduleName:o,booking:H,managementcontract:P,tenantcontract:O,rentpurchase:S,unitNumber:ee,dataRole:f})=>t("div",{className:"thumbnail-container",children:A&&t("div",{className:"modal-overlay-property",children:m("div",{className:"modal-new w-[850px]",children:[m("div",{className:"flex items-center justify-between mb-[20px] pb-[7px] modal-border-bottom",children:[t("h5",{className:" text-[18px] capitalize",children:`Are You Sure you Want to Delete this ${o}?`}),t("img",{src:Wn,alt:"cancelIcon",className:"w-[20px] cursor-pointer h-[20px]",onClick:Y})]}),w===!0?t(tl,{}):m(_,{children:[v!=null&&v.length?t("div",{className:"data-list-modal",children:m(_,{children:[m("h4",{className:"text-[16px] mb-[10px]",children:[t("span",{className:"font-bold",children:"Property"})," ",ee," is linked with the following modules:"]}),H!=null&&H.length?t("ul",{className:" mb-[10px] text-start",children:t("li",{className:"list-disc ml-[30px]",children:m("div",{className:"flex items-center",children:[t("span",{className:"font-semibold mr-[5px]",children:"Booking: "}),(f==null?void 0:f.deletebooking)===!0?t(_,{children:H==null?void 0:H.map((x,B)=>m(M,{className:" mr-[5px] hover:underline",to:`/view-booking/${x==null?void 0:x._id}?delete=true`,children:[x==null?void 0:x.bookingnumber,B!==H.length-1?",":null]},B+1))}):t(Ae,{moduleName:o,linkedName:"Booking"})]})})}):null,O!=null&&O.length?t("ul",{className:" mb-[10px] text-start",children:t("li",{className:"list-disc ml-[30px]",children:m("div",{className:"flex items-center",children:[t("span",{className:"font-semibold mr-[5px]",children:"Tenant Contract: "}),(f==null?void 0:f.deletetenant)===!0?t(_,{children:O==null?void 0:O.map((x,B)=>m(M,{className:" mr-[5px] hover:underline",to:`/view-tenantcontract/${x==null?void 0:x._id}?delete=true`,children:["TC-"+(x==null?void 0:x._id.slice(0,6)),B!==O.length-1?",":null]},B+1))}):t(Ae,{moduleName:o,linkedName:"Tenancy Contract"})]})})}):null,S!=null&&S.length?t("ul",{className:" mb-[10px] text-start",children:t("li",{className:"list-disc ml-[30px]",children:m("div",{className:"flex items-center",children:[t("span",{className:"font-semibold mr-[5px]",children:"Availability Sheet: "}),(f==null?void 0:f.deleteavailability)===!0?t(_,{children:S==null?void 0:S.map((x,B)=>m(M,{className:" mr-[5px] hover:underline",to:`/view-availability-sheet/${x==null?void 0:x._id}?delete=true`,children:["AS-"+(x==null?void 0:x._id.slice(0,6)),B!==S.length-1?",":null]},B+1))}):t(Ae,{moduleName:o,linkedName:"Availability Sheet"})]})})}):null,P!=null&&P.length?t("ul",{className:" mb-[10px] text-start",children:t("li",{className:"list-disc ml-[30px]",children:m("div",{className:"flex items-center",children:[t("span",{className:"font-semibold mr-[5px]",children:"Management Contract: "}),(f==null?void 0:f.deletemanagement)===!0?t(_,{children:P==null?void 0:P.map((x,B)=>m(M,{className:" mr-[5px] hover:underline",to:`/view-managementcontract/${x==null?void 0:x._id}?delete=true`,children:["MC-"+(x==null?void 0:x._id.slice(0,6)),B!==P.length-1?",":null]},B+1))}):t(Ae,{moduleName:o,linkedName:"Management Contract"})]})})}):null]})}):null,m("div",{className:"mb-[15px] max-h-[700px] pr-[15px]",children:[t(_,{}),t(_,{}),(v==null?void 0:v.length)||(S==null?void 0:S.length)||(O==null?void 0:O.length)||(P==null?void 0:P.length)||(H==null?void 0:H.length)?t("p",{className:" mt-[10px]",children:`This ${o} is already linked. Please first delete these entries which are linked it with`}):null,!(v!=null&&v.length)&&!(S!=null&&S.length)&&!(O!=null&&O.length)&&!(P!=null&&P.length)&&!(H!=null&&H.length)?t("button",{className:"btn btn inline-flex justify-center btn-danger ",onClick:()=>R(j),children:"Delete"}):null]})]})]})})}),Rn=({title:A,linktitle:Y,pagelink:w,allData:v,handleDataUpdate:R,managementData:j,forFilterData:o,handleFilterSearch:H,handleClearFilter:P,filterLoader:O})=>{const S=localStorage.getItem("isAuth"),ee=JSON.parse(S),{data:f}=fl(ee==null?void 0:ee.roleid),[x,B]=h.exports.useState(!1),[Q,G]=h.exports.useState(!1),[z,$e]=h.exports.useState(""),[gl,xl]=h.exports.useState(""),[yl,fe]=h.exports.useState(""),[Nl,ve]=h.exports.useState(""),[Cl,ge]=h.exports.useState(""),[kl,xe]=h.exports.useState(""),[_l,jl]=h.exports.useState(""),[L,J]=h.exports.useState(""),[a,C]=h.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",customerid:""}),[s,al]=h.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",customerid:""});console.log("groupUnits",s);const[W,Z]=h.exports.useState(""),[Sl,sl]=h.exports.useState(""),[T,F]=h.exports.useState(""),[Al,$l]=h.exports.useState(""),[q,te]=h.exports.useState(""),[Hl,Pl]=h.exports.useState(""),[X,le]=h.exports.useState(""),ae=e=>{const{name:l,value:n}=e.target;C(c=>({...c,[l]:n})),al(c=>({...c,[l]:n}))};h.exports.useEffect(()=>(s.unitnumber&&(Z(s.unitnumber),F(s.unitnumber),te(s.unitnumber),le(s.unitnumber)),s.customerid&&(J(s.customerid),Z(s.customerid),F(s.customerid),te(s.customerid)),s.communityid&&(J(s.communityid),F(s.communityid),te(s.communityid),le(s.communityid)),s.projectnameid&&(J(s.projectnameid),Z(s.projectnameid),te(s.projectnameid),le(s.projectnameid)),s.buildingid&&(J(s.buildingid),Z(s.buildingid),F(s.buildingid),le(s.buildingid)),()=>{Z(""),F(""),te(""),le(""),J("")}),[s]);const D=e=>{const{name:l,value:n}=e.target;s.unitnumber&&(Z(s.unitnumber),C({...a,[l]:n}),sl({...a,[l]:n})),s.customerid&&(J(s.customerid),C({...a,[l]:n}),Z(s.customerid)),s.communityid&&(J(s.communityid),C({...a,[l]:n})),s.projectnameid&&(J(s.projectnameid),C({...a,[l]:n})),s.buildingid&&(J(s.buildingid),C({...a,[l]:n}))},ye=e=>{const{name:l,value:n}=e.target;s.unitnumber&&C({...a,[l]:n}),s.customerid&&(C({...a,[l]:n}),F(s.customerid)),s.communityid&&(C({...a,[l]:n}),F(s.communityid)),s.buildingid&&C({...a,[l]:n})},Ne=e=>{const{name:l,value:n}=e.target;s.unitnumber&&C({...a,[l]:n}),s.customerid&&C({...a,[l]:n}),s.communityid&&C({...a,[l]:n}),s.projectnameid&&C({...a,[l]:n})},Ce=e=>{const{name:l,value:n}=e.target;s.unitnumber&&C({...a,[l]:n}),s.communityid&&C({...a,[l]:n}),s.projectnameid&&C({...a,[l]:n}),s.buildingid&&C({...a,[l]:n})};function k(e){var c,d;const l={},n=[];for(const u of e){const p=`${(c=u==null?void 0:u.label)==null?void 0:c.trim()}|${(d=u==null?void 0:u.value)==null?void 0:d.trim()}`;l[p]||(n.push(u),l[p]=!0)}return n}const[ke,Ol]=h.exports.useState(!1),Bl=async e=>{if(B(!0),G(!0),e)try{const l=`http://dev-rare.srp.ai/booking/api/allbooking/forproperty?propertyid=${e==null?void 0:e._id}`,n=`http://dev-rare.srp.ai/managementcontract/api/propertydelete?propertyid=${e==null?void 0:e._id}`,c=`http://dev-rare.srp.ai/tenantcontract/api/propertydelete?propertyid=${e==null?void 0:e._id}`,d=`http://dev-rare.srp.ai/rentpurchase/api/propertydelete?porpertyid=${e==null?void 0:e._id}`,u=await fetch(l);if(!u.ok&&u.status!==400)throw new Error(`API 1 failed with status: ${u.status}`);const p=u.status===400?[]:await u.json(),b=await fetch(n);if(!b.ok&&b.status!==400)throw new Error(`API 2 failed with status: ${b.status}`);const r=b.status===400?[]:await b.json(),g=await fetch(c);if(!g.ok&&g.status!==400)throw new Error(`API 2 failed with status: ${g.status}`);const N=g.status===400?[]:await g.json(),I=await fetch(d);if(!I.ok&&I.status!==400)throw new Error(`API 2 failed with status: ${I.status}`);const U=I.status===400?[]:await I.json(),V=[...p,...r,...N,...U];p!=null&&p.length?fe(p):fe(""),r!=null&&r.length?ve(r):ve(""),N!=null&&N.length?ge(N):ge(""),U!=null&&U.length?xe(U):xe(""),$e(V),xl(e==null?void 0:e._id),jl(e==null?void 0:e.unitnumber),G(!1)}catch(l){console.error("Error fetching data:",l),G(!1)}},Il=()=>{B(!1),fe(""),ve(""),ge(""),xe("")},Ul=async e=>{try{await Tn.patch("http://dev-rare.srp.ai/property/api/availability",{_id:e,softdelete:!0}),R(),fe(""),ve(""),ge(""),xe("")}catch(l){console.log(l,"error")}},El=[{Header:"Sr no",accessor:"id",Cell:({row:e,flatRows:l})=>t("span",{children:l.indexOf(e)+1})},{Header:"Listed for",accessor:"propertystatus",Cell:e=>{var n,c,d,u,p,b,r,g,N,I,U,V,se,ie,ce,ue,de,re,oe;let l;return((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((c=e==null?void 0:e.cell)==null?void 0:c.value)!=="Multiple"?l=(d=e==null?void 0:e.cell)==null?void 0:d.value:l="Not Available",t(_,{children:((r=(b=(p=(u=e==null?void 0:e.cell)==null?void 0:u.row)==null?void 0:p.original)==null?void 0:b.multivaluation)==null?void 0:r.length)&&((I=(N=(g=e==null?void 0:e.cell)==null?void 0:g.row)==null?void 0:N.original)==null?void 0:I.multi_propertyvaluation)&&((U=e==null?void 0:e.cell)==null?void 0:U.value)==="Multiple"?t(_,{children:(ce=(ie=(se=(V=e==null?void 0:e.cell)==null?void 0:V.row)==null?void 0:se.original)==null?void 0:ie.multivaluation)==null?void 0:ce.map(($,ne)=>t("span",{className:`block w-full ${ne!==0?"mt-[10px]":""} cursor-pointer`,children:t("span",{onClick:()=>{var pe,i,E,bl,hl;return handleMultiPropertyStatus($==null?void 0:$.propertystatus,(i=(pe=e==null?void 0:e.cell)==null?void 0:pe.row)==null?void 0:i.original,(hl=(bl=(E=e==null?void 0:e.cell)==null?void 0:E.row)==null?void 0:bl.original)==null?void 0:hl._id,ne,$==null?void 0:$.un_listed)},className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 
                                                        ${($==null?void 0:$.propertystatus)==="Not Available"&&($==null?void 0:$.un_listed)===!1?"text-danger-500 bg-danger-500":"text-success-500 bg-success-500"} `,children:"Listed for"+($==null?void 0:$.propertystatus)})},ne+1))}):t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((ue=e==null?void 0:e.cell)==null?void 0:ue.value)&&((oe=(re=(de=e==null?void 0:e.cell)==null?void 0:de.row)==null?void 0:re.original)==null?void 0:oe.unlisted)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:l!=="Not Available"?"Listed for "+l:l})})})}},{Header:"listed / unlisted",accessor:"un_listed",Cell:e=>{var l,n,c,d,u,p,b,r,g,N,I,U,V,se,ie,ce,ue,de,re,oe,$,ne,pe;return t(_,{children:((d=(c=(n=(l=e==null?void 0:e.cell)==null?void 0:l.row)==null?void 0:n.original)==null?void 0:c.multivaluation)==null?void 0:d.length)&&((b=(p=(u=e==null?void 0:e.cell)==null?void 0:u.row)==null?void 0:p.original)==null?void 0:b.propertystatus)==="Multiple"?t(_,{children:(I=(N=(g=(r=e==null?void 0:e.cell)==null?void 0:r.row)==null?void 0:g.original)==null?void 0:N.multivaluation)==null?void 0:I.map((i,E)=>t(_,{children:(i==null?void 0:i.propertystatus)==="Rent"?m(_,{children:[(i==null?void 0:i.contract_enddate)&&new Date(i==null?void 0:i.contract_enddate)>new Date&&(i==null?void 0:i.un_listed)===!1?t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"bg-info-500 text-info-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:"upcoming"})},E+1):null,(i==null?void 0:i.contract_enddate)&&new Date(i==null?void 0:i.contract_enddate)<=new Date&&(i==null?void 0:i.un_listed)===!1?t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:"listed"})},E+1):null,((i==null?void 0:i.contract_enddate)===""||!(i!=null&&i.contract_enddate))&&(i==null?void 0:i.un_listed)===!1?t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:"listed"})},E+1):null,(new Date(i==null?void 0:i.contract_enddate)<=new Date||new Date(i==null?void 0:i.contract_enddate)>new Date||(i==null?void 0:i.contract_enddate)===""||!(i!=null&&i.contract_enddate))&&(i==null?void 0:i.un_listed)===!0?t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:"unlisted"})},E+1):null]}):t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:(i==null?void 0:i.un_listed)===!0?"unlisted":"listed"})},E+1)}))}):m("span",{className:"block w-full",children:[console.log((U=e==null?void 0:e.cell)==null?void 0:U.value,"#####111",(ie=(se=(V=e==null?void 0:e.cell)==null?void 0:V.row)==null?void 0:se.original)==null?void 0:ie.propertystatus),(de=(ue=(ce=e==null?void 0:e.cell)==null?void 0:ce.row)==null?void 0:ue.original)!=null&&de.propertystatus?t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((re=e==null?void 0:e.cell)==null?void 0:re.value)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                         ${(($=(oe=e==null?void 0:e.cell)==null?void 0:oe.row)==null?void 0:$.original.unlisted)===!0?"text-danger-500 bg-danger-500":"text-success-500 bg-success-500"}`,children:((pe=(ne=e==null?void 0:e.cell)==null?void 0:ne.row)==null?void 0:pe.original.unlisted)===!0?"Unlisted":"listed"}):t("span",{className:"inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 text-danger-500 bg-danger-500",children:"No"})]})})}},{Header:"Unit Number",accessor:"unitnumber",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"Owner Name",accessor:"owner_name",Cell:e=>{var l,n;return t("div",{children:t("span",{className:"inline-flex items-center",children:t("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})})})}},{Header:"Owner Representative",accessor:"owner_representative_name",Cell:e=>{var l,n;return t("div",{children:t("span",{className:"inline-flex items-center",children:t("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})})})}},{Header:"Project Name",accessor:"project_name",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"building name",accessor:"building_name",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"community name",accessor:"community_name",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"sub type name",accessor:"subtype_name",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"usage",accessor:"usage",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"plot size",accessor:"plotsize",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"build up area",accessor:"builduparea",Cell:e=>{var l,n,c,d,u,p,b,r,g;return t("span",{className:"normal-case",children:(l=e==null?void 0:e.cell)!=null&&l.value?((n=e==null?void 0:e.cell)==null?void 0:n.value)+" "+(((c=e==null?void 0:e.cell)==null?void 0:c.value)&&((p=(u=(d=e==null?void 0:e.cell)==null?void 0:d.row)==null?void 0:u.original)==null?void 0:p.measure_units)?(g=(r=(b=e==null?void 0:e.cell)==null?void 0:b.row)==null?void 0:r.original)==null?void 0:g.measure_units:""):"Not Available"})}},{Header:"owner association",accessor:"ownerassociation",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"no bathroom",accessor:"nobathroom",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"half bathroom",accessor:"halfbathroom",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"furnished",accessor:"furnished",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"kitchen",accessor:"kitchen",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"no parking",accessor:"noparking",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"balcony",accessor:"balcony",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"dewa premises",accessor:"dewapremises",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"district",accessor:"district",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"parking bay",accessor:"parkingbay",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"property view",accessor:"propertyview",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"purchase date",accessor:"purchasedate",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"})}},{Header:"Total no of OWNER NAME DEED",accessor:"no_ownernamedeed",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"purchase value",accessor:"purchasevaue",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?parseFloat((n=e==null?void 0:e.cell)==null?void 0:n.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"Not Available"})}},{Header:"Title Deed Document",accessor:"titledeeddocument",Cell:e=>{var l,n,c,d,u,p,b,r,g,N,I,U,V;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==""&&((c=e==null?void 0:e.cell)==null?void 0:c.value)!==void 0&&((d=e==null?void 0:e.cell)==null?void 0:d.value)!==null&&((u=e==null?void 0:e.cell)==null?void 0:u.value)!=="undefined"&&((p=e==null?void 0:e.cell)==null?void 0:p.value)!=="null"?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((b=e==null?void 0:e.cell)==null?void 0:b.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)!==""&&((g=e==null?void 0:e.cell)==null?void 0:g.value)!==void 0&&((N=e==null?void 0:e.cell)==null?void 0:N.value)!==null&&((I=e==null?void 0:e.cell)==null?void 0:I.value)!=="undefined"&&((U=e==null?void 0:e.cell)==null?void 0:U.value)!=="null"?t("a",{className:"flex gap-x-[5px] items-center",href:(V=e==null?void 0:e.cell)==null?void 0:V.value,target:"_blank",children:"veiw documents"}):"Not Available"})})}},{Header:"Youtube Video",accessor:"youtubelink",Cell:e=>{var l,n,c,d,u;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((c=e==null?void 0:e.cell)==null?void 0:c.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)!==""?m("a",{className:"flex gap-x-[5px] items-center",href:(u=e==null?void 0:e.cell)==null?void 0:u.value,target:"_blank",children:[t(K,{icon:"heroicons-outline:eye"}),"View Video"]}):"Not Available"})})}},{Header:"Google location",accessor:"propertylocation",Cell:e=>{var l,n,c,d,u;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((c=e==null?void 0:e.cell)==null?void 0:c.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)!==""?m("a",{className:"flex gap-x-[5px] items-center",href:(u=e==null?void 0:e.cell)==null?void 0:u.value,target:"_blank",children:[t(K,{icon:"heroicons-outline:eye"}),"View Location"]}):"Not Available"})})}},{Header:"total bathroom",accessor:"totalbathroom",Cell:e=>{var l,n,c,d,u,p,b;return t(_,{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==void 0&&((c=e==null?void 0:e.cell)==null?void 0:c.value)!=="undefined"?t("span",{children:((d=e==null?void 0:e.cell)==null?void 0:d.value)&&((u=e==null?void 0:e.cell)==null?void 0:u.value)!==void 0&&((p=e==null?void 0:e.cell)==null?void 0:p.value)!=="undefined"?(b=e==null?void 0:e.cell)==null?void 0:b.value:"Not Available"}):t("span",{className:"block w-full",children:t("span",{className:" inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 text-danger-500 bg-danger-500 ",children:"Missing"})})})}},{Header:"total bedroom",accessor:"totalbedroom",Cell:e=>{var l,n,c,d,u,p,b;return t(_,{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==void 0&&((c=e==null?void 0:e.cell)==null?void 0:c.value)!=="undefined"?t("span",{children:((d=e==null?void 0:e.cell)==null?void 0:d.value)&&((u=e==null?void 0:e.cell)==null?void 0:u.value)!==void 0&&((p=e==null?void 0:e.cell)==null?void 0:p.value)!=="undefined"?(b=e==null?void 0:e.cell)==null?void 0:b.value:"Not Available"}):t("span",{className:"block w-full",children:t("span",{className:" inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 text-danger-500 bg-danger-500 ",children:"Missing"})})})}},{Header:"street number",accessor:"streetnumber",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"maid room",accessor:"maidroom",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"store room",accessor:"storeroom",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"bed room en suite",accessor:"bedroomensuite",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"bath room en suite",accessor:"bathroomensuite",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"driver room",accessor:"driverroom",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"other room",accessor:"otherroom",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"en suite",accessor:"ensuite",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"property images",accessor:"propertyimages",Cell:e=>{var l,n,c,d,u,p,b,r,g,N;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:n.length)===0||((c=e==null?void 0:e.cell)==null?void 0:c.value[0])===""?"text-danger-500 bg-danger-500":((u=(d=e==null?void 0:e.cell)==null?void 0:d.value)==null?void 0:u.length)>0&&((b=(p=e==null?void 0:e.cell)==null?void 0:p.value)==null?void 0:b.length)<10?"badge bg-info-500 text-info-500 bg-opacity-[0.12] pill":"text-success-500 bg-success-500"} `,children:((r=e==null?void 0:e.cell)==null?void 0:r.value[0])===""?"0":(N=(g=e==null?void 0:e.cell)==null?void 0:g.value)==null?void 0:N.length})})}},{Header:"floor plan images",accessor:"floorplan",Cell:e=>{var l,n,c,d,u,p,b,r,g,N;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:n.length)===0||((c=e==null?void 0:e.cell)==null?void 0:c.value[0])===""?"text-danger-500 bg-danger-500":((u=(d=e==null?void 0:e.cell)==null?void 0:d.value)==null?void 0:u.length)>0&&((b=(p=e==null?void 0:e.cell)==null?void 0:p.value)==null?void 0:b.length)<10?"badge bg-info-500 text-info-500 bg-opacity-[0.12] pill":"text-success-500 bg-success-500"} `,children:((r=e==null?void 0:e.cell)==null?void 0:r.value[0])===""?"0":(N=(g=e==null?void 0:e.cell)==null?void 0:g.value)==null?void 0:N.length})})}},{Header:"unit plan attachment",accessor:"unitplanattachment",Cell:e=>{var l,n,c,d,u,p,b,r,g,N;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:n.length)===0||((c=e==null?void 0:e.cell)==null?void 0:c.value[0])===""?"text-danger-500 bg-danger-500":((u=(d=e==null?void 0:e.cell)==null?void 0:d.value)==null?void 0:u.length)>0&&((b=(p=e==null?void 0:e.cell)==null?void 0:p.value)==null?void 0:b.length)<10?"badge bg-info-500 text-info-500 bg-opacity-[0.12] pill":"text-success-500 bg-success-500"} `,children:((r=e==null?void 0:e.cell)==null?void 0:r.value[0])===""?"0":(N=(g=e==null?void 0:e.cell)==null?void 0:g.value)==null?void 0:N.length})})}},{Header:"plot plan attachment",accessor:"plotplanattachment",Cell:e=>{var l,n,c,d,u,p,b,r,g,N;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:n.length)===0||((c=e==null?void 0:e.cell)==null?void 0:c.value[0])===""?"text-danger-500 bg-danger-500":((u=(d=e==null?void 0:e.cell)==null?void 0:d.value)==null?void 0:u.length)>0&&((b=(p=e==null?void 0:e.cell)==null?void 0:p.value)==null?void 0:b.length)<10?"badge bg-info-500 text-info-500 bg-opacity-[0.12] pill":"text-success-500 bg-success-500"} `,children:((r=e==null?void 0:e.cell)==null?void 0:r.value[0])===""?"0":(N=(g=e==null?void 0:e.cell)==null?void 0:g.value)==null?void 0:N.length})})}},{Header:"created-by",accessor:"employee_email_createdBy",Cell:e=>{var l,n;return t("span",{className:"normal-case",children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"created-on",accessor:"createdAt",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"})}},{Header:"updated-by",accessor:"employee_email_updatedBy",Cell:e=>{var l,n;return t("span",{className:"normal-case",children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"updated-on",accessor:"updatedAt",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"})}},{Header:"action",accessor:e=>`${e._id}`,Cell:e=>{const l=localStorage.getItem("isAuth"),n=JSON.parse(l),{data:c}=fl(n==null?void 0:n.roleid);if(!c)return null;const d=(c==null?void 0:c.readpropert)===!0,u=(c==null?void 0:c.updatepropert)===!0,p=(c==null?void 0:c.deletepropert)===!0;return m("div",{className:"flex space-x-3 rtl:space-x-reverse",children:[d&&t(nl,{content:"View",placement:"top",arrow:!0,animation:"shift-away",children:t(M,{className:"action-btn",to:`/view-property/${e==null?void 0:e.cell.value}`,type:"button",children:t(K,{icon:"heroicons:eye"})})}),u&&t(nl,{content:"Edit",placement:"top",arrow:!0,animation:"shift-away",children:t(M,{to:`/update-property/${e==null?void 0:e.cell.value}`,className:"action-btn",type:"button",children:t(K,{icon:"heroicons:pencil-square"})})}),p&&t(nl,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:t("button",{className:"action-btn",type:"button",onClick:()=>{var b,r;return Bl((r=(b=e==null?void 0:e.cell)==null?void 0:b.row)==null?void 0:r.original)},children:t(K,{icon:"heroicons:trash"})})})]})}}],Ml=h.exports.useMemo(()=>El,[]),Ll=h.exports.useMemo(()=>v),[y,il]=h.exports.useState(""),[cl,He]=h.exports.useState(!1),[Qn,ul]=h.exports.useState(!1),[dl,rl]=h.exports.useState(!1),[ol,Wl]=h.exports.useState();h.exports.useEffect(()=>{var l,n;let e=0;for(let c=0;c<(v==null?void 0:v.length);c++){let d=parseFloat((l=v[c])!=null&&l.purchasevaue?(n=v[c])==null?void 0:n.purchasevaue:0);e+=d}Wl(e)},[v==null?void 0:v.length]);const Tl={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#00EBFF"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},ql={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#FB8F65"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},Xl={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#5743BE"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},Gl=[{name:Tl,title:"Managed Properties",count:j!=null&&j.length?j==null?void 0:j.length:0,bg:"bg-[#E5F9FF] dark:bg-slate-900	"},{name:ql,title:"Non-Managed Properties",count:(j==null?void 0:j.length)&&(v==null?void 0:v.length)?Math.abs((j==null?void 0:j.length)-(v==null?void 0:v.length)):0,bg:"bg-[#FFEDE5] dark:bg-slate-900	"},{name:Xl,title:"Total Properties Purchase Valuation",count:ol?ol.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":0,bg:"bg-[#EAE5FF] dark:bg-slate-900	"}];h.exports.useEffect(()=>{He(!1),il(""),ul(!1)},[v]);const zl=be.exports.useTable({columns:Ml,data:Ll,initialState:{pageIndex:0,pageSize:50}},be.exports.useGlobalFilter,be.exports.useSortBy,be.exports.usePagination,be.exports.useRowSelect,e=>{e.visibleColumns.push(l=>[{id:"selection",Header:({getToggleAllRowsSelectedProps:n})=>t("div",{children:t(Yn,{...n()})}),Cell:({row:n})=>{var b;const[c,d]=h.exports.useState(""),u=r=>{r!=null&&r._id?He(!0):He(!1),d(g=>g===r?"":r),il(g=>g===r?"":r),(r==null?void 0:r.available_id)&&(r==null?void 0:r.available_id)!=="000000000000000000000000"?rl(!0):rl(!1)},p=((b=n==null?void 0:n.original)==null?void 0:b._id)===(c==null?void 0:c._id);return h.exports.useEffect(()=>{ul(p)},[p]),t("div",{children:t("input",{type:"checkbox",...n.getToggleRowSelectedProps(),checked:p,onChange:()=>u(n.original),className:"table-checkbox"})})}},...l])}),{getTableProps:Yl,getTableBodyProps:Vl,headerGroups:Rl,footerGroups:Jn,page:Ql,nextPage:Jl,previousPage:Kl,canNextPage:_e,canPreviousPage:je,pageOptions:pl,state:Zl,gotoPage:Pe,pageCount:Fl,setPageSize:Dl,setGlobalFilter:wl,prepareRow:en}=zl,{globalFilter:ln,pageIndex:ml,pageSize:nn}=Zl,Oe=[...new Set(o.map(e=>e.unitnumber))].sort((e,l)=>e.localeCompare(l,void 0,{sensitivity:"base"})).map(e=>({label:e,value:e})),tn=o.filter(e=>e.community_name!==void 0),an=[...new Set(tn.map(e=>e.communityid))],sn=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),cn=o.filter(e=>e.communityid===Sl.communityid).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),un=o.filter(e=>e.projectnameid===Al.projectnameid).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),dn=o.filter(e=>e.buildingid===Hl.buildingid).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}});k(sn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),k(cn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),k(un).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),k(dn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label));const rn=o.filter(e=>e.projectnameid===s.projectnameid).map(e=>{const{unitnumber:l}=e;if(l!="")return{label:l,value:l}}),Be=k(rn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),on=o.filter(e=>e.projectnameid===s.projectnameid).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),Ie=k(on).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),pn=o.filter(e=>e.projectnameid===s.projectnameid).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),Ue=k(pn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),mn=o.filter(e=>e.projectnameid===s.projectnameid).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Ee=k(mn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),bn=o.filter(e=>e.buildingid===s.buildingid).map(e=>{const{unitnumber:l}=e;if(l!="")return{label:l,value:l}}),Se=k(bn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),hn=o.filter(e=>e.buildingid===s.buildingid).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),Me=k(hn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),fn=o.filter(e=>e.buildingid===s.buildingid).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Le=k(fn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),vn=o.filter(e=>e.buildingid===s.buildingid).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),We=k(vn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),gn=o.filter(e=>e.communityid===s.communityid).map(e=>{const{unitnumber:l}=e;if(l!="")return{label:l,value:l}}),xn=o.filter(e=>e.communityid===s.communityid).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),yn=o.filter(e=>e.communityid===s.communityid).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),Nn=o.filter(e=>e.communityid===s.communityid).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Te=k(gn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),qe=k(xn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Xe=k(yn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Ge=k(Nn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Cn=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),kn=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),_n=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),jn=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Sn=k(Cn),An=k(kn),$n=k(_n),Hn=k(jn),ze=Sn.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Ye=An.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Ve=$n.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Re=Hn.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Pn=o.filter(e=>e.customerid===s.customerid).map(e=>{const{unitnumber:l}=e;if(l!="")return{label:l,value:l}}),On=o.filter(e=>e.customerid===s.customerid).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),Bn=o.filter(e=>e.customerid===s.customerid).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),In=o.filter(e=>e.customerid===s.customerid).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),Qe=k(Pn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Je=k(On).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Ke=k(Bn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Ze=k(In).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Fe=[...an.map(e=>{const l=o.find(n=>n.communityid===e);return l?{label:l.community_name,value:l.communityid}:null}).filter(Boolean)].sort((e,l)=>e.label.localeCompare(l.label)),Un=o.filter(e=>e.project_name!==void 0),De=[...[...new Set(Un.map(e=>e.projectnameid))].map(e=>{const l=o.find(n=>n.projectnameid===e);return l?{label:l.project_name,value:l.projectnameid}:null}).filter(Boolean)].sort((e,l)=>e.label.localeCompare(l.label)),En=o.filter(e=>e.building_name!==void 0),we=[...[...new Set(En.map(e=>e.buildingid))].map(e=>{const l=o.find(n=>n.buildingid===e);return l?{label:l.building_name,value:l.buildingid}:null}).filter(Boolean)].sort((e,l)=>e.label.localeCompare(l.label)),Mn=o.filter(e=>e.owner_name!==void 0),el=[...[...new Set(Mn.map(e=>e.customerid))].map(e=>{const l=o.find(n=>n.customerid===e);return l?{label:l.owner_name,value:l.customerid}:null}).filter(Boolean)].sort((e,l)=>e.label.localeCompare(l.label)),Ln=()=>{P(),Z(""),al(""),sl(""),F(""),$l(""),C(""),le(""),Pl("")};return t(_,{children:m(vl,{children:[m("div",{className:"flex justify-between items-center mb-6",children:[t("h4",{className:"card-title",children:A}),(f==null?void 0:f.createpropert)===!0?t(M,{to:w,className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:Y}):null]}),t("div",{className:"grid grid-cols-12 gap-5 mb-5",children:t("div",{className:"2xl:col-span-12 lg:col-span-12 col-span-12",children:t(vl,{bodyClass:"p-4",children:t("div",{className:"grid md:grid-cols-3 col-span-1 gap-4",children:t(zn,{statistics:Gl})})})})}),m("div",{className:"md:flex justify-end items-center mb-6 gap-x-[25px] gap-y-[15px]",children:[(f==null?void 0:f.createavailability)===!0&&(f==null?void 0:f.updateavailability)===!0?m(_,{children:[y&&((y==null?void 0:y.unlisted)!==!0||(y==null?void 0:y.unlisted)===!1)&&cl===!0&&dl===!1?m(_,{children:[t(M,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Rent`,children:"For Rent"}),t(M,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Sale`,children:"For Sale"}),t(M,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Short Term`,children:"Short Term"})]}):null,y&&(y==null?void 0:y.unlisted)===!0&&cl===!0&&dl===!0?m(_,{children:[t(M,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Rent`,children:"For Rent"}),t(M,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Sale`,children:"For Sale"}),t(M,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Short Term`,children:"Short Term"})]}):null]}):null,m("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer md:mb-0 mb-4",onClick:()=>Ol(!ke),children:[ke===!0?t(K,{icon:"heroicons:minus-small",className:"w-[20px] h-[20px]"}):t(K,{icon:"heroicons:plus-small",className:"w-[20px] h-[20px]"}),t("p",{className:"text-[16px] leading regular color-black",children:"Advance filter"})]}),t(Gn,{filter:ln,setFilter:wl})]}),m("div",{className:`xl:grid-cols-5 grid gap-5 grid-cols-1 ${ke===!0?"filter-show mt-6 pointer-events-auto":"filter-remove pointer-events-none -mt-4"}`,children:[m("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Unit No."}),console.log("sortedunitsbybuilding",Se),t(me,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:L?s.communityid&&L?Te:s.projectnameid&&L?Be:s.buildingid&&L?Se:Qe:Oe,value:L?s.communityid&&L?Te&&Te.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}):s.projectnameid&&L?Be&&Be.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}):s.buildingid&&L?Se&&Se.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}):Qe&&Qe.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}):Oe&&Oe.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}),onChange:e=>{L?s.communityid&&L?D({target:{name:"unitnumber",value:e.value}}):s.projectnameid&&L?D({target:{name:"unitnumber",value:e.value}}):s.buildingid&&L?D({target:{name:"unitnumber",value:e.value}}):D({target:{name:"unitnumber",value:e.value}}):ae({target:{name:"unitnumber",value:e.value}})},styles:he,id:"hh",placeholder:"Select..."}),a!=null&&a.unitnumber?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,unitnumber:""}),children:"Clear filter"}):null]}),m("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Community Name"}),t(me,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:W?s.customerid&&W?Je:s.projectnameid&&W?Ie:s.buildingid&&W?Me:ze:Fe,value:W?s.customerid&&W?Je&&Je.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}):s.projectnameid&&W?Ie&&Ie.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}):s.buildingid&&W?Me&&Me.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}):ze&&ze.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}):Fe&&Fe.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}),onChange:e=>{W?D({target:{name:"communityid",value:e.value}}):s.customerid&&W?D({target:{name:"communityid",value:e.value}}):s.projectnameid&&W?D({target:{name:"communityid",value:e.value}}):s.buildingid&&W?D({target:{name:"communityid",value:e.value}}):ae({target:{name:"communityid",value:e.value}})},styles:he,id:"hh",placeholder:"Select..."}),a!=null&&a.communityid?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,communityid:""}),children:"Clear filter"}):null]}),m("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Project Name"}),t(me,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:T?s.customerid&&T?Ke:s.communityid&&T?qe:s.buildingid&&T?Le:Ye:De,value:T?s.customerid&&T?Ke&&Ke.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}):s.communityid&&T?qe&&qe.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}):s.buildingid&&T?Le&&Le.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}):Ye&&Ye.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}):De&&De.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}),onChange:e=>{T?s.customerid&&T?ye({target:{name:"projectnameid",value:e.value}}):s.communityid&&T?ye({target:{name:"projectnameid",value:e.value}}):s.buildingid&&T?ye({target:{name:"projectnameid",value:e.value}}):ye({target:{name:"projectnameid",value:e.value}}):ae({target:{name:"projectnameid",value:e.value}})},styles:he,id:"hh",placeholder:"Select..."}),a!=null&&a.projectnameid?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,projectnameid:""}),children:"Clear filter"}):null]}),m("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Building Name"}),t(me,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:q?s.customerid&&q?Ze:s.communityid&&q?Xe:s.projectnameid&&q?Ue:Ve:we,value:q?s.customerid&&q?Ze&&Ze.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}):s.communityid&&q?Xe&&Xe.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}):s.projectnameid&&q?Ue&&Ue.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}):Ve&&Ve.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}):we&&we.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}),onChange:e=>{q?s.customerid&&q?Ne({target:{name:"buildingid",value:e.value}}):s.communityid&&q?Ne({target:{name:"buildingid",value:e.value}}):s.projectnameid&&q?Ne({target:{name:"buildingid",value:e.value}}):Ne({target:{name:"buildingid",value:e.value}}):ae({target:{name:"buildingid",value:e.value}})},styles:he,id:"hh",placeholder:"Select..."}),a!=null&&a.buildingid?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,buildingid:""}),children:"Clear filter"}):null]}),m("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Owner Name"}),t(me,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:X?s.communityid&&X?Ge:s.projectnameid&&X?Ee:s.buildingid&&X?We:Re:el,value:X?s.communityid&&X?Ge&&Ge.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}):s.projectnameid&&X?Ee&&Ee.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}):s.buildingid&&X?We&&We.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}):Re&&Re.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}):el&&el.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}),onChange:e=>{X?s.communityid&&X?Ce({target:{name:"customerid",value:e.value}}):s.projectnameid&&X?Ce({target:{name:"customerid",value:e.value}}):s.buildingid&&X?Ce({target:{name:"customerid",value:e.value}}):Ce({target:{name:"customerid",value:e.value}}):ae({target:{name:"customerid",value:e.value}})},styles:he,id:"hh",placeholder:"Select..."}),a!=null&&a.customerid?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,customerid:""}),children:"Clear filter"}):null]})]}),m("div",{className:`flex ${ke===!0?"filter-show mt-6 pointer-events-auto":"filter-remove pointer-events-none mt-0"} justify-end gap-x-[10px]`,children:[t("button",{className:"btn btn-secondary  text-center",type:"button",onClick:Ln,children:"Clear filter"}),t("button",{className:"btn btn-dark  text-center",type:"button",onClick:()=>H(a),children:"Search"})]}),t(Vn,{showModal:x,handleClose:Il,unitNumber:_l,loaderModal:Q,linkedData:z,handleDeleteData:Ul,dataId:gl,moduleName:"Property",booking:yl,managementcontract:Nl,tenantcontract:Cl,rentpurchase:kl,dataRole:f}),t("div",{className:"overflow-x-auto -mx-6 mt-6",children:t("div",{className:"inline-block min-w-full align-middle",children:t("div",{className:"",children:m("table",{className:"min-w-[140%] overflow-x-scroll divide-y divide-slate-100 table-fixed dark:divide-slate-700",...Yl,children:[t("thead",{className:"bg-slate-200 dark:bg-slate-700",children:Rl.map(e=>t("tr",{...e.getHeaderGroupProps(),children:e.headers.map(l=>l.Header==="action"&&!((f==null?void 0:f.readpropert)===!0||(f==null?void 0:f.updatepropert)===!0||(f==null?void 0:f.deletepropert)===!0)?t("th",{}):m("th",{...l.getHeaderProps(l.getSortByToggleProps()),scope:"col",className:"table-th",children:[l.render("Header"),t("span",{children:l.isSorted?l.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),O===!0?t("div",{className:"pl-[10px]",children:t(tl,{})}):t("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...Vl,children:Ql.map(e=>(en(e),t("tr",{...e.getRowProps(),children:e.cells.map(l=>t("td",{...l.getCellProps(),className:"table-td",children:l.render("Cell")}))})))})]})})})}),m("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[m("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[t("select",{className:"form-control py-2 w-max",value:nn,onChange:e=>Dl(Number(e.target.value)),children:[50,100,200].map(e=>m("option",{value:e,children:["Show ",e]},e))}),m("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",m("span",{children:[ml+1," of ",pl.length]})]})]}),m("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[t("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:t("button",{className:` ${je?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Pe(0),disabled:!je,children:t(K,{icon:"heroicons:chevron-double-left-solid"})})}),t("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:t("button",{className:` ${je?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Kl(),disabled:!je,children:"Prev"})}),pl.map((e,l)=>t("li",{children:t("button",{href:"#","aria-current":"page",className:` ${l===ml?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>Pe(l),children:e+1})},l)),t("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:t("button",{className:` ${_e?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Jl(),disabled:!_e,children:"Next"})}),t("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:t("button",{onClick:()=>Pe(Fl-1),disabled:!_e,className:` ${_e?"":"opacity-50 cursor-not-allowed"}`,children:t(K,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})})},ht=()=>{const{data:A,isSuccess:Y}=qn(),[w,v]=h.exports.useState(!1),[R,j]=h.exports.useState(""),[o,H]=h.exports.useState(""),{data:P}=Xn(),[O,S]=h.exports.useState(!1);h.exports.useEffect(()=>{v(!0),Y&&A&&(j(A),H(A),v(!1))},[Y,A]);const ee=async()=>{v(!0);const G=await(await fetch("http://dev-rare.srp.ai/property/api/connectdb")).json();j(G),v(!1)};function f(Q){let G="http://dev-rare.srp.ai/property/api/advancesearch?";for(const z in Q)Q[z]&&(G+=`${z}=${Q[z]}&`);return G.slice(0,-1)}const x=async Q=>{if(Q){S(!0);try{const G=f(Q),z=await fetch(G);if(!z.ok&&z.status!==400)throw new Error(`API 1 failed with status: ${z.status}`);const $e=z.status===400?[]:await z.json();j($e),S(!1)}catch{j(A),S(!1)}}else j(A)},B=()=>{j(A)};return m(_,{children:[t(_,{}),w===!1&&Y&&A&&(o==null?void 0:o.length)?t("div",{className:" space-y-5",children:t(Rn,{pagelink:"/add-property",linktitle:"Add new Property",title:"All Property",allData:R,filterLoader:O,handleDataUpdate:ee,handleFilterSearch:x,handleClearFilter:B,forFilterData:o,managementData:P})}):t(tl,{})]})};export{ht as default};
