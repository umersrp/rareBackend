import{r as c,j as l,F as x,I as K,C as B,aj as w}from"./index.50116af3.js";import{D as ee}from"./index.esm.555622e7.js";import{r as p}from"./index.41f5701e.js";var a="D:\\Ahsan\\Rare\\Dev\\Rare_Frontend\\src\\pages\\booking-management\\booking-report\\ReportTable.jsx";const le=({allBooking:i,propertyData:m})=>{const u=[{Header:"Sr no",accessor:"id",Cell:({row:e,flatRows:t})=>l("span",{children:t.indexOf(e)+1},void 0,!1,{fileName:a,lineNumber:19,columnNumber:24},void 0)},{Header:"Guest Name",accessor:"guestname",Cell:e=>{var t,n;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(t=e==null?void 0:e.cell)!=null&&t.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"},void 0,!1,{fileName:a,lineNumber:29,columnNumber:29},void 0)},void 0,!1,{fileName:a,lineNumber:28,columnNumber:25},void 0)},void 0,!1,{fileName:a,lineNumber:27,columnNumber:21},void 0)}},{Header:"Booking Date",accessor:"reservation_date",Cell:e=>{var t,n;return l("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"},void 0,!1,{fileName:a,lineNumber:42,columnNumber:24},void 0)}},{Header:"Confirmation Code",accessor:"confirmationcode",Cell:e=>{var t,n;return l("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"},void 0,!1,{fileName:a,lineNumber:49,columnNumber:24},void 0)}},{Header:"Check in Date",accessor:"checkindate",Cell:e=>{var t,n;return l("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"},void 0,!1,{fileName:a,lineNumber:56,columnNumber:24},void 0)}},{Header:"Check out Date",accessor:"checkoutdate",Cell:e=>{var t,n;return l("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"},void 0,!1,{fileName:a,lineNumber:63,columnNumber:24},void 0)}},{Header:"NO OF NIGHTS STAYED",accessor:"nonight",Cell:e=>{var t,n;return l("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"0.00"},void 0,!1,{fileName:a,lineNumber:70,columnNumber:24},void 0)}},{Header:"RATE PER DAY",accessor:"tourismfee",Cell:e=>{var O,L,$,G,z,y,I,M,U,V,q,Y;let t=($=(L=(O=e==null?void 0:e.cell)==null?void 0:O.row)==null?void 0:L.original)!=null&&$.nonight?parseFloat((y=(z=(G=e==null?void 0:e.cell)==null?void 0:G.row)==null?void 0:z.original)==null?void 0:y.nonight):0,f=((U=(M=(I=e==null?void 0:e.cell)==null?void 0:I.row)==null?void 0:M.original)!=null&&U.roomrenthostpayable?parseFloat((Y=(q=(V=e==null?void 0:e.cell)==null?void 0:V.row)==null?void 0:q.original)==null?void 0:Y.roomrenthostpayable):0)/t;return l("span",{children:f?parseFloat(f).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"},void 0,!1,{fileName:a,lineNumber:82,columnNumber:21},void 0)}},{Header:"BOOKING AMOUNT",accessor:"roomrenthostpayable",Cell:e=>{var t,n;return l("span",{children:(t=e==null?void 0:e.cell)!=null&&t.value?parseFloat((n=e==null?void 0:e.cell)==null?void 0:n.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"},void 0,!1,{fileName:a,lineNumber:91,columnNumber:21},void 0)}}],S=c.exports.useMemo(()=>u,[]),N=c.exports.useMemo(()=>i),C=p.exports.useTable({columns:S,data:N,initialState:{pageIndex:0,pageSize:50}},p.exports.useGlobalFilter,p.exports.useSortBy,p.exports.usePagination,p.exports.useRowSelect),{getTableProps:g,getTableBodyProps:A,headerGroups:F,footerGroups:R,page:P,nextPage:H,previousPage:j,canNextPage:s,canPreviousPage:r,pageOptions:d,state:E,gotoPage:h,pageCount:J,setPageSize:Q,setGlobalFilter:ae,prepareRow:W}=C,{globalFilter:te,pageIndex:_,pageSize:X}=E,[v,Z]=c.exports.useState(0),[b,k]=c.exports.useState(0),[T,D]=c.exports.useState(0);return c.exports.useEffect(()=>{var e;if(i!=null&&i.length){let t=0;for(let n=0;n<(i==null?void 0:i.length);n++){let f=parseFloat((e=i[n])==null?void 0:e.nonight);t+=f}Z(t||0)}},[i==null?void 0:i.length]),c.exports.useEffect(()=>{var e;if(i!=null&&i.length){let t=0;for(let n=0;n<(i==null?void 0:i.length);n++){let f=parseFloat((e=i[n])==null?void 0:e.roomrenthostpayable);t+=f}k(t||0)}},[i==null?void 0:i.length]),c.exports.useEffect(()=>{if(v&&b){let e=b/v;D(e)}},[v,b]),l(x,{children:[l("div",{className:"mt-[25px]",children:[l("div",{className:"flex gap-x-[10px]",children:[l("p",{className:"font-semibold",children:"Landlord Name: "},void 0,!1,{fileName:a,lineNumber:169,columnNumber:21},void 0),l("p",{className:"capitalize",children:m!=null&&m.owner_name?m==null?void 0:m.owner_name:"Not Avaiable"},void 0,!1,{fileName:a,lineNumber:170,columnNumber:21},void 0)]},void 0,!0,{fileName:a,lineNumber:168,columnNumber:17},void 0),l("div",{className:"flex gap-x-[10px]",children:[l("p",{className:"font-semibold",children:"Project Name: "},void 0,!1,{fileName:a,lineNumber:173,columnNumber:21},void 0),l("p",{className:"capitalize",children:m!=null&&m.project_name?m==null?void 0:m.project_name:"Not Avaiable"},void 0,!1,{fileName:a,lineNumber:174,columnNumber:21},void 0)]},void 0,!0,{fileName:a,lineNumber:172,columnNumber:17},void 0),l("div",{className:"flex gap-x-[10px]",children:[l("p",{className:"font-semibold",children:"Apartment No: "},void 0,!1,{fileName:a,lineNumber:177,columnNumber:21},void 0),l("p",{className:"capitalize",children:m!=null&&m.unitnumber?m==null?void 0:m.unitnumber:"Not Avaiable"},void 0,!1,{fileName:a,lineNumber:178,columnNumber:21},void 0)]},void 0,!0,{fileName:a,lineNumber:176,columnNumber:17},void 0),l("div",{className:"flex gap-x-[10px]",children:[l("p",{className:"font-semibold",children:"Building No: "},void 0,!1,{fileName:a,lineNumber:181,columnNumber:21},void 0),l("p",{className:"capitalize",children:m!=null&&m.building_name?m==null?void 0:m.building_name:"Not Avaiable"},void 0,!1,{fileName:a,lineNumber:182,columnNumber:21},void 0)]},void 0,!0,{fileName:a,lineNumber:180,columnNumber:17},void 0)]},void 0,!0,{fileName:a,lineNumber:167,columnNumber:13},void 0),l("div",{className:"overflow-x-auto -mx-6 mt-6",children:l("div",{className:"inline-block min-w-full align-middle",children:l("div",{className:"",children:l("table",{className:"min-w-[100%] overflow-x-scroll divide-y divide-slate-100 table-fixed dark:divide-slate-700",...g,children:[l("thead",{className:"bg-slate-200 dark:bg-slate-700",children:F.map(e=>l("tr",{...e.getHeaderGroupProps(),children:e.headers.map(t=>l("th",{...t.getHeaderProps(t.getSortByToggleProps()),scope:"col",className:"table-th",children:[t.render("Header"),l("span",{children:t.isSorted?t.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""},void 0,!1,{fileName:a,lineNumber:203,columnNumber:53},void 0)]},void 0,!0,{fileName:a,lineNumber:197,columnNumber:49},void 0))},void 0,!1,{fileName:a,lineNumber:194,columnNumber:37},void 0))},void 0,!1,{fileName:a,lineNumber:192,columnNumber:29},void 0),l("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...A,children:[P.map(e=>(W(e),l(x,{children:l("tr",{...e.getRowProps(),children:e.cells.map(t=>l("td",{...t.getCellProps(),className:"table-td",children:t.render("Cell")},void 0,!1,{fileName:a,lineNumber:223,columnNumber:57},void 0))},void 0,!1,{fileName:a,lineNumber:220,columnNumber:45},void 0)},void 0,!1))),l("tr",{children:[l("td",{},void 0,!1,{fileName:a,lineNumber:233,columnNumber:37},void 0),l("td",{},void 0,!1,{fileName:a,lineNumber:234,columnNumber:37},void 0),l("td",{},void 0,!1,{fileName:a,lineNumber:235,columnNumber:37},void 0),l("td",{},void 0,!1,{fileName:a,lineNumber:236,columnNumber:37},void 0),l("td",{},void 0,!1,{fileName:a,lineNumber:237,columnNumber:37},void 0),l("td",{},void 0,!1,{fileName:a,lineNumber:238,columnNumber:37},void 0),l("td",{className:"table-td",children:(v==null?void 0:v.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" Nights"},void 0,!1,{fileName:a,lineNumber:239,columnNumber:37},void 0),l("td",{className:"table-td",children:(T==null?void 0:T.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED"},void 0,!1,{fileName:a,lineNumber:242,columnNumber:37},void 0),l("td",{className:"table-td",children:(b==null?void 0:b.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED"},void 0,!1,{fileName:a,lineNumber:245,columnNumber:37},void 0)]},void 0,!0,{fileName:a,lineNumber:232,columnNumber:33},void 0)]},void 0,!0,{fileName:a,lineNumber:212,columnNumber:29},void 0)]},void 0,!0,{fileName:a,lineNumber:188,columnNumber:25},void 0)},void 0,!1,{fileName:a,lineNumber:187,columnNumber:21},void 0)},void 0,!1,{fileName:a,lineNumber:186,columnNumber:17},void 0)},void 0,!1,{fileName:a,lineNumber:185,columnNumber:13},void 0),l("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[l("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[l("select",{className:"form-control py-2 w-max",value:X,onChange:e=>Q(Number(e.target.value)),children:[50,100,200].map(e=>l("option",{value:e,children:["Show ",e]},e,!0,{fileName:a,lineNumber:262,columnNumber:29},void 0))},void 0,!1,{fileName:a,lineNumber:256,columnNumber:21},void 0),l("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",l("span",{children:[_+1," of ",d.length]},void 0,!0,{fileName:a,lineNumber:269,columnNumber:25},void 0)]},void 0,!0,{fileName:a,lineNumber:267,columnNumber:21},void 0)]},void 0,!0,{fileName:a,lineNumber:255,columnNumber:17},void 0),l("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[l("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${r?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>h(0),disabled:!r,children:l(K,{icon:"heroicons:chevron-double-left-solid"},void 0,!1,{fileName:a,lineNumber:282,columnNumber:29},void 0)},void 0,!1,{fileName:a,lineNumber:276,columnNumber:25},void 0)},void 0,!1,{fileName:a,lineNumber:275,columnNumber:21},void 0),l("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${r?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>j(),disabled:!r,children:"Prev"},void 0,!1,{fileName:a,lineNumber:286,columnNumber:25},void 0)},void 0,!1,{fileName:a,lineNumber:285,columnNumber:21},void 0),d.map((e,t)=>l("li",{children:l("button",{href:"#","aria-current":"page",className:` ${t===_?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>h(t),children:e+1},void 0,!1,{fileName:a,lineNumber:297,columnNumber:29},void 0)},t,!1,{fileName:a,lineNumber:296,columnNumber:25},void 0)),l("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${s?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>H(),disabled:!s,children:"Next"},void 0,!1,{fileName:a,lineNumber:311,columnNumber:25},void 0)},void 0,!1,{fileName:a,lineNumber:310,columnNumber:21},void 0),l("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{onClick:()=>h(J-1),disabled:!s,className:` ${s?"":"opacity-50 cursor-not-allowed"}`,children:l(K,{icon:"heroicons:chevron-double-right-solid"},void 0,!1,{fileName:a,lineNumber:327,columnNumber:29},void 0)},void 0,!1,{fileName:a,lineNumber:321,columnNumber:25},void 0)},void 0,!1,{fileName:a,lineNumber:320,columnNumber:21},void 0)]},void 0,!0,{fileName:a,lineNumber:274,columnNumber:17},void 0)]},void 0,!0,{fileName:a,lineNumber:254,columnNumber:13},void 0)]},void 0,!0)};var o="D:\\Ahsan\\Rare\\Dev\\Rare_Frontend\\src\\pages\\booking-management\\booking-report\\AllReport.jsx";const ie={option:(i,m)=>({...i,fontSize:"14px"})},de=()=>{const[i,m]=c.exports.useState(""),[u,S]=c.exports.useState([]),[N,C]=c.exports.useState(""),[g,A]=c.exports.useState([]),[F,R]=c.exports.useState("");c.exports.useEffect(()=>{fetch("http://stg.srp.ai/property").then(s=>s.json()).then(s=>{const r=s==null?void 0:s.map(d=>({label:d.unitnumber+" | "+d.communityname+" | "+d.projectname+" | "+d.buildingname,value:d._id}));A(r)})},[]),c.exports.useEffect(()=>{(async()=>{if(i!=null&&i.propertyid){const d=await(await fetch(`http://stg.srp.ai/property/${i==null?void 0:i.propertyid}`)).json();d&&R(d)}})()},[i==null?void 0:i.propertyid]),c.exports.useEffect(()=>{(async()=>{const d=await(await fetch("http://stg.srp.ai/booking")).json();C(d)})()},[]);const[P,H]=c.exports.useState({startDate:"",endDate:""}),j=async s=>{const{startDate:r,endDate:d}=s,E=new Date(r),h=new Date(d);m({...i,startDate:E,endDate:h})};return c.exports.useEffect(()=>{if(N!=null&&N.length&&(i==null?void 0:i.propertyid)&&(i==null?void 0:i.startDate)&&(i==null?void 0:i.endDate)){const s=N.filter(r=>{let d=!0;return i.propertyid&&r.propertyid!==i.propertyid&&(d=!1),((r==null?void 0:r.checkindate)<(i==null?void 0:i.startDate)||(r==null?void 0:r.checkindate)>(i==null?void 0:i.endDate))&&(d=!1),d});S(s)}},[i==null?void 0:i.propertyid,i==null?void 0:i.startDate,i==null?void 0:i.endDate,N]),console.log(i,"setUserData"),console.log(u,"allBooking"),l(x,{children:l("div",{className:"xl:col-span-2 col-span-1",children:l(B,{title:"Booking Report",children:[l("div",{children:[l("form",{className:"lg:grid-cols-3 grid gap-5 grid-cols-1 ",children:[l("div",{className:"w-[100%] col-span-3",children:l("h4",{className:"text-base text-slate-800 dark:text-slate-300 mb-[0.5rem] mt-[0.5rem]",children:"Select Property"},void 0,!1,{fileName:o,lineNumber:108,columnNumber:33},void 0)},void 0,!1,{fileName:o,lineNumber:107,columnNumber:29},void 0),l("div",{className:"w-[100%] col-span-3",children:l(w,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:g,value:g.filter(function(s){return s.value===(i==null?void 0:i.propertyid)}),onChange:s=>{m({...i,propertyid:s==null?void 0:s.value})},styles:ie,id:"hh",placeholder:"Select and Search property"},void 0,!1,{fileName:o,lineNumber:116,columnNumber:33},void 0)},void 0,!1,{fileName:o,lineNumber:112,columnNumber:29},void 0)]},void 0,!0,{fileName:o,lineNumber:103,columnNumber:25},void 0),(i==null?void 0:i.propertyid)&&l(x,{children:l("div",{className:"flex justify-end mt-[25px]",children:l("div",{className:"w-[150px]",children:l("div",{className:"date-range-custom relative",children:l(ee,{value:P,inputClassName:"input-class",containerClassName:"container-class",onChange:j,placeholder:"SELECT DATE"},void 0,!1,{fileName:o,lineNumber:139,columnNumber:49},void 0)},void 0,!1,{fileName:o,lineNumber:138,columnNumber:45},void 0)},void 0,!1,{fileName:o,lineNumber:137,columnNumber:41},void 0)},void 0,!1,{fileName:o,lineNumber:136,columnNumber:37},void 0)},void 0,!1)]},void 0,!0,{fileName:o,lineNumber:102,columnNumber:21},void 0),u!=null&&u.length?l(x,{children:l(le,{allBooking:u,propertyData:F},void 0,!1,{fileName:o,lineNumber:156,columnNumber:33},void 0)},void 0,!1):null]},void 0,!0,{fileName:o,lineNumber:101,columnNumber:17},void 0)},void 0,!1,{fileName:o,lineNumber:100,columnNumber:13},void 0)},void 0,!1)};export{de as default};
