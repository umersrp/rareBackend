import{R as He,j as l,F as _,c9 as We,r as u,b as c,C as Xl,L as G,I as P,an as T,cb as je,ca as Ke,H as oe}from"./index.5e55c1ba.js";import{T as me}from"./Tooltip.4c4c7a86.js";import{r as pe}from"./index.c89ffb9d.js";import{G as Zl}from"./GlobalFilter.2b1d860a.js";import{D as fe}from"./DeleteParagraph.da4866a3.js";/* empty css                     */const Qe=He.forwardRef(({indeterminate:A,...C},$)=>{const p=He.useRef(),k=$||p;return He.useEffect(()=>{k.current.indeterminate=A},[k,A]),l(_,{children:l("input",{type:"checkbox",ref:k,...C,className:"table-checkbox"})})}),q={option:(A,C)=>({...A,fontSize:"14px"})},Ol=({showModal:A,handleClose:C,loaderModal:$,linkedData:p,handleDeleteData:k,dataId:i,moduleName:N,PropertyData:m,bookingData:r,tenantcontractData:x,propertyOwnerData:h,userName:f,dataRole:g})=>c("div",{className:"thumbnail-container",children:[A&&l("div",{className:"modal-overlay-property",children:c("div",{className:"modal-new w-[850px]",children:[c("div",{className:"flex items-center justify-between mb-[20px] pb-[7px] modal-border-bottom",children:[l("h5",{className:" text-[18px] capitalize",children:`Are You Sure you Want to Delete this ${N}?`}),l("img",{src:je,alt:"cancelIcon",className:"w-[20px] cursor-pointer h-[20px]",onClick:C})]}),$===!0?l(Ke,{}):c(_,{children:[p!=null&&p.length?l("div",{className:"data-list-modal",children:c(_,{children:[c("h4",{className:"text-[16px] mb-[10px]",children:[l("span",{className:"font-bold",children:N})," ",f," is linked with the following modules:"]}),m!=null&&m.length?l("ul",{className:" mb-[10px] text-start",children:l("li",{className:"list-disc ml-[30px]",children:c("div",{className:"flex items-center",children:[l("span",{className:"font-semibold mr-[5px]",children:"Property: "}),(g==null?void 0:g.deletepropert)===!0?l(_,{children:m==null?void 0:m.map((n,v)=>c(G,{className:" mr-[5px] hover:underline",to:`/view-property/${n==null?void 0:n._id}?delete=true`,children:[n==null?void 0:n.unitnumber,v!==m.length-1?",":null]},v+1))}):l(fe,{moduleName:N,linkedName:"Property"})]})})}):null,h!=null&&h.length?l("ul",{className:" mb-[10px] text-start",children:l("li",{className:"list-disc ml-[30px]",children:c("div",{className:"flex items-center",children:[l("span",{className:"font-semibold mr-[5px]",children:"Property as an Owner Representative: "}),(g==null?void 0:g.deletepropert)===!0?l(_,{children:h==null?void 0:h.map((n,v)=>c(G,{className:" mr-[5px] hover:underline",to:`/view-property/${n==null?void 0:n._id}?delete=true`,children:[n==null?void 0:n.unitnumber,v!==h.length-1?",":null]},v+1))}):l(fe,{moduleName:N,linkedName:"Property"})]})})}):null,r!=null&&r.length?l("ul",{className:" mb-[10px] text-start",children:l("li",{className:"list-disc ml-[30px]",children:c("div",{className:"flex items-center",children:[l("span",{className:"font-semibold mr-[5px]",children:"Booking: "}),(g==null?void 0:g.deletebooking)===!0?l(_,{children:r==null?void 0:r.map((n,v)=>c(G,{className:" mr-[5px] hover:underline",to:`/view-booking/${n==null?void 0:n._id}?delete=true`,children:[n==null?void 0:n.bookingnumber,v!==r.length-1?",":null]},v+1))}):l(fe,{moduleName:N,linkedName:"Booking"})]})})}):null,x!=null&&x.length?l("ul",{className:" mb-[10px] text-start",children:l("li",{className:"list-disc ml-[30px]",children:c("div",{className:"flex items-center",children:[l("span",{className:"font-semibold mr-[5px]",children:"Tenancy Contract: "}),(g==null?void 0:g.deletetenant)===!0?l(_,{children:x==null?void 0:x.map((n,v)=>c(G,{className:" mr-[5px] hover:underline",to:`/view-tenantcontract/${n==null?void 0:n._id}?delete=true`,children:[n==null?void 0:n.unitnumber,v!==x.length-1?",":null]},v+1))}):l(fe,{moduleName:N,linkedName:"Tenancy Contract"})]})})}):null]})}):null,c("div",{className:"mb-[15px] max-h-[700px] pr-[15px]",children:[(p==null?void 0:p.length)&&((m==null?void 0:m.length)||(h==null?void 0:h.length)||(r==null?void 0:r.length)||(x==null?void 0:x.length))?l("p",{className:" mt-[10px]",children:`This ${N} is already linked. Please first delete these entries which are linked it with`}):null,!(p!=null&&p.length)&&!(m!=null&&m.length)&&!(h!=null&&h.length)&&!(r!=null&&r.length)&&!(x!=null&&x.length)?l("button",{className:"btn btn inline-flex justify-center btn-danger ",onClick:()=>k(i),children:"Delete"}):null]})]})]})}),l(_,{})]}),Rl=({assignModal:A,handleCloseAssignModal:C,moduleName:$,selectedCustomerId:p,employeeAgent:k,selectedAgent:i,setSelectedAgent:N,addAgentToCustomer:m})=>l("div",{className:"thumbnail-container",children:A&&l("div",{className:"modal-overlay-property",children:c("div",{className:"modal-new w-[850px]",children:[c("div",{className:"flex items-center justify-between mb-[20px] pb-[7px] modal-border-bottom",children:[l("h5",{className:" text-[18px] capitalize",children:`${$}`}),l("img",{src:je,alt:"cancelIcon",className:"w-[20px] cursor-pointer h-[20px]",onClick:C})]}),c("div",{className:"w-[100%] col-span-3 flex flex-col items-start mb-[20px]",children:[l("label",{htmlFor:" hh",className:"form-label text-start",children:"Select Agent:"}),l("div",{className:"w-[100%]",children:l(T,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:k,value:k.filter(function(r){return r.value===i}),onChange:r=>{N(r==null?void 0:r.value)},styles:q,id:"hh"})})]}),l("div",{className:"mb-[15px] max-h-[700px] pr-[15px]",children:i!==void 0&&i!==""?l("button",{className:"btn btn inline-flex justify-center btn-dark ",onClick:()=>m(p),children:"Add"}):null})]})})}),Fl=({showNotesModal:A,handleCloseNoteModal:C,moduleName:$,allNotes:p,handleChangeData:k,notesData:i,handleAddNotesData:N})=>l("div",{className:"thumbnail-container",children:A&&l("div",{className:"modal-overlay-property",children:c("div",{className:"modal-new w-[850px] max-h-[700px] overflow-y-scroll",children:[c("div",{className:"flex items-center justify-between mb-[20px] pb-[7px] modal-border-bottom",children:[l("h5",{className:" text-[18px] capitalize",children:`${$}`}),l("img",{src:je,alt:"cancelIcon",className:"w-[20px] cursor-pointer h-[20px]",onClick:C})]}),l("div",{className:"w-[100%] col-span-3 flex flex-col items-start mb-[20px]",children:l("div",{className:"w-[100%] text-start",children:c("div",{class:"fromGroup       ",children:[l("div",{className:"flex gap-x-[15px] items-center",children:l("label",{for:"pn4",class:"block form-label  normal-case",children:"Type Your Note"})}),c("div",{class:"relative ",children:[l("textarea",{class:"  form-control py-2   ",placeholder:"Type Your Note Here...",id:"pn4",rows:"3",value:i,onChange:k}),l("div",{class:"flex text-xl absolute ltr:right-[14px] rtl:left-[14px] top-1/2 -translate-y-1/2  space-x-1 rtl:space-x-reverse"})]})]})})}),l("div",{className:"mb-[15px] max-h-[700px] flex justify-end",children:i!==""?l("button",{className:"btn btn inline-flex justify-center btn-dark ",onClick:N,children:"Send"}):null}),l(_,{children:p!=null&&p.length?l(_,{children:p==null?void 0:p.map((m,r)=>l("div",{class:"w-[100%] col-span-3 flex flex-col items-start mb-[20px]",children:l("div",{class:"w-[100%] text-start",children:c("div",{class:"fromGroup       ",children:[l("div",{className:"flex gap-x-[15px] items-center",children:c("label",{for:"pn4",class:"block form-label  normal-case",children:["Note by ",m==null?void 0:m.employee_email,l("span",{className:"ml-[10px]",children:"-"}),l("span",{className:"ml-[10px]",children:"created at: "+new Date(m==null?void 0:m.createdAt).toDateString()})]})}),c("div",{class:"relative ",children:[l("textarea",{class:"  form-control py-2   ",placeholder:"Textarea",id:"pn4",rows:"3",value:m==null?void 0:m.note_text,readOnly:!0}),l("div",{class:"flex text-xl absolute ltr:right-[14px] rtl:left-[14px] top-1/2 -translate-y-1/2  space-x-1 rtl:space-x-reverse"})]})]})})},r==null?void 0:r._id))}):null})]})})}),Dl=({title:A,linktitle:C,pagelink:$,allCustomers:p,onDataUpdate:k,forFilterData:i,handleFilterSearch:N,handleClearFilter:m})=>{const r=localStorage.getItem("isAuth"),x=JSON.parse(r),{data:h}=We(x==null?void 0:x.roleid),[f,g]=u.exports.useState(!1),[n,v]=u.exports.useState(!1),[Xe,Ze]=u.exports.useState(""),[Oe,Re]=u.exports.useState(""),[Fe,Ne]=u.exports.useState(""),[De,be]=u.exports.useState(""),[we,ge]=u.exports.useState(""),[el,ye]=u.exports.useState(""),[ll,sl]=u.exports.useState(""),[al,Ce]=u.exports.useState(!1),[tl,Se]=u.exports.useState(""),[he,nl]=u.exports.useState(!1),[t,I]=u.exports.useState(""),U=e=>{const{name:s,value:a}=e.target;I({...t,[s]:a})},cl=async e=>{if(g(!0),v(!0),e)try{const s=`http://dev-rare.srp.ai/booking/api/allbooking/forproperty?customerid=${e==null?void 0:e._id}`,a=`http://dev-rare.srp.ai/property/api/advancesearch?customerid=${e==null?void 0:e._id}&softdelete=false`,d=`http://dev-rare.srp.ai/tenantcontract/api/propertydelete?customerid=${e==null?void 0:e._id}`,o=`http://dev-rare.srp.ai/property/api/advancesearch?owner_representative_id=${e==null?void 0:e._id}&softdelete=false`,S=await fetch(s);if(!S.ok&&S.status!==400)throw new Error(`API 1 failed with status: ${S.status}`);const B=S.status===400?[]:await S.json(),b=await fetch(a);if(!b.ok&&b.status!==400)throw new Error(`API 2 failed with status: ${b.status}`);const y=b.status===400?[]:await b.json(),H=await fetch(d);if(!H.ok&&H.status!==400)throw new Error(`API 3 failed with status: ${H.status}`);const E=H.status===400?[]:await H.json(),j=await fetch(o);if(!j.ok&&j.status!==400)throw new Error(`API 4 failed with status: ${j.status}`);const M=j.status===400?[]:await j.json(),L=[...B,...y,...E,...M];Ne(B),be(y),ge(E),ye(M),Ze(L),Re(e==null?void 0:e._id),sl(e==null?void 0:e.email),v(!1)}catch(s){console.error("Error fetching data:",s),v(!1)}},il=()=>{g(!1),Ne(""),be(""),ge(""),ye("")},dl=async e=>{try{await oe.patch("http://dev-rare.srp.ai/users/api/specific/userupdate",{_id:e,softdelete:!0}),k(),Ne(""),be(""),ge(""),ye("")}catch(s){console.log(s,"error")}},[wl,ul]=u.exports.useState([]),[ml,Pe]=u.exports.useState([]),[Be,re]=u.exports.useState(""),[pl,Ie]=u.exports.useState(""),hl=e=>{Ce(!0),Se(e==null?void 0:e._id),e!=null&&e.employeeid&&Ie(e==null?void 0:e.employeeid),re(e==null?void 0:e.employeeid)},rl=()=>{Ce(!1),Se(""),re("")};u.exports.useEffect(()=>{(async()=>{const a=await(await fetch("http://dev-rare.srp.ai/roles/api/search/Property Consultant")).json();ul(a==null?void 0:a.roles)})()},[]),u.exports.useEffect(()=>{(async()=>{var s;try{const a=await oe.get("http://dev-rare.srp.ai/employees/");if(Pe(a.data),a!=null&&a.data){const d=(s=a.data)==null?void 0:s.map(o=>({label:o.firstname+" "+o.lastname+" | "+o.email,value:o._id}));Pe(d)}}catch(a){console.error("Error fetching data:",a)}})()},[]);const vl=async e=>{try{await oe.patch("http://dev-rare.srp.ai/users/api/specific/userupdate",{_id:e,employeeid:Be}),k(),re(""),Ce(!1),Se("")}catch(s){console.log(s,"error")}},[xl,Ee]=u.exports.useState(!1),[Me,ol]=u.exports.useState(""),[fl,ke]=u.exports.useState([]),[Ae,_e]=u.exports.useState(""),Nl=async e=>{if(Ee(!0),ol(e==null?void 0:e._id),e)try{const s=`http://dev-rare.srp.ai/note/api/search?module_id=${e==null?void 0:e._id}`,a=await fetch(s);if(!a.ok&&a.status!==400)throw new Error(`API 2 failed with status: ${a.status}`);const d=a.status===400?[]:await a.json();ke(d)}catch(s){console.error("Error fetching data:",s)}},bl=()=>{Ee(!1),ke([]),_e("")},gl=e=>{_e(e.target.value)},yl=async()=>{if(Ae!==""&&await oe.post("http://dev-rare.srp.ai/note",{note_text:Ae,module_id:Me,commentator_id:x==null?void 0:x._id}))try{const s=`http://dev-rare.srp.ai/note/api/search?module_id=${Me}`,a=await fetch(s);if(!a.ok&&a.status!==400)throw new Error(`API 2 failed with status: ${a.status}`);const d=a.status===400?[]:await a.json();ke(d),_e("")}catch(s){console.error("Error fetching data:",s)}},Cl=[{Header:"Id",accessor:"id",Cell:({row:e,flatRows:s})=>l("span",{children:s.indexOf(e)+1})},{Header:"Name",accessor:e=>`${e.firstname} ${e.lastname}`,Cell:e=>{var s;return l("span",{children:(s=e==null?void 0:e.cell)==null?void 0:s.value})}},{Header:"Email",accessor:"email",Cell:e=>{var s;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)==null?void 0:s.value})})})}},{Header:"Age",accessor:"user_age",Cell:e=>{var s,a,d;return l("span",{children:((s=e==null?void 0:e.cell)==null?void 0:s.value)||((a=e==null?void 0:e.cell)==null?void 0:a.value)===0?(d=e==null?void 0:e.cell)==null?void 0:d.value:"Not Available"})}},{Header:"date of birth",accessor:"datebirth",Cell:e=>{var s,a;return l("span",{children:(s=e==null?void 0:e.cell)!=null&&s.value?new Date((a=e==null?void 0:e.cell)==null?void 0:a.value).toDateString():"Not Available"})}},{Header:"status",accessor:"isCpmleted",Cell:e=>{var s,a,d;return l("span",{className:"block w-full",children:l("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((s=e==null?void 0:e.cell)==null?void 0:s.value)===!0?"text-success-500 bg-success-500":""} 
                ${((a=e==null?void 0:e.cell)==null?void 0:a.value)===!1?"text-danger-500 bg-danger-500":""}
                
                 `,children:((d=e==null?void 0:e.cell)==null?void 0:d.value)===!0?"Completed":"Not Completed"})})}},{Header:"What'sApp no",accessor:"whatsappno",Cell:e=>{var s,a,d,o;return l("a",{href:`${(s=e==null?void 0:e.cell)!=null&&s.value?`https://wa.me/${(a=e==null?void 0:e.cell)==null?void 0:a.value}`:"#"}`,target:"_blank",rel:"noreferrer",children:(d=e==null?void 0:e.cell)!=null&&d.value?(o=e==null?void 0:e.cell)==null?void 0:o.value:"Not Available"})}},{Header:"Password",accessor:"password",Cell:e=>{var o,S;const[s,a]=u.exports.useState(!1),d=()=>{a(!s)};return l("div",{children:(o=e==null?void 0:e.cell)!=null&&o.value?c("span",{className:"flex items-center justify-between",children:[l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:s===!0?(S=e==null?void 0:e.cell)==null?void 0:S.value:"........"}),l("span",{className:"cursor-pointer text-secondary-500  select-none",onClick:d,children:s===!0?l(P,{icon:"heroicons-outline:eye"}):l(P,{icon:"heroicons-outline:eye-off"})})]}):l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Not Available"})})})}},{Header:"Phone Number",accessor:"contactno",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"Assigned Agent",accessor:"employee_email",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"Alt Email",accessor:"altemail",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"Alt Number",accessor:"altmobilenumber",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"Nationality",accessor:"passportno",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"name on passport",accessor:"nameonpassport",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"country of residence",accessor:"countryofresidence",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"postal address",accessor:"postaladdress",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"primary no",accessor:"primaryno",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"passport id no",accessor:"passportidno",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"passport issue",accessor:"passportissue",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?new Date((a=e==null?void 0:e.cell)==null?void 0:a.value).toDateString():"Not Available"})})})}},{Header:"passport expiry",accessor:"passportexpiry",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?new Date((a=e==null?void 0:e.cell)==null?void 0:a.value).toDateString():"Not Available"})})})}},{Header:"national id no",accessor:"nationalidno",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"national id issue date",accessor:"nationalidissuedate",Cell:e=>{var s,a;return l("span",{children:(s=e==null?void 0:e.cell)!=null&&s.value?new Date((a=e==null?void 0:e.cell)==null?void 0:a.value).toDateString():"Not Available"})}},{Header:"national id expiry",accessor:"nationalidexpiry",Cell:e=>{var s,a;return l("span",{children:(s=e==null?void 0:e.cell)!=null&&s.value?new Date((a=e==null?void 0:e.cell)==null?void 0:a.value).toDateString():"Not Available"})}},{Header:"resident status",accessor:"residentstatus",Cell:e=>{var s,a;return l("span",{children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})}},{Header:"passport pdf",accessor:"passportpdf",Cell:e=>{var s,a,d,o,S,B,b,y,H,E,j,M,L,V,z,Y,J,W,Q,K,X,Z,O,R,F,D,w,ee,le,se,ae,te,ne,ce,ie,de,ue;return l("span",{className:"block w-full",children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((a=e==null?void 0:e.cell)==null?void 0:a.value)!==void 0&&((d=e==null?void 0:e.cell)==null?void 0:d.value)!==null&&((o=e==null?void 0:e.cell)==null?void 0:o.value)!=="undefined"&&((S=e==null?void 0:e.cell)==null?void 0:S.value)!=="null"&&((B=e==null?void 0:e.cell)==null?void 0:B.value)!==""?l("a",{href:`${((b=e==null?void 0:e.cell)==null?void 0:b.value)&&((y=e==null?void 0:e.cell)==null?void 0:y.value)!==void 0&&((H=e==null?void 0:e.cell)==null?void 0:H.value)!==null&&((E=e==null?void 0:e.cell)==null?void 0:E.value)!=="undefined"&&((j=e==null?void 0:e.cell)==null?void 0:j.value)!=="null"&&((M=e==null?void 0:e.cell)==null?void 0:M.value)!==""?(L=e==null?void 0:e.cell)==null?void 0:L.value:"#"}`,target:"_blank",className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((V=e==null?void 0:e.cell)==null?void 0:V.value)&&((z=e==null?void 0:e.cell)==null?void 0:z.value)!==void 0&&((Y=e==null?void 0:e.cell)==null?void 0:Y.value)!==null&&((J=e==null?void 0:e.cell)==null?void 0:J.value)!=="undefined"&&((W=e==null?void 0:e.cell)==null?void 0:W.value)!=="null"&&((Q=e==null?void 0:e.cell)==null?void 0:Q.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"}`,children:((K=e==null?void 0:e.cell)==null?void 0:K.value)&&((X=e==null?void 0:e.cell)==null?void 0:X.value)!==void 0&&((Z=e==null?void 0:e.cell)==null?void 0:Z.value)!==null&&((O=e==null?void 0:e.cell)==null?void 0:O.value)!=="undefined"&&((R=e==null?void 0:e.cell)==null?void 0:R.value)!=="null"&&((F=e==null?void 0:e.cell)==null?void 0:F.value)!==""?"View":"Not Available"}):l("p",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((D=e==null?void 0:e.cell)==null?void 0:D.value)&&((w=e==null?void 0:e.cell)==null?void 0:w.value)!==void 0&&((ee=e==null?void 0:e.cell)==null?void 0:ee.value)!==null&&((le=e==null?void 0:e.cell)==null?void 0:le.value)!=="undefined"&&((se=e==null?void 0:e.cell)==null?void 0:se.value)!=="null"&&((ae=e==null?void 0:e.cell)==null?void 0:ae.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"}`,children:((te=e==null?void 0:e.cell)==null?void 0:te.value)&&((ne=e==null?void 0:e.cell)==null?void 0:ne.value)!==void 0&&((ce=e==null?void 0:e.cell)==null?void 0:ce.value)!==null&&((ie=e==null?void 0:e.cell)==null?void 0:ie.value)!=="undefined"&&((de=e==null?void 0:e.cell)==null?void 0:de.value)!=="null"&&((ue=e==null?void 0:e.cell)==null?void 0:ue.value)!==""?"View":"Not Available"})})}},{Header:"national id pdf",accessor:"nationalidpdf",Cell:e=>{var s,a,d,o,S,B,b,y,H,E,j,M,L,V,z,Y,J,W,Q,K,X,Z,O,R,F,D,w,ee,le,se,ae,te,ne,ce,ie,de,ue;return l("span",{className:"block w-full",children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((a=e==null?void 0:e.cell)==null?void 0:a.value)!==void 0&&((d=e==null?void 0:e.cell)==null?void 0:d.value)!==null&&((o=e==null?void 0:e.cell)==null?void 0:o.value)!=="undefined"&&((S=e==null?void 0:e.cell)==null?void 0:S.value)!=="null"&&((B=e==null?void 0:e.cell)==null?void 0:B.value)!==""?l("a",{href:`${((b=e==null?void 0:e.cell)==null?void 0:b.value)&&((y=e==null?void 0:e.cell)==null?void 0:y.value)!==void 0&&((H=e==null?void 0:e.cell)==null?void 0:H.value)!==null&&((E=e==null?void 0:e.cell)==null?void 0:E.value)!=="undefined"&&((j=e==null?void 0:e.cell)==null?void 0:j.value)!=="null"&&((M=e==null?void 0:e.cell)==null?void 0:M.value)!==""?(L=e==null?void 0:e.cell)==null?void 0:L.value:"#"}`,target:"_blank",className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((V=e==null?void 0:e.cell)==null?void 0:V.value)&&((z=e==null?void 0:e.cell)==null?void 0:z.value)!==void 0&&((Y=e==null?void 0:e.cell)==null?void 0:Y.value)!==null&&((J=e==null?void 0:e.cell)==null?void 0:J.value)!=="undefined"&&((W=e==null?void 0:e.cell)==null?void 0:W.value)!=="null"&&((Q=e==null?void 0:e.cell)==null?void 0:Q.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"}`,children:((K=e==null?void 0:e.cell)==null?void 0:K.value)&&((X=e==null?void 0:e.cell)==null?void 0:X.value)!==void 0&&((Z=e==null?void 0:e.cell)==null?void 0:Z.value)!==null&&((O=e==null?void 0:e.cell)==null?void 0:O.value)!=="undefined"&&((R=e==null?void 0:e.cell)==null?void 0:R.value)!=="null"&&((F=e==null?void 0:e.cell)==null?void 0:F.value)!==""?"View":"Not Available"}):l("p",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((D=e==null?void 0:e.cell)==null?void 0:D.value)&&((w=e==null?void 0:e.cell)==null?void 0:w.value)!==void 0&&((ee=e==null?void 0:e.cell)==null?void 0:ee.value)!==null&&((le=e==null?void 0:e.cell)==null?void 0:le.value)!=="undefined"&&((se=e==null?void 0:e.cell)==null?void 0:se.value)!=="null"&&((ae=e==null?void 0:e.cell)==null?void 0:ae.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"}`,children:((te=e==null?void 0:e.cell)==null?void 0:te.value)&&((ne=e==null?void 0:e.cell)==null?void 0:ne.value)!==void 0&&((ce=e==null?void 0:e.cell)==null?void 0:ce.value)!==null&&((ie=e==null?void 0:e.cell)==null?void 0:ie.value)!=="undefined"&&((de=e==null?void 0:e.cell)==null?void 0:de.value)!=="null"&&((ue=e==null?void 0:e.cell)==null?void 0:ue.value)!==""?"View":"Not Available"})})}},{Header:"Created By",accessor:"employee_email_createdBy",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"created-on",accessor:"createdAt",Cell:e=>{var s;return l("span",{children:new Date((s=e==null?void 0:e.cell)==null?void 0:s.value).toDateString()})}},{Header:"Updated By",accessor:"employee_email_updatedBy",Cell:e=>{var s,a;return l("div",{children:l("span",{className:"inline-flex items-center",children:l("span",{className:"text-sm text-slate-600 dark:text-slate-300 normal-case",children:(s=e==null?void 0:e.cell)!=null&&s.value?(a=e==null?void 0:e.cell)==null?void 0:a.value:"Not Available"})})})}},{Header:"updated-on",accessor:"updatedAt",Cell:e=>{var s,a;return l("span",{children:(s=e==null?void 0:e.cell)!=null&&s.value?new Date((a=e==null?void 0:e.cell)==null?void 0:a.value).toDateString():"Not Available"})}},{Header:"action",accessor:e=>`${e._id}`,Cell:e=>{const s=localStorage.getItem("isAuth"),a=JSON.parse(s),{data:d}=We(a==null?void 0:a.roleid);if(!d)return null;const o=(d==null?void 0:d.readcustomer)===!0,S=(d==null?void 0:d.updatecustomer)===!0,B=(d==null?void 0:d.deletecustomer)===!0;return c("div",{className:"flex space-x-3 rtl:space-x-reverse",children:[o&&l(me,{content:"assign to agent",placement:"top",arrow:!0,animation:"shift-away",children:l("button",{className:"action-btn",type:"button",onClick:()=>{var b,y;return hl((y=(b=e==null?void 0:e.cell)==null?void 0:b.row)==null?void 0:y.original)},children:l(P,{icon:"heroicons:user-plus"})})}),o&&l(me,{content:"notes",placement:"top",arrow:!0,animation:"shift-away",children:l("button",{className:"action-btn",type:"button",onClick:()=>{var b,y;return Nl((y=(b=e==null?void 0:e.cell)==null?void 0:b.row)==null?void 0:y.original)},children:l(P,{icon:"heroicons:chat-bubble-left-right"})})}),o&&l(me,{content:"View",placement:"top",arrow:!0,animation:"shift-away",children:l(G,{to:`/view-customer/${e==null?void 0:e.cell.value}`,className:"action-btn",type:"button",children:l(P,{icon:"heroicons:eye"})})}),S&&l(me,{content:"Edit",placement:"top",arrow:!0,animation:"shift-away",children:l(G,{to:`/update-customer/${e==null?void 0:e.cell.value}`,className:"action-btn",type:"button",children:l(P,{icon:"heroicons:pencil-square"})})}),B&&l(me,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:l("button",{className:"action-btn",type:"button",onClick:()=>{var b,y;return cl((y=(b=e==null?void 0:e.cell)==null?void 0:b.row)==null?void 0:y.original)},children:l(P,{icon:"heroicons:trash"})})})]})}}],Sl=u.exports.useMemo(()=>Cl,[]),kl=u.exports.useMemo(()=>p),Al=pe.exports.useTable({columns:Sl,data:kl,initialState:{pageIndex:0,pageSize:50}},pe.exports.useGlobalFilter,pe.exports.useSortBy,pe.exports.usePagination,pe.exports.useRowSelect,e=>{e.visibleColumns.push(s=>[{id:"selection",Header:({getToggleAllRowsSelectedProps:a})=>l("div",{children:l(Qe,{...a()})}),Cell:({row:a})=>l("div",{children:l(Qe,{...a.getToggleRowSelectedProps()})})},...s])}),{getTableProps:_l,getTableBodyProps:$l,headerGroups:Hl,footerGroups:es,page:jl,nextPage:Pl,previousPage:Bl,canNextPage:ve,canPreviousPage:xe,pageOptions:Te,state:Il,gotoPage:$e,pageCount:El,setPageSize:Ml,setGlobalFilter:Tl,prepareRow:ql}=Al,{globalFilter:Ul,pageIndex:qe,pageSize:Ll}=Il,Gl=i==null?void 0:i.filter(e=>e.firstname!==void 0),Ue=[...new Set(Gl.map(e=>e.firstname))].sort((e,s)=>e.localeCompare(s,void 0,{sensitivity:"base"})).map(e=>({label:e,value:e})),Vl=i==null?void 0:i.filter(e=>e.lastname!==void 0),Le=[...new Set(Vl.map(e=>e.lastname))].sort((e,s)=>e.localeCompare(s,void 0,{sensitivity:"base"})).map(e=>{const s=i.find(a=>a.lastname===e);return s?{label:s.lastname,value:s.lastname}:null}).filter(Boolean),zl=i==null?void 0:i.filter(e=>e.email!==void 0),Ge=[...new Set(zl.map(e=>e.email))].sort((e,s)=>e.localeCompare(s,void 0,{sensitivity:"base"})).map(e=>{const s=i.find(a=>a.email===e);return s?{label:s.email,value:s.email}:null}).filter(Boolean),Yl=i==null?void 0:i.filter(e=>e.contactno!==void 0),Ve=[...new Set(Yl.map(e=>e.contactno))].map(e=>{const s=i.find(a=>a.contactno===e);return s?{label:s.contactno,value:s.contactno}:null}).filter(Boolean),Jl=i==null?void 0:i.filter(e=>e.passportidno!==void 0),ze=[...new Set(Jl.map(e=>e.passportidno))].map(e=>{const s=i.find(a=>a.passportidno===e);return s?{label:s.passportidno,value:s.passportidno}:null}).filter(Boolean),Wl=i==null?void 0:i.filter(e=>e.nationalidno!==void 0),Ye=[...new Set(Wl.map(e=>e.nationalidno))].map(e=>{const s=i.find(a=>a.nationalidno===e);return s?{label:s.nationalidno,value:s.nationalidno}:null}).filter(Boolean),Ql=i==null?void 0:i.filter(e=>e.employee_email!==void 0),Je=[...new Set(Ql.map(e=>e.employee_email))].map(e=>{const s=i.find(a=>a.employee_email===e);return s?{label:s.employee_email,value:s.employee_email}:null}).filter(Boolean),Kl=()=>{m(),I("")};return l(_,{children:c(Xl,{children:[c("div",{className:"flex justify-between items-center mb-6",children:[l("h4",{className:"card-title",children:A}),(h==null?void 0:h.createcustomer)===!0&&l(G,{to:$,className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:C})]}),c("div",{className:"md:flex justify-end items-center mb-6 gap-x-[25px] gap-y-[15px]",children:[c("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer md:mb-0 mb-4",onClick:()=>nl(!he),children:[he===!0?l(P,{icon:"heroicons:minus-small",className:"w-[20px] h-[20px]"}):l(P,{icon:"heroicons:plus-small",className:"w-[20px] h-[20px]"}),l("p",{className:"text-[16px] leading regular color-black",children:"Advance filter"})]}),l(Zl,{filter:Ul,setFilter:Tl})]}),c("div",{className:`xl:grid-cols-3 grid gap-5 grid-cols-1 ${he===!0?"filter-show mt-6 pointer-events-auto":"filter-remove -mt-4 pointer-events-none"}`,children:[c("div",{children:[l("label",{htmlFor:" hh",className:"form-label ",children:"First Name"}),l(T,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:Ue,value:Ue.filter(function(e){if((t==null?void 0:t.firstname)!=="")return e.value===(t==null?void 0:t.firstname)}),onChange:e=>{U({target:{name:"firstname",value:e.value}})},styles:q,id:"hh",placeholder:"Select..."}),t!=null&&t.firstname?l("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>I({...t,firstname:""}),children:"Clear filter"}):null]}),c("div",{children:[l("label",{htmlFor:" hh",className:"form-label ",children:"Last Name"}),l(T,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:Le,value:Le.filter(function(e){if((t==null?void 0:t.lastname)!=="")return e.value===(t==null?void 0:t.lastname)}),onChange:e=>{U({target:{name:"lastname",value:e.value}})},styles:q,id:"hh",placeholder:"Select..."}),t!=null&&t.lastname?l("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>I({...t,lastname:""}),children:"Clear filter"}):null]}),c("div",{children:[l("label",{htmlFor:" hh",className:"form-label ",children:"Email"}),l(T,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:Ge,value:Ge.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}),onChange:e=>{U({target:{name:"email",value:e.value}})},styles:q,id:"hh",placeholder:"Select..."}),t!=null&&t.email?l("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>I({...t,email:""}),children:"Clear filter"}):null]}),c("div",{children:[l("label",{htmlFor:" hh",className:"form-label ",children:"Contact no"}),l(T,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:Ve,value:Ve.filter(function(e){if((t==null?void 0:t.contactno)!=="")return e.value===(t==null?void 0:t.contactno)}),onChange:e=>{U({target:{name:"contactno",value:e.value}})},styles:q,id:"hh",placeholder:"Select..."}),t!=null&&t.contactno?l("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>I({...t,contactno:""}),children:"Clear filter"}):null]}),c("div",{children:[l("label",{htmlFor:" hh",className:"form-label ",children:"Passport ID no"}),l(T,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:ze,value:ze.filter(function(e){if((t==null?void 0:t.passportidno)!=="")return e.value===(t==null?void 0:t.passportidno)}),onChange:e=>{U({target:{name:"passportidno",value:e.value}})},styles:q,id:"hh",placeholder:"Select..."}),t!=null&&t.passportidno?l("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>I({...t,passportidno:""}),children:"Clear filter"}):null]}),c("div",{children:[l("label",{htmlFor:" hh",className:"form-label ",children:"National ID no"}),l(T,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:Ye,value:Ye.filter(function(e){if((t==null?void 0:t.nationalidno)!=="")return e.value===(t==null?void 0:t.nationalidno)}),onChange:e=>{U({target:{name:"nationalidno",value:e.value}})},styles:q,id:"hh",placeholder:"Select..."}),t!=null&&t.nationalidno?l("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>I({...t,nationalidno:""}),children:"Clear filter"}):null]}),c("div",{children:[l("label",{htmlFor:" hh",className:"form-label ",children:"Assigned Agents"}),l(T,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:Je,value:Je.filter(function(e){if((t==null?void 0:t.employee_email)!=="")return e.value===(t==null?void 0:t.employee_email)}),onChange:e=>{U({target:{name:"employee_email",value:e.value}})},styles:q,id:"hh",placeholder:"Select..."}),t!=null&&t.employee_email?l("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>I({...t,employee_email:""}),children:"Clear filter"}):null]})]}),c("div",{className:`flex ${he===!0?"filter-show mt-6 pointer-events-auto":"filter-remove mt-0 pointer-events-none"} justify-end gap-x-[10px]`,children:[l("button",{className:"btn btn-secondary  text-center",type:"button",onClick:()=>Kl(),children:"Clear filter"}),l("button",{className:"btn btn-dark  text-center",type:"button",onClick:()=>N(t),children:"Search"})]}),l(Ol,{showModal:f,handleClose:il,loaderModal:n,dataRole:h,linkedData:Xe,handleDeleteData:dl,dataId:Oe,moduleName:"Customer",bookingData:Fe,PropertyData:De,tenantcontractData:we,propertyOwnerData:el,userName:ll}),l(Rl,{handleCloseAssignModal:rl,assignModal:al,selectedCustomerId:tl,moduleName:"Assign an Agent",employeeAgent:ml,addAgentToCustomer:vl,selectedAgent:Be,setSelectedAgent:re,employee_id:pl,setEmployee_id:Ie}),l(Fl,{showNotesModal:xl,handleCloseNoteModal:bl,moduleName:"Notes",allNotes:fl,handleChangeData:gl,notesData:Ae,handleAddNotesData:yl}),l("div",{className:"overflow-x-auto -mx-6 mt-6",children:l("div",{className:"inline-block min-w-full align-middle",children:l("div",{className:" ",children:c("table",{className:"min-w-[140%] overflow-x-scroll divide-y divide-slate-100 table-fixed dark:divide-slate-700",..._l,children:[l("thead",{className:"bg-slate-200 dark:bg-slate-700",children:Hl.map(e=>l("tr",{...e.getHeaderGroupProps(),children:e.headers.map(s=>s.Header==="action"&&!((h==null?void 0:h.readcustomer)===!0||(h==null?void 0:h.updatecustomer)===!0||(h==null?void 0:h.deletecustomer)===!0)?l("th",{}):c("th",{...s.getHeaderProps(s.getSortByToggleProps()),scope:"col",className:"table-th",children:[s.render("Header"),l("span",{children:s.isSorted?s.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),l("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...$l,children:jl.map(e=>(ql(e),l("tr",{...e.getRowProps(),children:e.cells.map(s=>l("td",{...s.getCellProps(),className:"table-td",children:s.render("Cell")}))})))})]})})})}),c("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[c("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[l("select",{className:"form-control py-2 w-max",value:Ll,onChange:e=>Ml(Number(e.target.value)),children:[10,25,50].map(e=>c("option",{value:e,children:["Show ",e]},e))}),c("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",c("span",{children:[qe+1," of ",Te.length]})]})]}),c("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[l("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${xe?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>$e(0),disabled:!xe,children:l(P,{icon:"heroicons:chevron-double-left-solid"})})}),l("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${xe?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Bl(),disabled:!xe,children:"Prev"})}),Te.map((e,s)=>l("li",{children:l("button",{href:"#","aria-current":"page",className:` ${s===qe?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>$e(s),children:e+1})},s)),l("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${ve?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Pl(),disabled:!ve,children:"Next"})}),l("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{onClick:()=>$e(El-1),disabled:!ve,className:` ${ve?"":"opacity-50 cursor-not-allowed"}`,children:l(P,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})})},vs=()=>{const[A,C]=u.exports.useState([]),[$,p]=u.exports.useState(!1),[k,i]=u.exports.useState(""),[N,m]=u.exports.useState("");u.exports.useEffect(()=>{p(!0),(async()=>{const n=await(await fetch("http://dev-rare.srp.ai/users/api/customer/withoutdate?sort=descending&page=0&perPage=all")).json();C(n==null?void 0:n.users),i(n==null?void 0:n.users),m(n==null?void 0:n.users),p(!1)})()},[]);const r=()=>{p(!0),(async()=>{const n=await(await fetch("http://dev-rare.srp.ai/users/api/customer/withoutdate?sort=descending&page=0&perPage=all")).json();C(n==null?void 0:n.users),i(n==null?void 0:n.users),m(n==null?void 0:n.users),p(!1)})()};function x(f){if(f){const g=N.filter(n=>{let v=!0;return f.firstname&&n.firstname!==f.firstname&&(v=!1),f.lastname&&n.lastname!==f.lastname&&(v=!1),f.email&&n.email!==f.email&&(v=!1),f.contactno&&n.contactno!==f.contactno&&(v=!1),f.passportidno&&n.passportidno!==f.passportidno&&(v=!1),f.nationalidno&&n.nationalidno!==f.nationalidno&&(v=!1),f.employee_email&&n.employee_email!==f.employee_email&&(v=!1),v});C(g),p(!1)}else C(N)}const h=async()=>{C(N),p(!1)};return l(_,{children:$===!1&&(N==null?void 0:N.length)?l("div",{className:" space-y-5",children:l(Dl,{pagelink:"/add-customer",linktitle:"Add new Customer",title:"All Customer",allCustomers:A,forFilterData:k,onDataUpdate:r,handleFilterSearch:x,handleClearFilter:h})}):l(Ke,{})})};export{vs as default};
