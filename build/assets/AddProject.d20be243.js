import{bW as w,z as F,ad as O,r as c,v as $,w as v,x as E,b as n,F as T,j as a,s as V,C as B,an as H,T as f,y as L,H as N,Q as y}from"./index.50bb4499.js";const U={option:(o,l)=>({...o,fontSize:"14px"})},M=()=>{const{id:o}=w(),l=F(),d=O(),[e,i]=c.exports.useState(""),p=t=>{const{name:s,value:r}=t.target;i({...e,[s]:r})};c.exports.useEffect(()=>{(async()=>{if(o){const r=await(await fetch(`http://dev-rare.srp.ai/projectname/${o}`)).json();r&&i(r)}})()},[o]);const[u,b]=c.exports.useState([]);c.exports.useEffect(()=>{fetch("http://dev-rare.srp.ai/community").then(t=>t.json()).then(t=>{const s=t==null?void 0:t.map(r=>({label:r.communityname,value:r._id}));b(s)})},[]);const[m,x]=c.exports.useState(""),[h,C]=c.exports.useState("");let P={projectName:"Project Name",communityname:"Community Name"};const k=$({projectName:v().required(m),communityname:v().required(h)}).required(),{register:j,formState:{errors:z}}=E({resolver:L(k)}),g=()=>{let t=!1,s={projectName:x,communityname:C};return s&&Object.keys(s).length&&Object.keys(s).map(r=>{s[r](""),e[r]||(s[r](P[r]+" is required"),t=!0)}),t},S=async()=>{!(e!=null&&e.projectName)||!(e!=null&&e.communityname)?g():(await N.post("http://dev-rare.srp.ai/projectname",e),y.success(`${e.projectName} created successfully`,{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout(()=>{l("/all-project")},1500))},q=async t=>{t.preventDefault(),!(e!=null&&e.projectName)||!(e!=null&&e.communityname)?g():(await N.patch("http://dev-rare.srp.ai/projectname",e),y.success(`${e.projectName} updated successfully`,{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout(()=>{l("/all-project")},1500))};return n(T,{children:[a(V,{}),a(B,{title:"Project Form",children:a("div",{children:n("form",{className:"lg:grid-cols-2 grid gap-5 grid-cols-1 ",children:[n("div",{className:"w-[100%] col-span-2",children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Community Name"}),a(H,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:u,value:u.filter(function(t){return t.value===(e==null?void 0:e.communityid)}),onChange:t=>{i({...e,communityid:t==null?void 0:t.value,communityname:t==null?void 0:t.label})},styles:U,id:"hh"}),a("div",{className:" mt-2 text-danger-500 block text-sm",children:h})]}),n("div",{children:[a(f,{name:"projectName",label:"Project Name",type:"text",placeholder:"Enter Project name",register:j,error:m,value:e.projectName||"",onChange:p}),a("div",{className:" mt-2 text-danger-500 block text-sm",children:m})]}),a(f,{name:"projectCode",label:"Project Code",type:"text",register:j,placeholder:"Enter Project code",value:e.projectCode||"",onChange:p}),n("div",{className:"lg:col-span-2 col-span-1",children:[d.pathname===`/update-project/${o}`?a("div",{className:"ltr:text-right rtl:text-left",children:a("button",{className:"btn btn-dark  text-center",onClick:q,type:"button",children:"Update"})}):null,d.pathname==="/add-project"?a("div",{className:"ltr:text-right rtl:text-left",children:a("button",{className:"btn btn-dark  text-center",onClick:S,type:"button",children:"Submit"})}):null]})]})})})]})};export{M as default};
