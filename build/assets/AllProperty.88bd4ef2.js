import{R as Fe,j as t,F as _,c9 as fl,r as h,b,C as vl,L,I as K,an as ue,ca as we,cb as Wn,H as Tn,cj as qn,ck as Xn}from"./index.5e55c1ba.js";import{T as De}from"./Tooltip.4c4c7a86.js";import{r as de}from"./index.c89ffb9d.js";import{G as Gn}from"./GlobalFilter.2b1d860a.js";import{G as zn}from"./group-chart-1.095f32b1.js";import{D as Ce}from"./DeleteParagraph.da4866a3.js";/* empty css                     */import"./react-apexcharts.min.f6d70275.js";const Yn=Fe.forwardRef(({indeterminate:A,...Y},w)=>{const v=Fe.useRef(),R=w||v;return Fe.useEffect(()=>{R.current.indeterminate=A},[R,A]),t(_,{children:t("input",{type:"checkbox",ref:R,...Y,className:"table-checkbox",indeterminate:A?"true":"false"})})}),re={option:(A,Y)=>({...A,fontSize:"14px"})},Vn=({showModal:A,handleClose:Y,loaderModal:w,linkedData:v,handleDeleteData:R,dataId:j,moduleName:o,booking:$,managementcontract:H,tenantcontract:P,rentpurchase:S,unitNumber:ee,dataRole:f})=>t("div",{className:"thumbnail-container",children:A&&t("div",{className:"modal-overlay-property",children:b("div",{className:"modal-new w-[850px]",children:[b("div",{className:"flex items-center justify-between mb-[20px] pb-[7px] modal-border-bottom",children:[t("h5",{className:" text-[18px] capitalize",children:`Are You Sure you Want to Delete this ${o}?`}),t("img",{src:Wn,alt:"cancelIcon",className:"w-[20px] cursor-pointer h-[20px]",onClick:Y})]}),w===!0?t(we,{}):b(_,{children:[v!=null&&v.length?t("div",{className:"data-list-modal",children:b(_,{children:[b("h4",{className:"text-[16px] mb-[10px]",children:[t("span",{className:"font-bold",children:"Property"})," ",ee," is linked with the following modules:"]}),$!=null&&$.length?t("ul",{className:" mb-[10px] text-start",children:t("li",{className:"list-disc ml-[30px]",children:b("div",{className:"flex items-center",children:[t("span",{className:"font-semibold mr-[5px]",children:"Booking: "}),(f==null?void 0:f.deletebooking)===!0?t(_,{children:$==null?void 0:$.map((x,O)=>b(L,{className:" mr-[5px] hover:underline",to:`/view-booking/${x==null?void 0:x._id}?delete=true`,children:[x==null?void 0:x.bookingnumber,O!==$.length-1?",":null]},O+1))}):t(Ce,{moduleName:o,linkedName:"Booking"})]})})}):null,P!=null&&P.length?t("ul",{className:" mb-[10px] text-start",children:t("li",{className:"list-disc ml-[30px]",children:b("div",{className:"flex items-center",children:[t("span",{className:"font-semibold mr-[5px]",children:"Tenant Contract: "}),(f==null?void 0:f.deletetenant)===!0?t(_,{children:P==null?void 0:P.map((x,O)=>b(L,{className:" mr-[5px] hover:underline",to:`/view-tenantcontract/${x==null?void 0:x._id}?delete=true`,children:["TC-"+(x==null?void 0:x._id.slice(0,6)),O!==P.length-1?",":null]},O+1))}):t(Ce,{moduleName:o,linkedName:"Tenancy Contract"})]})})}):null,S!=null&&S.length?t("ul",{className:" mb-[10px] text-start",children:t("li",{className:"list-disc ml-[30px]",children:b("div",{className:"flex items-center",children:[t("span",{className:"font-semibold mr-[5px]",children:"Availability Sheet: "}),(f==null?void 0:f.deleteavailability)===!0?t(_,{children:S==null?void 0:S.map((x,O)=>b(L,{className:" mr-[5px] hover:underline",to:`/view-availability-sheet/${x==null?void 0:x._id}?delete=true`,children:["AS-"+(x==null?void 0:x._id.slice(0,6)),O!==S.length-1?",":null]},O+1))}):t(Ce,{moduleName:o,linkedName:"Availability Sheet"})]})})}):null,H!=null&&H.length?t("ul",{className:" mb-[10px] text-start",children:t("li",{className:"list-disc ml-[30px]",children:b("div",{className:"flex items-center",children:[t("span",{className:"font-semibold mr-[5px]",children:"Management Contract: "}),(f==null?void 0:f.deletemanagement)===!0?t(_,{children:H==null?void 0:H.map((x,O)=>b(L,{className:" mr-[5px] hover:underline",to:`/view-managementcontract/${x==null?void 0:x._id}?delete=true`,children:["MC-"+(x==null?void 0:x._id.slice(0,6)),O!==H.length-1?",":null]},O+1))}):t(Ce,{moduleName:o,linkedName:"Management Contract"})]})})}):null]})}):null,b("div",{className:"mb-[15px] max-h-[700px] pr-[15px]",children:[t(_,{}),t(_,{}),(v==null?void 0:v.length)||(S==null?void 0:S.length)||(P==null?void 0:P.length)||(H==null?void 0:H.length)||($==null?void 0:$.length)?t("p",{className:" mt-[10px]",children:`This ${o} is already linked. Please first delete these entries which are linked it with`}):null,!(v!=null&&v.length)&&!(S!=null&&S.length)&&!(P!=null&&P.length)&&!(H!=null&&H.length)&&!($!=null&&$.length)?t("button",{className:"btn btn inline-flex justify-center btn-danger ",onClick:()=>R(j),children:"Delete"}):null]})]})]})})}),Rn=({title:A,linktitle:Y,pagelink:w,allData:v,handleDataUpdate:R,managementData:j,forFilterData:o,handleFilterSearch:$,handleClearFilter:H,filterLoader:P})=>{const S=localStorage.getItem("isAuth"),ee=JSON.parse(S),{data:f}=fl(ee==null?void 0:ee.roleid),[x,O]=h.exports.useState(!1),[Q,G]=h.exports.useState(!1),[z,ke]=h.exports.useState(""),[gl,xl]=h.exports.useState(""),[yl,oe]=h.exports.useState(""),[Nl,pe]=h.exports.useState(""),[Cl,me]=h.exports.useState(""),[kl,be]=h.exports.useState(""),[_l,jl]=h.exports.useState(""),[M,J]=h.exports.useState(""),[a,C]=h.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",customerid:""}),[s,el]=h.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",customerid:""});console.log("groupUnits",s);const[W,Z]=h.exports.useState(""),[Sl,ll]=h.exports.useState(""),[T,F]=h.exports.useState(""),[Al,$l]=h.exports.useState(""),[q,ne]=h.exports.useState(""),[Hl,Pl]=h.exports.useState(""),[X,le]=h.exports.useState(""),te=e=>{const{name:l,value:n}=e.target;C(c=>({...c,[l]:n})),el(c=>({...c,[l]:n}))};h.exports.useEffect(()=>(s.unitnumber&&(Z(s.unitnumber),F(s.unitnumber),ne(s.unitnumber),le(s.unitnumber)),s.customerid&&(J(s.customerid),Z(s.customerid),F(s.customerid),ne(s.customerid)),s.communityid&&(J(s.communityid),F(s.communityid),ne(s.communityid),le(s.communityid)),s.projectnameid&&(J(s.projectnameid),Z(s.projectnameid),ne(s.projectnameid),le(s.projectnameid)),s.buildingid&&(J(s.buildingid),Z(s.buildingid),F(s.buildingid),le(s.buildingid)),()=>{Z(""),F(""),ne(""),le(""),J("")}),[s]);const D=e=>{const{name:l,value:n}=e.target;s.unitnumber&&(Z(s.unitnumber),C({...a,[l]:n}),ll({...a,[l]:n})),s.customerid&&(J(s.customerid),C({...a,[l]:n}),Z(s.customerid)),s.communityid&&(J(s.communityid),C({...a,[l]:n})),s.projectnameid&&(J(s.projectnameid),C({...a,[l]:n})),s.buildingid&&(J(s.buildingid),C({...a,[l]:n}))},he=e=>{const{name:l,value:n}=e.target;s.unitnumber&&C({...a,[l]:n}),s.customerid&&(C({...a,[l]:n}),F(s.customerid)),s.communityid&&(C({...a,[l]:n}),F(s.communityid)),s.buildingid&&C({...a,[l]:n})},fe=e=>{const{name:l,value:n}=e.target;s.unitnumber&&C({...a,[l]:n}),s.customerid&&C({...a,[l]:n}),s.communityid&&C({...a,[l]:n}),s.projectnameid&&C({...a,[l]:n})},ve=e=>{const{name:l,value:n}=e.target;s.unitnumber&&C({...a,[l]:n}),s.communityid&&C({...a,[l]:n}),s.projectnameid&&C({...a,[l]:n}),s.buildingid&&C({...a,[l]:n})};function k(e){var c,d;const l={},n=[];for(const u of e){const p=`${(c=u==null?void 0:u.label)==null?void 0:c.trim()}|${(d=u==null?void 0:u.value)==null?void 0:d.trim()}`;l[p]||(n.push(u),l[p]=!0)}return n}const[ge,Ol]=h.exports.useState(!1),Bl=async e=>{if(O(!0),G(!0),e)try{const l=`http://dev-rare.srp.ai/booking/api/allbooking/forproperty?propertyid=${e==null?void 0:e._id}`,n=`http://dev-rare.srp.ai/managementcontract/api/propertydelete?propertyid=${e==null?void 0:e._id}`,c=`http://dev-rare.srp.ai/tenantcontract/api/propertydelete?propertyid=${e==null?void 0:e._id}`,d=`http://dev-rare.srp.ai/rentpurchase/api/propertydelete?porpertyid=${e==null?void 0:e._id}`,u=await fetch(l);if(!u.ok&&u.status!==400)throw new Error(`API 1 failed with status: ${u.status}`);const p=u.status===400?[]:await u.json(),m=await fetch(n);if(!m.ok&&m.status!==400)throw new Error(`API 2 failed with status: ${m.status}`);const r=m.status===400?[]:await m.json(),g=await fetch(c);if(!g.ok&&g.status!==400)throw new Error(`API 2 failed with status: ${g.status}`);const N=g.status===400?[]:await g.json(),I=await fetch(d);if(!I.ok&&I.status!==400)throw new Error(`API 2 failed with status: ${I.status}`);const U=I.status===400?[]:await I.json(),V=[...p,...r,...N,...U];p!=null&&p.length?oe(p):oe(""),r!=null&&r.length?pe(r):pe(""),N!=null&&N.length?me(N):me(""),U!=null&&U.length?be(U):be(""),ke(V),xl(e==null?void 0:e._id),jl(e==null?void 0:e.unitnumber),G(!1)}catch(l){console.error("Error fetching data:",l),G(!1)}},Il=()=>{O(!1),oe(""),pe(""),me(""),be("")},Ul=async e=>{try{await Tn.patch("http://dev-rare.srp.ai/property/api/availability",{_id:e,softdelete:!0}),R(),oe(""),pe(""),me(""),be("")}catch(l){console.log(l,"error")}},El=[{Header:"Sr no",accessor:"id",Cell:({row:e,flatRows:l})=>t("span",{children:l.indexOf(e)+1})},{Header:"Listed for",accessor:"propertystatus",Cell:e=>{var n,c,d,u,p,m,r,g,N,I,U,V,ae,se,ie,ce,i,E,rl;let l;return((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((c=e==null?void 0:e.cell)==null?void 0:c.value)!=="Multiple"?l=(d=e==null?void 0:e.cell)==null?void 0:d.value:l="Not Available",t(_,{children:((r=(m=(p=(u=e==null?void 0:e.cell)==null?void 0:u.row)==null?void 0:p.original)==null?void 0:m.multivaluation)==null?void 0:r.length)&&((I=(N=(g=e==null?void 0:e.cell)==null?void 0:g.row)==null?void 0:N.original)==null?void 0:I.multi_propertyvaluation)&&((U=e==null?void 0:e.cell)==null?void 0:U.value)==="Multiple"?t(_,{children:(ie=(se=(ae=(V=e==null?void 0:e.cell)==null?void 0:V.row)==null?void 0:ae.original)==null?void 0:se.multivaluation)==null?void 0:ie.map((B,Ze)=>t("span",{className:`block w-full ${Ze!==0?"mt-[10px]":""} cursor-pointer`,children:t("span",{onClick:()=>{var ol,pl,ml,bl,hl;return handleMultiPropertyStatus(B==null?void 0:B.propertystatus,(pl=(ol=e==null?void 0:e.cell)==null?void 0:ol.row)==null?void 0:pl.original,(hl=(bl=(ml=e==null?void 0:e.cell)==null?void 0:ml.row)==null?void 0:bl.original)==null?void 0:hl._id,Ze,B==null?void 0:B.un_listed)},className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 
                                                        ${(B==null?void 0:B.propertystatus)==="Not Available"&&(B==null?void 0:B.un_listed)===!1?"text-danger-500 bg-danger-500":"text-success-500 bg-success-500"} `,children:"Listed for "+(B==null?void 0:B.propertystatus)})},Ze+1))}):t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((ce=e==null?void 0:e.cell)==null?void 0:ce.value)&&((rl=(E=(i=e==null?void 0:e.cell)==null?void 0:i.row)==null?void 0:E.original)==null?void 0:rl.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"}`,children:l!=="Not Available"?"Listed for "+l:l})})})}},{Header:"listed / unlisted",accessor:"un_listed",Cell:e=>{var l,n,c,d,u,p,m,r,g,N,I,U,V,ae,se,ie,ce;return t(_,{children:((d=(c=(n=(l=e==null?void 0:e.cell)==null?void 0:l.row)==null?void 0:n.original)==null?void 0:c.multivaluation)==null?void 0:d.length)&&((m=(p=(u=e==null?void 0:e.cell)==null?void 0:u.row)==null?void 0:p.original)==null?void 0:m.propertystatus)==="Multiple"?t(_,{children:(I=(N=(g=(r=e==null?void 0:e.cell)==null?void 0:r.row)==null?void 0:g.original)==null?void 0:N.multivaluation)==null?void 0:I.map((i,E)=>t(_,{children:(i==null?void 0:i.propertystatus)==="Rent"?b(_,{children:[(i==null?void 0:i.contract_enddate)&&new Date(i==null?void 0:i.contract_enddate)>new Date&&(i==null?void 0:i.un_listed)===!1?t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"bg-info-500 text-info-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:"upcoming"})},E+1):null,(i==null?void 0:i.contract_enddate)&&new Date(i==null?void 0:i.contract_enddate)<=new Date&&(i==null?void 0:i.un_listed)===!1?t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:"listed"})},E+1):null,((i==null?void 0:i.contract_enddate)===""||!(i!=null&&i.contract_enddate))&&(i==null?void 0:i.un_listed)===!1?t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:"listed"})},E+1):null,(new Date(i==null?void 0:i.contract_enddate)<=new Date||new Date(i==null?void 0:i.contract_enddate)>new Date||(i==null?void 0:i.contract_enddate)===""||!(i!=null&&i.contract_enddate))&&(i==null?void 0:i.un_listed)===!0?t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:"unlisted"})},E+1):null]}):t("span",{className:`block w-full ${E!==0?"mt-[10px]":""} `,children:t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${(i==null?void 0:i.un_listed)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                                     ${(i==null?void 0:i.un_listed)===!0?"text-danger-500 bg-danger-500":""}`,children:(i==null?void 0:i.un_listed)===!0?"unlisted":"listed"})},E+1)}))}):t("span",{className:"block w-full",children:(ae=(V=(U=e==null?void 0:e.cell)==null?void 0:U.row)==null?void 0:V.original)!=null&&ae.propertystatus?t("span",{className:`inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((se=e==null?void 0:e.cell)==null?void 0:se.value)===!1?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} 
                                         ${((ie=e==null?void 0:e.cell)==null?void 0:ie.value)===!0?"text-danger-500 bg-danger-500":""}`,children:((ce=e==null?void 0:e.cell)==null?void 0:ce.value)===!0?"Unlisted":"listed"}):t("span",{className:"inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 text-danger-500 bg-danger-500",children:"No"})})})}},{Header:"Unit Number",accessor:"unitnumber",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"Owner Name",accessor:"owner_name",Cell:e=>{var l,n;return t("div",{children:t("span",{className:"inline-flex items-center",children:t("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})})})}},{Header:"Owner Representative",accessor:"owner_representative_name",Cell:e=>{var l,n;return t("div",{children:t("span",{className:"inline-flex items-center",children:t("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})})})}},{Header:"Project Name",accessor:"project_name",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"building name",accessor:"building_name",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"community name",accessor:"community_name",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"sub type name",accessor:"subtype_name",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"usage",accessor:"usage",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"plot size",accessor:"plotsize",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"build up area",accessor:"builduparea",Cell:e=>{var l,n,c,d,u,p,m,r,g;return t("span",{className:"normal-case",children:(l=e==null?void 0:e.cell)!=null&&l.value?((n=e==null?void 0:e.cell)==null?void 0:n.value)+" "+(((c=e==null?void 0:e.cell)==null?void 0:c.value)&&((p=(u=(d=e==null?void 0:e.cell)==null?void 0:d.row)==null?void 0:u.original)==null?void 0:p.measure_units)?(g=(r=(m=e==null?void 0:e.cell)==null?void 0:m.row)==null?void 0:r.original)==null?void 0:g.measure_units:""):"Not Available"})}},{Header:"owner association",accessor:"ownerassociation",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"no bathroom",accessor:"nobathroom",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"half bathroom",accessor:"halfbathroom",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"furnished",accessor:"furnished",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"kitchen",accessor:"kitchen",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"no parking",accessor:"noparking",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"balcony",accessor:"balcony",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"dewa premises",accessor:"dewapremises",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"district",accessor:"district",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"parking bay",accessor:"parkingbay",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"property view",accessor:"propertyview",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"purchase date",accessor:"purchasedate",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"})}},{Header:"Total no of OWNER NAME DEED",accessor:"no_ownernamedeed",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"purchase value",accessor:"purchasevaue",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?parseFloat((n=e==null?void 0:e.cell)==null?void 0:n.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"Not Available"})}},{Header:"Title Deed Document",accessor:"titledeeddocument",Cell:e=>{var l,n,c,d,u,p,m,r,g,N,I,U,V;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==""&&((c=e==null?void 0:e.cell)==null?void 0:c.value)!==void 0&&((d=e==null?void 0:e.cell)==null?void 0:d.value)!==null&&((u=e==null?void 0:e.cell)==null?void 0:u.value)!=="undefined"&&((p=e==null?void 0:e.cell)==null?void 0:p.value)!=="null"?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((m=e==null?void 0:e.cell)==null?void 0:m.value)&&((r=e==null?void 0:e.cell)==null?void 0:r.value)!==""&&((g=e==null?void 0:e.cell)==null?void 0:g.value)!==void 0&&((N=e==null?void 0:e.cell)==null?void 0:N.value)!==null&&((I=e==null?void 0:e.cell)==null?void 0:I.value)!=="undefined"&&((U=e==null?void 0:e.cell)==null?void 0:U.value)!=="null"?t("a",{className:"flex gap-x-[5px] items-center",href:(V=e==null?void 0:e.cell)==null?void 0:V.value,target:"_blank",children:"veiw documents"}):"Not Available"})})}},{Header:"Youtube Video",accessor:"youtubelink",Cell:e=>{var l,n,c,d,u;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((c=e==null?void 0:e.cell)==null?void 0:c.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)!==""?b("a",{className:"flex gap-x-[5px] items-center",href:(u=e==null?void 0:e.cell)==null?void 0:u.value,target:"_blank",children:[t(K,{icon:"heroicons-outline:eye"}),"View Video"]}):"Not Available"})})}},{Header:"Google location",accessor:"propertylocation",Cell:e=>{var l,n,c,d,u;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((c=e==null?void 0:e.cell)==null?void 0:c.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)!==""?b("a",{className:"flex gap-x-[5px] items-center",href:(u=e==null?void 0:e.cell)==null?void 0:u.value,target:"_blank",children:[t(K,{icon:"heroicons-outline:eye"}),"View Location"]}):"Not Available"})})}},{Header:"total bathroom",accessor:"totalbathroom",Cell:e=>{var l,n,c,d,u,p,m;return t(_,{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==void 0&&((c=e==null?void 0:e.cell)==null?void 0:c.value)!=="undefined"?t("span",{children:((d=e==null?void 0:e.cell)==null?void 0:d.value)&&((u=e==null?void 0:e.cell)==null?void 0:u.value)!==void 0&&((p=e==null?void 0:e.cell)==null?void 0:p.value)!=="undefined"?(m=e==null?void 0:e.cell)==null?void 0:m.value:"Not Available"}):t("span",{className:"block w-full",children:t("span",{className:" inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 text-danger-500 bg-danger-500 ",children:"Missing"})})})}},{Header:"total bedroom",accessor:"totalbedroom",Cell:e=>{var l,n,c,d,u,p,m;return t(_,{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)&&((n=e==null?void 0:e.cell)==null?void 0:n.value)!==void 0&&((c=e==null?void 0:e.cell)==null?void 0:c.value)!=="undefined"?t("span",{children:((d=e==null?void 0:e.cell)==null?void 0:d.value)&&((u=e==null?void 0:e.cell)==null?void 0:u.value)!==void 0&&((p=e==null?void 0:e.cell)==null?void 0:p.value)!=="undefined"?(m=e==null?void 0:e.cell)==null?void 0:m.value:"Not Available"}):t("span",{className:"block w-full",children:t("span",{className:" inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 text-danger-500 bg-danger-500 ",children:"Missing"})})})}},{Header:"street number",accessor:"streetnumber",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"maid room",accessor:"maidroom",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"store room",accessor:"storeroom",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"bed room en suite",accessor:"bedroomensuite",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"bath room en suite",accessor:"bathroomensuite",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"driver room",accessor:"driverroom",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"other room",accessor:"otherroom",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"en suite",accessor:"ensuite",Cell:e=>{var l;return t("span",{children:((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"Available":"Not Available"})}},{Header:"property images",accessor:"propertyimages",Cell:e=>{var l,n,c,d,u,p,m,r,g,N;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:n.length)===0||((c=e==null?void 0:e.cell)==null?void 0:c.value[0])===""?"text-danger-500 bg-danger-500":((u=(d=e==null?void 0:e.cell)==null?void 0:d.value)==null?void 0:u.length)>0&&((m=(p=e==null?void 0:e.cell)==null?void 0:p.value)==null?void 0:m.length)<10?"badge bg-info-500 text-info-500 bg-opacity-[0.12] pill":"text-success-500 bg-success-500"} `,children:((r=e==null?void 0:e.cell)==null?void 0:r.value[0])===""?"0":(N=(g=e==null?void 0:e.cell)==null?void 0:g.value)==null?void 0:N.length})})}},{Header:"floor plan images",accessor:"floorplan",Cell:e=>{var l,n,c,d,u,p,m,r,g,N;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:n.length)===0||((c=e==null?void 0:e.cell)==null?void 0:c.value[0])===""?"text-danger-500 bg-danger-500":((u=(d=e==null?void 0:e.cell)==null?void 0:d.value)==null?void 0:u.length)>0&&((m=(p=e==null?void 0:e.cell)==null?void 0:p.value)==null?void 0:m.length)<10?"badge bg-info-500 text-info-500 bg-opacity-[0.12] pill":"text-success-500 bg-success-500"} `,children:((r=e==null?void 0:e.cell)==null?void 0:r.value[0])===""?"0":(N=(g=e==null?void 0:e.cell)==null?void 0:g.value)==null?void 0:N.length})})}},{Header:"unit plan attachment",accessor:"unitplanattachment",Cell:e=>{var l,n,c,d,u,p,m,r,g,N;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:n.length)===0||((c=e==null?void 0:e.cell)==null?void 0:c.value[0])===""?"text-danger-500 bg-danger-500":((u=(d=e==null?void 0:e.cell)==null?void 0:d.value)==null?void 0:u.length)>0&&((m=(p=e==null?void 0:e.cell)==null?void 0:p.value)==null?void 0:m.length)<10?"badge bg-info-500 text-info-500 bg-opacity-[0.12] pill":"text-success-500 bg-success-500"} `,children:((r=e==null?void 0:e.cell)==null?void 0:r.value[0])===""?"0":(N=(g=e==null?void 0:e.cell)==null?void 0:g.value)==null?void 0:N.length})})}},{Header:"plot plan attachment",accessor:"plotplanattachment",Cell:e=>{var l,n,c,d,u,p,m,r,g,N;return t("span",{className:"block w-full",children:t("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:n.length)===0||((c=e==null?void 0:e.cell)==null?void 0:c.value[0])===""?"text-danger-500 bg-danger-500":((u=(d=e==null?void 0:e.cell)==null?void 0:d.value)==null?void 0:u.length)>0&&((m=(p=e==null?void 0:e.cell)==null?void 0:p.value)==null?void 0:m.length)<10?"badge bg-info-500 text-info-500 bg-opacity-[0.12] pill":"text-success-500 bg-success-500"} `,children:((r=e==null?void 0:e.cell)==null?void 0:r.value[0])===""?"0":(N=(g=e==null?void 0:e.cell)==null?void 0:g.value)==null?void 0:N.length})})}},{Header:"created-by",accessor:"employee_email_createdBy",Cell:e=>{var l,n;return t("span",{className:"normal-case",children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"created-on",accessor:"createdAt",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"})}},{Header:"updated-by",accessor:"employee_email_updatedBy",Cell:e=>{var l,n;return t("span",{className:"normal-case",children:(l=e==null?void 0:e.cell)!=null&&l.value?(n=e==null?void 0:e.cell)==null?void 0:n.value:"Not Available"})}},{Header:"updated-on",accessor:"updatedAt",Cell:e=>{var l,n;return t("span",{children:(l=e==null?void 0:e.cell)!=null&&l.value?new Date((n=e==null?void 0:e.cell)==null?void 0:n.value).toDateString():"Not Available"})}},{Header:"action",accessor:e=>`${e._id}`,Cell:e=>{const l=localStorage.getItem("isAuth"),n=JSON.parse(l),{data:c}=fl(n==null?void 0:n.roleid);if(!c)return null;const d=(c==null?void 0:c.readpropert)===!0,u=(c==null?void 0:c.updatepropert)===!0,p=(c==null?void 0:c.deletepropert)===!0;return b("div",{className:"flex space-x-3 rtl:space-x-reverse",children:[d&&t(De,{content:"View",placement:"top",arrow:!0,animation:"shift-away",children:t(L,{className:"action-btn",to:`/view-property/${e==null?void 0:e.cell.value}`,type:"button",children:t(K,{icon:"heroicons:eye"})})}),u&&t(De,{content:"Edit",placement:"top",arrow:!0,animation:"shift-away",children:t(L,{to:`/update-property/${e==null?void 0:e.cell.value}`,className:"action-btn",type:"button",children:t(K,{icon:"heroicons:pencil-square"})})}),p&&t(De,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:t("button",{className:"action-btn",type:"button",onClick:()=>{var m,r;return Bl((r=(m=e==null?void 0:e.cell)==null?void 0:m.row)==null?void 0:r.original)},children:t(K,{icon:"heroicons:trash"})})})]})}}],Ll=h.exports.useMemo(()=>El,[]),Ml=h.exports.useMemo(()=>v),[y,nl]=h.exports.useState(""),[tl,_e]=h.exports.useState(!1),[Qn,al]=h.exports.useState(!1),[sl,il]=h.exports.useState(!1),[cl,Wl]=h.exports.useState();h.exports.useEffect(()=>{var l,n;let e=0;for(let c=0;c<(v==null?void 0:v.length);c++){let d=parseFloat((l=v[c])!=null&&l.purchasevaue?(n=v[c])==null?void 0:n.purchasevaue:0);e+=d}Wl(e)},[v==null?void 0:v.length]);const Tl={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#00EBFF"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},ql={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#FB8F65"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},Xl={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#5743BE"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},Gl=[{name:Tl,title:"Managed Properties",count:j!=null&&j.length?j==null?void 0:j.length:0,bg:"bg-[#E5F9FF] dark:bg-slate-900	"},{name:ql,title:"Non-Managed Properties",count:(j==null?void 0:j.length)&&(v==null?void 0:v.length)?Math.abs((j==null?void 0:j.length)-(v==null?void 0:v.length)):0,bg:"bg-[#FFEDE5] dark:bg-slate-900	"},{name:Xl,title:"Total Properties Purchase Valuation",count:cl?cl.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":0,bg:"bg-[#EAE5FF] dark:bg-slate-900	"}];h.exports.useEffect(()=>{_e(!1),nl(""),al(!1)},[v]);const zl=de.exports.useTable({columns:Ll,data:Ml,initialState:{pageIndex:0,pageSize:50}},de.exports.useGlobalFilter,de.exports.useSortBy,de.exports.usePagination,de.exports.useRowSelect,e=>{e.visibleColumns.push(l=>[{id:"selection",Header:({getToggleAllRowsSelectedProps:n})=>t("div",{children:t(Yn,{...n()})}),Cell:({row:n})=>{var m;const[c,d]=h.exports.useState(""),u=r=>{r!=null&&r._id?_e(!0):_e(!1),d(g=>g===r?"":r),nl(g=>g===r?"":r),(r==null?void 0:r.available_id)&&(r==null?void 0:r.available_id)!=="000000000000000000000000"?il(!0):il(!1)},p=((m=n==null?void 0:n.original)==null?void 0:m._id)===(c==null?void 0:c._id);return h.exports.useEffect(()=>{al(p)},[p]),t("div",{children:t("input",{type:"checkbox",...n.getToggleRowSelectedProps(),checked:p,onChange:()=>u(n.original),className:"table-checkbox"})})}},...l])}),{getTableProps:Yl,getTableBodyProps:Vl,headerGroups:Rl,footerGroups:Jn,page:Ql,nextPage:Jl,previousPage:Kl,canNextPage:xe,canPreviousPage:ye,pageOptions:ul,state:Zl,gotoPage:je,pageCount:Fl,setPageSize:Dl,setGlobalFilter:wl,prepareRow:en}=zl,{globalFilter:ln,pageIndex:dl,pageSize:nn}=Zl,Se=[...new Set(o.map(e=>e.unitnumber))].sort((e,l)=>e.localeCompare(l,void 0,{sensitivity:"base"})).map(e=>({label:e,value:e})),tn=o.filter(e=>e.community_name!==void 0),an=[...new Set(tn.map(e=>e.communityid))],sn=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),cn=o.filter(e=>e.communityid===Sl.communityid).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),un=o.filter(e=>e.projectnameid===Al.projectnameid).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),dn=o.filter(e=>e.buildingid===Hl.buildingid).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}});k(sn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),k(cn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),k(un).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),k(dn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label));const rn=o.filter(e=>e.projectnameid===s.projectnameid).map(e=>{const{unitnumber:l}=e;if(l!="")return{label:l,value:l}}),Ae=k(rn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),on=o.filter(e=>e.projectnameid===s.projectnameid).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),$e=k(on).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),pn=o.filter(e=>e.projectnameid===s.projectnameid).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),He=k(pn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),mn=o.filter(e=>e.projectnameid===s.projectnameid).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Pe=k(mn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),bn=o.filter(e=>e.buildingid===s.buildingid).map(e=>{const{unitnumber:l}=e;if(l!="")return{label:l,value:l}}),Ne=k(bn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),hn=o.filter(e=>e.buildingid===s.buildingid).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),Oe=k(hn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),fn=o.filter(e=>e.buildingid===s.buildingid).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Be=k(fn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),vn=o.filter(e=>e.buildingid===s.buildingid).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Ie=k(vn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),gn=o.filter(e=>e.communityid===s.communityid).map(e=>{const{unitnumber:l}=e;if(l!="")return{label:l,value:l}}),xn=o.filter(e=>e.communityid===s.communityid).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),yn=o.filter(e=>e.communityid===s.communityid).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),Nn=o.filter(e=>e.communityid===s.communityid).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Ue=k(gn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Ee=k(xn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Le=k(yn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Me=k(Nn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Cn=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),kn=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),_n=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),jn=o.filter(e=>e.unitnumber===s.unitnumber).map(e=>{const{customerid:l,owner_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),Sn=k(Cn),An=k(kn),$n=k(_n),Hn=k(jn),We=Sn.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Te=An.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),qe=$n.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Xe=Hn.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Pn=o.filter(e=>e.customerid===s.customerid).map(e=>{const{unitnumber:l}=e;if(l!="")return{label:l,value:l}}),On=o.filter(e=>e.customerid===s.customerid).map(e=>{const{community_name:l,communityid:n}=e;if(l!=""&&n!="")return{label:l,value:n}}),Bn=o.filter(e=>e.customerid===s.customerid).map(e=>{const{projectnameid:l,project_name:n}=e;if(l!=""&&n!="")return{label:n,value:l}}),In=o.filter(e=>e.customerid===s.customerid).map(e=>{const{building_name:l,buildingid:n}=e;if(n!=""&&l!="")return{label:l,value:n}}),Ge=k(Pn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),ze=k(On).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Ye=k(Bn).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Ve=k(In).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,l)=>e.label.localeCompare(l.label)),Re=[...an.map(e=>{const l=o.find(n=>n.communityid===e);return l?{label:l.community_name,value:l.communityid}:null}).filter(Boolean)].sort((e,l)=>e.label.localeCompare(l.label)),Un=o.filter(e=>e.project_name!==void 0),Qe=[...[...new Set(Un.map(e=>e.projectnameid))].map(e=>{const l=o.find(n=>n.projectnameid===e);return l?{label:l.project_name,value:l.projectnameid}:null}).filter(Boolean)].sort((e,l)=>e.label.localeCompare(l.label)),En=o.filter(e=>e.building_name!==void 0),Je=[...[...new Set(En.map(e=>e.buildingid))].map(e=>{const l=o.find(n=>n.buildingid===e);return l?{label:l.building_name,value:l.buildingid}:null}).filter(Boolean)].sort((e,l)=>e.label.localeCompare(l.label)),Ln=o.filter(e=>e.owner_name!==void 0),Ke=[...[...new Set(Ln.map(e=>e.customerid))].map(e=>{const l=o.find(n=>n.customerid===e);return l?{label:l.owner_name,value:l.customerid}:null}).filter(Boolean)].sort((e,l)=>e.label.localeCompare(l.label)),Mn=()=>{H(),Z(""),el(""),ll(""),F(""),$l(""),C(""),le(""),Pl("")};return t(_,{children:b(vl,{children:[b("div",{className:"flex justify-between items-center mb-6",children:[t("h4",{className:"card-title",children:A}),(f==null?void 0:f.createpropert)===!0?t(L,{to:w,className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:Y}):null]}),t("div",{className:"grid grid-cols-12 gap-5 mb-5",children:t("div",{className:"2xl:col-span-12 lg:col-span-12 col-span-12",children:t(vl,{bodyClass:"p-4",children:t("div",{className:"grid md:grid-cols-3 col-span-1 gap-4",children:t(zn,{statistics:Gl})})})})}),b("div",{className:"md:flex justify-end items-center mb-6 gap-x-[25px] gap-y-[15px]",children:[(f==null?void 0:f.createavailability)===!0&&(f==null?void 0:f.updateavailability)===!0?b(_,{children:[y&&((y==null?void 0:y.unlisted)!==!0||(y==null?void 0:y.unlisted)===!1)&&tl===!0&&sl===!1?b(_,{children:[t(L,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Rent`,children:"For Rent"}),t(L,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Sale`,children:"For Sale"}),t(L,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Short Term`,children:"Short Term"})]}):null,y&&(y==null?void 0:y.unlisted)===!0&&tl===!0&&sl===!0?b(_,{children:[t(L,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Rent`,children:"For Rent"}),t(L,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Sale`,children:"For Sale"}),t(L,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",to:`/add-availability-sheet?propertyid=${y==null?void 0:y._id}&valuation=Short Term`,children:"Short Term"})]}):null]}):null,b("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer md:mb-0 mb-4",onClick:()=>Ol(!ge),children:[ge===!0?t(K,{icon:"heroicons:minus-small",className:"w-[20px] h-[20px]"}):t(K,{icon:"heroicons:plus-small",className:"w-[20px] h-[20px]"}),t("p",{className:"text-[16px] leading regular color-black",children:"Advance filter"})]}),t(Gn,{filter:ln,setFilter:wl})]}),b("div",{className:`xl:grid-cols-5 grid gap-5 grid-cols-1 ${ge===!0?"filter-show mt-6 pointer-events-auto":"filter-remove pointer-events-none -mt-4"}`,children:[b("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Unit No."}),console.log("sortedunitsbybuilding",Ne),t(ue,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:M?s.communityid&&M?Ue:s.projectnameid&&M?Ae:s.buildingid&&M?Ne:Ge:Se,value:M?s.communityid&&M?Ue&&Ue.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}):s.projectnameid&&M?Ae&&Ae.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}):s.buildingid&&M?Ne&&Ne.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}):Ge&&Ge.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}):Se&&Se.filter(function(e){if((a==null?void 0:a.unitnumber)!=="")return e.value===(a==null?void 0:a.unitnumber)}),onChange:e=>{M?s.communityid&&M?D({target:{name:"unitnumber",value:e.value}}):s.projectnameid&&M?D({target:{name:"unitnumber",value:e.value}}):s.buildingid&&M?D({target:{name:"unitnumber",value:e.value}}):D({target:{name:"unitnumber",value:e.value}}):te({target:{name:"unitnumber",value:e.value}})},styles:re,id:"hh",placeholder:"Select..."}),a!=null&&a.unitnumber?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,unitnumber:""}),children:"Clear filter"}):null]}),b("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Community Name"}),t(ue,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:W?s.customerid&&W?ze:s.projectnameid&&W?$e:s.buildingid&&W?Oe:We:Re,value:W?s.customerid&&W?ze&&ze.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}):s.projectnameid&&W?$e&&$e.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}):s.buildingid&&W?Oe&&Oe.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}):We&&We.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}):Re&&Re.filter(function(e){if((a==null?void 0:a.communityid)!=="")return e.value===(a==null?void 0:a.communityid)}),onChange:e=>{W?D({target:{name:"communityid",value:e.value}}):s.customerid&&W?D({target:{name:"communityid",value:e.value}}):s.projectnameid&&W?D({target:{name:"communityid",value:e.value}}):s.buildingid&&W?D({target:{name:"communityid",value:e.value}}):te({target:{name:"communityid",value:e.value}})},styles:re,id:"hh",placeholder:"Select..."}),a!=null&&a.communityid?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,communityid:""}),children:"Clear filter"}):null]}),b("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Project Name"}),t(ue,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:T?s.customerid&&T?Ye:s.communityid&&T?Ee:s.buildingid&&T?Be:Te:Qe,value:T?s.customerid&&T?Ye&&Ye.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}):s.communityid&&T?Ee&&Ee.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}):s.buildingid&&T?Be&&Be.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}):Te&&Te.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}):Qe&&Qe.filter(function(e){if((a==null?void 0:a.projectnameid)!=="")return e.value===(a==null?void 0:a.projectnameid)}),onChange:e=>{T?s.customerid&&T?he({target:{name:"projectnameid",value:e.value}}):s.communityid&&T?he({target:{name:"projectnameid",value:e.value}}):s.buildingid&&T?he({target:{name:"projectnameid",value:e.value}}):he({target:{name:"projectnameid",value:e.value}}):te({target:{name:"projectnameid",value:e.value}})},styles:re,id:"hh",placeholder:"Select..."}),a!=null&&a.projectnameid?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,projectnameid:""}),children:"Clear filter"}):null]}),b("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Building Name"}),t(ue,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:q?s.customerid&&q?Ve:s.communityid&&q?Le:s.projectnameid&&q?He:qe:Je,value:q?s.customerid&&q?Ve&&Ve.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}):s.communityid&&q?Le&&Le.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}):s.projectnameid&&q?He&&He.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}):qe&&qe.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}):Je&&Je.filter(function(e){if((a==null?void 0:a.buildingid)!=="")return e.value===(a==null?void 0:a.buildingid)}),onChange:e=>{q?s.customerid&&q?fe({target:{name:"buildingid",value:e.value}}):s.communityid&&q?fe({target:{name:"buildingid",value:e.value}}):s.projectnameid&&q?fe({target:{name:"buildingid",value:e.value}}):fe({target:{name:"buildingid",value:e.value}}):te({target:{name:"buildingid",value:e.value}})},styles:re,id:"hh",placeholder:"Select..."}),a!=null&&a.buildingid?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,buildingid:""}),children:"Clear filter"}):null]}),b("div",{children:[t("label",{htmlFor:" hh",className:"form-label ",children:"Owner Name"}),t(ue,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:X?s.communityid&&X?Me:s.projectnameid&&X?Pe:s.buildingid&&X?Ie:Xe:Ke,value:X?s.communityid&&X?Me&&Me.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}):s.projectnameid&&X?Pe&&Pe.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}):s.buildingid&&X?Ie&&Ie.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}):Xe&&Xe.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}):Ke&&Ke.filter(function(e){if((a==null?void 0:a.customerid)!=="")return e.value===(a==null?void 0:a.customerid)}),onChange:e=>{X?s.communityid&&X?ve({target:{name:"customerid",value:e.value}}):s.projectnameid&&X?ve({target:{name:"customerid",value:e.value}}):s.buildingid&&X?ve({target:{name:"customerid",value:e.value}}):ve({target:{name:"customerid",value:e.value}}):te({target:{name:"customerid",value:e.value}})},styles:re,id:"hh",placeholder:"Select..."}),a!=null&&a.customerid?t("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>C({...a,customerid:""}),children:"Clear filter"}):null]})]}),b("div",{className:`flex ${ge===!0?"filter-show mt-6 pointer-events-auto":"filter-remove pointer-events-none mt-0"} justify-end gap-x-[10px]`,children:[t("button",{className:"btn btn-secondary  text-center",type:"button",onClick:Mn,children:"Clear filter"}),t("button",{className:"btn btn-dark  text-center",type:"button",onClick:()=>$(a),children:"Search"})]}),t(Vn,{showModal:x,handleClose:Il,unitNumber:_l,loaderModal:Q,linkedData:z,handleDeleteData:Ul,dataId:gl,moduleName:"Property",booking:yl,managementcontract:Nl,tenantcontract:Cl,rentpurchase:kl,dataRole:f}),t("div",{className:"overflow-x-auto -mx-6 mt-6",children:t("div",{className:"inline-block min-w-full align-middle",children:t("div",{className:"",children:b("table",{className:"min-w-[140%] overflow-x-scroll divide-y divide-slate-100 table-fixed dark:divide-slate-700",...Yl,children:[t("thead",{className:"bg-slate-200 dark:bg-slate-700",children:Rl.map(e=>t("tr",{...e.getHeaderGroupProps(),children:e.headers.map(l=>l.Header==="action"&&!((f==null?void 0:f.readpropert)===!0||(f==null?void 0:f.updatepropert)===!0||(f==null?void 0:f.deletepropert)===!0)?t("th",{}):b("th",{...l.getHeaderProps(l.getSortByToggleProps()),scope:"col",className:"table-th",children:[l.render("Header"),t("span",{children:l.isSorted?l.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),P===!0?t("div",{className:"pl-[10px]",children:t(we,{})}):t("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...Vl,children:Ql.map(e=>(en(e),t("tr",{...e.getRowProps(),children:e.cells.map(l=>t("td",{...l.getCellProps(),className:"table-td",children:l.render("Cell")}))})))})]})})})}),b("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[b("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[t("select",{className:"form-control py-2 w-max",value:nn,onChange:e=>Dl(Number(e.target.value)),children:[50,100,200].map(e=>b("option",{value:e,children:["Show ",e]},e))}),b("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",b("span",{children:[dl+1," of ",ul.length]})]})]}),b("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[t("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:t("button",{className:` ${ye?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>je(0),disabled:!ye,children:t(K,{icon:"heroicons:chevron-double-left-solid"})})}),t("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:t("button",{className:` ${ye?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Kl(),disabled:!ye,children:"Prev"})}),ul.map((e,l)=>t("li",{children:t("button",{href:"#","aria-current":"page",className:` ${l===dl?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>je(l),children:e+1})},l)),t("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:t("button",{className:` ${xe?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Jl(),disabled:!xe,children:"Next"})}),t("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:t("button",{onClick:()=>je(Fl-1),disabled:!xe,className:` ${xe?"":"opacity-50 cursor-not-allowed"}`,children:t(K,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})})},ht=()=>{const{data:A,isSuccess:Y}=qn(),[w,v]=h.exports.useState(!1),[R,j]=h.exports.useState(""),[o,$]=h.exports.useState(""),{data:H}=Xn(),[P,S]=h.exports.useState(!1);h.exports.useEffect(()=>{v(!0),Y&&A&&(j(A),$(A),v(!1))},[Y,A]);const ee=async()=>{v(!0);const G=await(await fetch("http://dev-rare.srp.ai/property/api/connectdb")).json();j(G),v(!1)};function f(Q){let G="http://dev-rare.srp.ai/property/api/advancesearch?";for(const z in Q)Q[z]&&(G+=`${z}=${Q[z]}&`);return G.slice(0,-1)}const x=async Q=>{if(Q){S(!0);try{const G=f(Q),z=await fetch(G);if(!z.ok&&z.status!==400)throw new Error(`API 1 failed with status: ${z.status}`);const ke=z.status===400?[]:await z.json();j(ke),S(!1)}catch{j(A),S(!1)}}else j(A)},O=()=>{j(A)};return b(_,{children:[t(_,{}),w===!1&&Y&&A&&(o==null?void 0:o.length)?t("div",{className:" space-y-5",children:t(Rn,{pagelink:"/add-property",linktitle:"Add new Property",title:"All Property",allData:R,filterLoader:P,handleDataUpdate:ee,handleFilterSearch:x,handleClearFilter:O,forFilterData:o,managementData:H})}):t(we,{})]})};export{ht as default};
