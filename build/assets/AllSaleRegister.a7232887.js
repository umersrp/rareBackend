import{R as A,j as l,F as x,c9 as F,r as u,b as c,C as L,L as y,I as p,H as se,ca as ce}from"./index.5e55c1ba.js";import{T as D}from"./Tooltip.4c4c7a86.js";import{r as b}from"./index.c89ffb9d.js";import{G as ne}from"./GlobalFilter.2b1d860a.js";import{D as ie}from"./DeleteModal.fead603f.js";/* empty css                     */const P=A.forwardRef(({indeterminate:d,...g},v)=>{const m=A.useRef(),h=v||m;return A.useEffect(()=>{h.current.indeterminate=d},[h,d]),l(x,{children:l("input",{type:"checkbox",ref:h,...g,className:"table-checkbox"})})}),re=({title:d,linktitle:g,pagelink:v,allData:m,onDataUpdate:h})=>{const C=localStorage.getItem("isAuth"),o=JSON.parse(C),{data:n}=F(o==null?void 0:o.roleid),[j,S]=u.exports.useState(!1),[G,de]=u.exports.useState(!1),[$,ue]=u.exports.useState(""),[T,E]=u.exports.useState(""),I=async e=>{S(!0),E(e)},M=()=>{S(!1)},R=async e=>{try{await se.patch("http://dev-rare.srp.ai/saleregister/api/softdelete",{_id:e,softdelete:!0}),h()}catch(a){console.log(a,"error")}},B=[{Header:"Sr no",accessor:"id",Cell:({row:e,flatRows:a})=>l("span",{children:a.indexOf(e)+1})},{Header:"unit number",accessor:"unitnumber",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"community name",accessor:"communityname",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"project name",accessor:"projectname",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"building name",accessor:"buildingname",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"floor level",accessor:"floor",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"sold for",accessor:"sold_for",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"noc charges",accessor:"noc_charges",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?parseFloat((t=e==null?void 0:e.cell)==null?void 0:t.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"Not Available"})}},{Header:"trustee fee amount",accessor:"trustee_fee_amount",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?parseFloat((t=e==null?void 0:e.cell)==null?void 0:t.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"Not Available"})}},{Header:"transfer fee amount",accessor:"transfer_fee_amount",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?parseFloat((t=e==null?void 0:e.cell)==null?void 0:t.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"Not Available"})}},{Header:"commission amount",accessor:"commission_amount",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?parseFloat((t=e==null?void 0:e.cell)==null?void 0:t.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"Not Available"})}},{Header:"title deed fee",accessor:"title_deed_fee",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?parseFloat((t=e==null?void 0:e.cell)==null?void 0:t.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"Not Available"})}},{Header:"buyer name",accessor:"buyer_name",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"buyer email",accessor:"buyer_email",Cell:e=>{var a,t;return l("span",{className:"normal-case",children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"buyer Phone Number",accessor:"buyer_mobilenumber",Cell:e=>{var a,t;return l("span",{className:"normal-case",children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"buyer inhouse agent name",accessor:"buyer_inhouse_agent_name",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"buyer outside agent name",accessor:"buyer_outside_agent_name",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"transaction type",accessor:"transaction_type",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?(t=e==null?void 0:e.cell)==null?void 0:t.value:"Not Available"})}},{Header:"exoected transfer date",accessor:"exoected_transfer_date",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?new Date((t=e==null?void 0:e.cell)==null?void 0:t.value).toDateString():"Not Available"})}},{Header:"contract B attachment PDF/PNG/JPG",accessor:"contract_B_attachment",Cell:e=>{var a,t,s,i,r;return l("span",{className:"block w-full",children:l("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((a=e==null?void 0:e.cell)==null?void 0:a.value)&&((t=e==null?void 0:e.cell)==null?void 0:t.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((i=e==null?void 0:e.cell)==null?void 0:i.value)!==""?c("a",{className:"flex gap-x-[5px] items-center",href:"http://dev-rare.srp.ai"+((r=e==null?void 0:e.cell)==null?void 0:r.value),target:"_blank",children:[l(p,{icon:"heroicons-outline:eye"}),"View Document"]}):"Not Available"})})}},{Header:"contract A attachment PDF/PNG/JPG",accessor:"contract_A_attachment",Cell:e=>{var a,t,s,i,r;return l("span",{className:"block w-full",children:l("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((a=e==null?void 0:e.cell)==null?void 0:a.value)&&((t=e==null?void 0:e.cell)==null?void 0:t.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((i=e==null?void 0:e.cell)==null?void 0:i.value)!==""?c("a",{className:"flex gap-x-[5px] items-center",href:"http://dev-rare.srp.ai"+((r=e==null?void 0:e.cell)==null?void 0:r.value),target:"_blank",children:[l(p,{icon:"heroicons-outline:eye"}),"View Document"]}):"Not Available"})})}},{Header:"sales contract attachment PDF/PNG/JPG",accessor:"sales_contract_attachment",Cell:e=>{var a,t,s,i,r;return l("span",{className:"block w-full",children:l("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((a=e==null?void 0:e.cell)==null?void 0:a.value)&&((t=e==null?void 0:e.cell)==null?void 0:t.value)!==""?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((i=e==null?void 0:e.cell)==null?void 0:i.value)!==""?c("a",{className:"flex gap-x-[5px] items-center",href:"http://dev-rare.srp.ai"+((r=e==null?void 0:e.cell)==null?void 0:r.value),target:"_blank",children:[l(p,{icon:"heroicons-outline:eye"}),"View Document"]}):"Not Available"})})}},{Header:"created-on",accessor:"createdAt",Cell:e=>{var a,t;return l("span",{children:(a=e==null?void 0:e.cell)!=null&&a.value?new Date((t=e==null?void 0:e.cell)==null?void 0:t.value).toDateString():"Not Available"})}},{Header:"action",accessor:e=>`${e._id}`,Cell:e=>{const a=localStorage.getItem("isAuth"),t=JSON.parse(a),{data:s}=F(t==null?void 0:t.roleid);if(!s)return null;const i=(s==null?void 0:s.readsaleregister)===!0,r=(s==null?void 0:s.updatesaleregister)===!0,te=(s==null?void 0:s.deletesaleregister)===!0;return c("div",{className:"flex space-x-3 rtl:space-x-reverse",children:[i&&l(D,{content:"View",placement:"top",arrow:!0,animation:"shift-away",children:l(y,{className:"action-btn",to:`/view-saleregister/${e==null?void 0:e.cell.value}`,type:"button",children:l(p,{icon:"heroicons:eye"})})}),r&&l(D,{content:"Edit",placement:"top",arrow:!0,animation:"shift-away",children:l(y,{to:`/saleregisterform/${e==null?void 0:e.cell.value}`,className:"action-btn",type:"button",children:l(p,{icon:"heroicons:pencil-square"})})}),te&&l(D,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:l("button",{className:"action-btn",type:"button",onClick:()=>I(e==null?void 0:e.cell.value),children:l(p,{icon:"heroicons:trash"})})})]})}}],J=u.exports.useMemo(()=>B,[]),O=u.exports.useMemo(()=>m),V=b.exports.useTable({columns:J,data:O,initialState:{pageIndex:0,pageSize:50}},b.exports.useGlobalFilter,b.exports.useSortBy,b.exports.usePagination,b.exports.useRowSelect,e=>{e.visibleColumns.push(a=>[{id:"selection",Header:({getToggleAllRowsSelectedProps:t})=>l("div",{children:l(P,{...t()})}),Cell:({row:t})=>l("div",{children:l(P,{...t.getToggleRowSelectedProps()})})},...a])}),{getTableProps:U,getTableBodyProps:q,headerGroups:z,footerGroups:me,page:Q,nextPage:K,previousPage:W,canNextPage:f,canPreviousPage:N,pageOptions:_,state:X,gotoPage:k,pageCount:Y,setPageSize:Z,setGlobalFilter:w,prepareRow:ee}=V,{globalFilter:ae,pageIndex:H,pageSize:le}=X;return l(x,{children:c(L,{children:[c("div",{className:"flex justify-between items-center mb-6",children:[l("h4",{className:"card-title",children:d}),(n==null?void 0:n.createsaleregister)&&l(y,{to:v,className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:g})]}),l("div",{className:"md:flex justify-end items-center mb-6",children:l(ne,{filter:ae,setFilter:w})}),l(ie,{showModal:j,handleClose:M,loaderModal:G,linkedData:$,handleDeleteData:R,dataId:T,moduleName:"Sale Register"}),l("div",{className:"overflow-x-auto -mx-6",children:l("div",{className:"inline-block min-w-full align-middle",children:l("div",{className:"",children:c("table",{className:"min-w-[170%] overflow-x-scroll divide-y divide-slate-100 table-fixed dark:divide-slate-700",...U,children:[l("thead",{className:"bg-slate-200 dark:bg-slate-700",children:z.map(e=>l("tr",{...e.getHeaderGroupProps(),children:e.headers.map(a=>a.Header==="action"&&!((n==null?void 0:n.readsaleregister)===!0||(n==null?void 0:n.updatesaleregister)===!0||(n==null?void 0:n.deletesaleregister)===!0)?l("th",{}):c("th",{...a.getHeaderProps(a.getSortByToggleProps()),scope:"col",className:"table-th",children:[a.render("Header"),l("span",{children:a.isSorted?a.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),l("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...q,children:Q.map(e=>(ee(e),l("tr",{...e.getRowProps(),children:e.cells.map(a=>l("td",{...a.getCellProps(),className:"table-td",children:a.render("Cell")}))})))})]})})})}),c("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[c("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[l("select",{className:"form-control py-2 w-max",value:le,onChange:e=>Z(Number(e.target.value)),children:[50,100,100].map(e=>c("option",{value:e,children:["Show ",e]},e))}),c("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",c("span",{children:[H+1," of ",_.length]})]})]}),c("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[l("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${N?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>k(0),disabled:!N,children:l(p,{icon:"heroicons:chevron-double-left-solid"})})}),l("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${N?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>W(),disabled:!N,children:"Prev"})}),_.map((e,a)=>l("li",{children:l("button",{href:"#","aria-current":"page",className:` ${a===H?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>k(a),children:e+1})},a)),l("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{className:` ${f?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>K(),disabled:!f,children:"Next"})}),l("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:l("button",{onClick:()=>k(Y-1),disabled:!f,className:` ${f?"":"opacity-50 cursor-not-allowed"}`,children:l(p,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})})},xe=()=>{const[d,g]=u.exports.useState([]),[v,m]=u.exports.useState(!1);u.exports.useEffect(()=>{m(!0),(async()=>{const n=await(await fetch("http://dev-rare.srp.ai/saleregister")).json();g(n),m(!1)})()},[]);const h=async()=>{m(!0);const o=await(await fetch("http://dev-rare.srp.ai/saleregister")).json();g(o),m(!1)};return l(x,{children:v===!1?l(x,{children:d!=null&&d.length?l("div",{className:" space-y-5",children:l(re,{pagelink:"/saleregisterform",linktitle:"Add new Sale Register",title:"All Sale Register",allData:d,onDataUpdate:h})}):l(L,{children:c(x,{children:[c("div",{className:"flex justify-between items-center mb-6",children:[l("h4",{className:"card-title",children:"All Sale Register"}),l(y,{to:"/saleregisterform",className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:"Add new Sale Register"})]}),l("p",{children:"No Sale Register Found"})]})})}):l(ce,{})})};export{xe as default};
