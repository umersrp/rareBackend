import{R as V,r as o,cf as Y,j as e,F as _,ap as H,cg as W,bP as q,bN as J,V as K,L as Q,M as g,ch as X}from"./index.5ddab620.js";var i="C:\\Users\\LENOVO\\Desktop\\rareProjects\\Rare_Frontend\\src\\pages\\booking-management\\YearlyCalendar.jsx";const Z={menu:a=>({...a,backgroundColor:"white",zIndex:9999,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",borderRadius:"4px",border:"1px solid #ccc"})},k=({booking:a,handleDataUpdate:p,setSelectedBooking:s})=>{const[h,b]=o.exports.useState(!1);return o.exports.useEffect(()=>{b(!0);const v=setTimeout(()=>{b(!1)},1500);return()=>clearTimeout(v)},[a]),e("div",{className:"sidebar overflow-hidden",children:[e("div",{className:"flex items-center justify-between",children:[e("h4",{className:"mb-4",children:"Reservation"},void 0,!1,{fileName:i,lineNumber:48,columnNumber:17},void 0),e(K,{title:"Do you want to Cancel this booking?",label:"Cancel booking",labelClass:"btn btn inline-flex justify-center btn-danger py-[8px] px-[24px] rounded-[5px]",uncontrol:!0,alldata:a,onDataUpdate:p,bookingUpdate:!0,cancelbooking:!0,setSelectedBooking:s,children:e("h4",{className:"font-medium text-lg mb-3 text-slate-900 text-center",children:"Are you sure?"},void 0,!1,{fileName:i,lineNumber:62,columnNumber:21},void 0)},void 0,!1,{fileName:i,lineNumber:50,columnNumber:17},void 0)]},void 0,!0,{fileName:i,lineNumber:47,columnNumber:13},void 0),h?e(_,{children:[e(l,{},void 0,!1,{fileName:i,lineNumber:70,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:71,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:72,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:73,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:74,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:75,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:76,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:77,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:78,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:79,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:80,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:81,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:82,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:83,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:84,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:85,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:86,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:87,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:88,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:89,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:90,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:91,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:92,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:93,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:94,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:95,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:96,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:97,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:98,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:99,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:100,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:101,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:102,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:103,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:104,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:105,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:106,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:107,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:108,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:109,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:110,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:111,columnNumber:25},void 0),e(l,{},void 0,!1,{fileName:i,lineNumber:112,columnNumber:25},void 0)]},void 0,!0):e(_,{children:[e("h5",{className:"mb-4 borderBottom-calendar",children:"Property Details"},void 0,!1,{fileName:i,lineNumber:117,columnNumber:25},void 0),e("div",{className:"flex border-line mb-4",children:[e("div",{className:"w-[100%] ",children:[e("p",{className:"capitalize  ",children:[e("b",{children:"Unit Number"},void 0,!1,{fileName:i,lineNumber:120,columnNumber:61},void 0),":"]},void 0,!0,{fileName:i,lineNumber:120,columnNumber:33},void 0),e("p",{className:"capitalize  ",children:[e("b",{children:"Owner Name"},void 0,!1,{fileName:i,lineNumber:125,columnNumber:61},void 0),":"]},void 0,!0,{fileName:i,lineNumber:125,columnNumber:33},void 0)]},void 0,!0,{fileName:i,lineNumber:119,columnNumber:29},void 0),e("div",{className:"text-right w-[100%]",children:[e("p",{className:"capitalize  boder-line",children:a.unitnumber?a.unitnumber:"Not Available"},void 0,!1,{fileName:i,lineNumber:128,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:a.owner_name?a.owner_name:"Not Available"},void 0,!1,{fileName:i,lineNumber:133,columnNumber:33},void 0)]},void 0,!0,{fileName:i,lineNumber:127,columnNumber:29},void 0)]},void 0,!0,{fileName:i,lineNumber:118,columnNumber:25},void 0),e("h5",{className:"mb-4 borderBottom-calendar",children:"Guest Information"},void 0,!1,{fileName:i,lineNumber:137,columnNumber:25},void 0),e("div",{className:"flex border-line",children:[e("div",{className:"w-[100%]",children:[e("p",{className:"capitalize  boder-line",children:[e("b",{children:"Guest Name"},void 0,!1,{fileName:i,lineNumber:142,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:142,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:[e("b",{children:"Mobile Number"},void 0,!1,{fileName:i,lineNumber:143,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:143,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:[e("b",{children:"Total Occupants"},void 0,!1,{fileName:i,lineNumber:147,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:147,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:[e("b",{children:"Confirmation Code"},void 0,!1,{fileName:i,lineNumber:148,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:148,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:[e("b",{children:"Reservation Date"},void 0,!1,{fileName:i,lineNumber:149,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:149,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:[e("b",{children:"Check-in Date"},void 0,!1,{fileName:i,lineNumber:150,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:150,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:[e("b",{children:"Check-out Date"},void 0,!1,{fileName:i,lineNumber:151,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:151,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:[e("b",{children:"No of Nights"},void 0,!1,{fileName:i,lineNumber:152,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:152,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:[e("b",{children:"Tourism Fee"},void 0,!1,{fileName:i,lineNumber:153,columnNumber:71},void 0),":"]},void 0,!0,{fileName:i,lineNumber:153,columnNumber:33},void 0)]},void 0,!0,{fileName:i,lineNumber:141,columnNumber:29},void 0),e("div",{className:"text-right w-[100%]",children:[e("p",{className:"capitalize  boder-line",children:a.guestname?a.guestname:"Not Available"},void 0,!1,{fileName:i,lineNumber:156,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line ",children:a.mobilenumber?a.mobilenumber:"Not Available"},void 0,!1,{fileName:i,lineNumber:157,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:a.totaloccupants?a.totaloccupants:"0"},void 0,!1,{fileName:i,lineNumber:161,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:a.confirmationcode?a.confirmationcode:"Not Available"},void 0,!1,{fileName:i,lineNumber:162,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:a.reservationdate?new Date(a.reservationdate).toDateString():"Not Available"},void 0,!1,{fileName:i,lineNumber:163,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:a.start_time?new Date(a.start_time).toDateString():"Not Available"},void 0,!1,{fileName:i,lineNumber:164,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:a.end_time?new Date(a.end_time).toDateString():"Not Available"},void 0,!1,{fileName:i,lineNumber:165,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:a.nonight?a.nonight:"Not Available"},void 0,!1,{fileName:i,lineNumber:166,columnNumber:33},void 0),e("p",{className:"capitalize  boder-line",children:a.tourismfee?a.tourismfee:"0.00"},void 0,!1,{fileName:i,lineNumber:167,columnNumber:33},void 0)]},void 0,!0,{fileName:i,lineNumber:155,columnNumber:29},void 0)]},void 0,!0,{fileName:i,lineNumber:139,columnNumber:25},void 0),e("div",{className:"w-[100%] col-span-3",children:e("div",{className:"borderBottom-calendar"},void 0,!1,{fileName:i,lineNumber:172,columnNumber:29},void 0)},void 0,!1,{fileName:i,lineNumber:171,columnNumber:25},void 0),e("h5",{className:"mb-4",children:"Booking Information"},void 0,!1,{fileName:i,lineNumber:174,columnNumber:25},void 0),e("p",{className:"capitalize",children:[e("b",{children:"TOTAL PAYOUT"},void 0,!1,{fileName:i,lineNumber:177,columnNumber:51},void 0),": ",a.totalpayout?parseFloat(a.totalpayout).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"]},void 0,!0,{fileName:i,lineNumber:177,columnNumber:25},void 0),e("p",{className:"capitalize",children:[e("b",{children:"Total Collection All incl"},void 0,!1,{fileName:i,lineNumber:196,columnNumber:51},void 0),": ",a.totalcollectall?parseFloat(a.totalcollectall).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"]},void 0,!0,{fileName:i,lineNumber:196,columnNumber:25},void 0)]},void 0,!0),e("div",{className:"flex justify-center mt-[10px]",children:e(Q,{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",target:"_blank",to:`/view-booking/${a._id}`,type:"button",children:"View Full Booking"},void 0,!1,{fileName:i,lineNumber:201,columnNumber:17},void 0)},void 0,!1,{fileName:i,lineNumber:200,columnNumber:13},void 0)]},void 0,!0,{fileName:i,lineNumber:46,columnNumber:9},void 0)},l=()=>e("div",{className:"shimmer-div mt-[10px]",children:e("p",{className:"shimmer-paragraph"},void 0,!1,{fileName:i,lineNumber:211,columnNumber:9},void 0)},void 0,!1,{fileName:i,lineNumber:210,columnNumber:5},void 0),ee=()=>{const[a,p]=o.exports.useState([]),[s,h]=o.exports.useState([]),[b,v]=o.exports.useState(null),[O,w]=o.exports.useState(!1),[y,ie]=o.exports.useState(Y()),[$,A]=o.exports.useState(!1),[B,c]=o.exports.useState(!1);o.exports.useState("");const[f,R]=o.exports.useState([]);o.exports.useEffect(()=>{(async()=>{c(!0);try{const[t,d]=await Promise.all([await g.get("http://dev-rare.srp.ai/property/shortterm"),await g.get("http://dev-rare.srp.ai/booking/api/calenderbooking")]),x=t.data.data,S=d.data.data,z=x.map(m=>({id:m._id,title:e("div",{className:"flex",children:[console.log("222222",`http://dev-rare.srp.ai${m.propertyimages[0]}`),e("div",{className:" flex gap-x-2",children:[m.propertyimages[0]?e("img",{className:"max-w-[50%] h-[50%]",src:`http://dev-rare.srp.ai${m.propertyimages[0]}`},void 0,!1,{fileName:i,lineNumber:268,columnNumber:37},void 0):e("img",{className:"max-w-[25%] h-[100%]",src:X},void 0,!1,{fileName:i,lineNumber:267,columnNumber:37},void 0),e("p",{className:"text-[12px]",children:`${m.unitnumber} | ${m.projectname} | ${m.buildingname}`},void 0,!1,{fileName:i,lineNumber:270,columnNumber:33},void 0)]},void 0,!0,{fileName:i,lineNumber:265,columnNumber:29},void 0)]},void 0,!0,{fileName:i,lineNumber:255,columnNumber:25},void 0)})),D=x.map(m=>{const{_id:N,unitnumber:P,projectname:j,buildingname:F}=m;if(N!=""&&P!=""&&j!=""&&F!="")return{label:`${P} | ${j} | ${F}`,value:N}});console.log("selectedPropertyDatas",D),R(D),console.log(y.clone().startOf("month").valueOf());const r=S.map(m=>{let N=new Date(m.checkoutdate);return N.setDate(N.getDate()+1),{...m,id:m._id,group:m.propertyid,title:m.unitnumber+" | "+m.project_name+" | "+m.building_name,start_time:new Date(m.checkindate).valueOf(),end_time:N.valueOf()}});p(z),h(r),c(!1)}catch(t){console.error("Error fetching data:",t),c(!1)}})()},[]);const I=async()=>{c(!0),(async()=>{try{const[t,d]=await Promise.all([g.get("http://dev-rare.srp.ai/property/shortterm"),g.get("http://dev-rare.srp.ai/booking/api/cancelledbooking?cancelled=false")]),x=t.data,S=d.data,z=x.map(r=>({id:r._id,title:r.unitnumber+`
`+r.projectname+`
`+r.buildingname})),D=S.map(r=>{let m=new Date(r.checkoutdate);return m.setDate(m.getDate()+1),{...r,id:r._id,group:r.propertyid,title:r.unitnumber+" | "+r.project_name+" | "+r.building_name,start_time:new Date(r.checkindate).valueOf(),end_time:m.valueOf()}});p(z),h(D),v(null),w(!1),c(!1)}catch(t){console.error("Error fetching data:",t),c(!1)}})()},T=n=>{const t=s.find(d=>d.id===n);v(t),w(!0)},L=()=>{w(!1)},[u,C]=o.exports.useState({id:[]}),E=n=>{const t=n.map(d=>d.value);C({...u,id:t})},U=()=>{C({...u,id:[]})},G=()=>u.id.length==0?a:a.filter(n=>u.id.includes(n.id)),M=()=>u.id.length==0?s:s.filter(n=>u.id.includes(n.propertyid));return console.log("selectedPropertyData",f),e(_,{children:B===!1?e("div",{className:"relative",children:[e("div",{className:"w-[100%] col-span-3 p-5",children:e(H,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:f,value:f.filter(n=>u==null?void 0:u.id.includes(n.value)),onChange:E,styles:Z,id:"hh",placeholder:"Select Property filter option...",isMulti:!0},void 0,!1,{fileName:i,lineNumber:507,columnNumber:29},void 0)},void 0,!1,{fileName:i,lineNumber:506,columnNumber:25},void 0),u.id.length>0?e("div",{className:"md:flex justify-end items-center mb-6 gap-x-[25px] gap-y-[15px]",children:e("button",{onClick:U,className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:"Reset"},void 0,!1,{fileName:i,lineNumber:524,columnNumber:41},void 0)},void 0,!1,{fileName:i,lineNumber:523,columnNumber:37},void 0):null,e("div",{className:"timeline-container",children:e(W,{groups:f?G():a,items:f?M():s,sidebarWidth:300,lineHeight:50,defaultTimeStart:y.clone().startOf("month"),defaultTimeEnd:y.clone().endOf("month"),onItemClick:T,touchScrollEnabled:!0,canMove:!1,canChangeGroup:!1},void 0,!1,{fileName:i,lineNumber:534,columnNumber:29},void 0)},void 0,!1,{fileName:i,lineNumber:533,columnNumber:25},void 0),e("div",{className:`sidebar-container ${O?"show":""}`,children:e("div",{className:"sidebar-content",children:[e("img",{src:q,className:"w-[25px] cursor-pointer mb-[25px]",alt:"CancelIcon",onClick:L},void 0,!1,{fileName:i,lineNumber:571,columnNumber:33},void 0),b&&e(k,{booking:b,reFetchData:$,setReFetchData:A,handleDataUpdate:I,setSelectedBooking:v},void 0,!1,{fileName:i,lineNumber:572,columnNumber:53},void 0)]},void 0,!0,{fileName:i,lineNumber:570,columnNumber:29},void 0)},void 0,!1,{fileName:i,lineNumber:569,columnNumber:25},void 0)]},void 0,!0,{fileName:i,lineNumber:492,columnNumber:21},void 0):e(J,{},void 0,!1,{fileName:i,lineNumber:575,columnNumber:30},void 0)},void 0,!1)},ae=V.memo(ee);export{ae as default};
