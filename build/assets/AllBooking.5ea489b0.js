import{R as In,j as a,F as B,z as Ul,r as u,b as y,L as F,I as K,an as z,ca as Pn,t as Ml,H as mt,c9 as dt,co as Wl,C as ut}from"./index.5e55c1ba.js";import{G as Gl}from"./group-chart-1.095f32b1.js";import{D as Rn}from"./index.esm.c068ea99.js";import{N as $l}from"./not-found.46bdbc04.js";import{r as xe}from"./index.c89ffb9d.js";import{G as Kl}from"./GlobalFilter.2b1d860a.js";import{T as Ne}from"./Tooltip.4c4c7a86.js";import{E as Yl,u as Bn,w as ql}from"./jspdf.plugin.autotable.f820e5bb.js";import{c as zl}from"./calendar.6b75ea36.js";import"./jspdf.es.min.085956f0.js";import"./html2canvas.esm.0eae2bf4.js";import{M as rt}from"./Modal.7f5fdd60.js";import{D as Xl}from"./DeleteModal.fead603f.js";import"./react-apexcharts.min.f6d70275.js";/* empty css                     */const Dl=In.forwardRef(({indeterminate:j,...P},H)=>{const m=In.useRef(),X=H||m;return In.useEffect(()=>{X.current.indeterminate=j},[X,j]),a(B,{children:a("input",{type:"checkbox",ref:X,...P,className:"table-checkbox"})})}),Q={option:(j,P)=>({...j,fontSize:"14px"})},Jl=({showModal:j})=>a("div",{className:"thumbnail-container",children:j&&a("div",{className:"modal-overlay-property align-center-important",children:y("div",{className:"w-[300px]",children:[a("div",{className:"mb-3",children:a("img",{className:" w-[100%]",src:Ml,alt:"Logo"})}),y("svg",{className:"animate-spin  h-12 w-12 m-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a("circle",{className:"opacity-25 text-white",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a("path",{className:"opacity-75 text-white",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})})}),Ql=({allBooking:j,handleDataUpdate:P,dataRole:H,forFilterData:m,handleFilterSearch:X,handleClearFilter:Z,filterLoader:D,dataFilterActive:v,removeDateFilter:U,typeOfBooking:w,selectedtypeOfBooking:$,setSelectedtypeOfBooking:je})=>{const oe=window.location.origin,V=Ul(),[ee,Ce]=u.exports.useState(!1),[ne,G]=u.exports.useState(!1),[se,Le]=u.exports.useState(""),[He,me]=u.exports.useState("");u.exports.useState("");const[Ie,ke]=u.exports.useState(!1),[E,O]=u.exports.useState(""),[t,r]=u.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",owner_email:"",email:"",bookingagent:""}),[i,Ae]=u.exports.useState({unitnumber:"",communityid:"",projectnameid:"",buildingid:"",owner_email:"",email:"",bookingagent:""});console.log("groupUnits",i);const[S,N]=u.exports.useState(""),[Un,ue]=u.exports.useState(""),[C,M]=u.exports.useState(""),[Mn,Re]=u.exports.useState(""),[k,Y]=u.exports.useState(""),[Wn,Be]=u.exports.useState(""),[o,x]=u.exports.useState(""),[g,h]=u.exports.useState(""),[b,A]=u.exports.useState(""),L=e=>{const{name:n,value:l}=e.target;r(s=>({...s,[n]:l})),Ae(s=>({...s,[n]:l}))};u.exports.useEffect(()=>(i.unitnumber&&(N(i.unitnumber),M(i.unitnumber),Y(i.unitnumber),x(i.unitnumber),h(i.unitnumber),A(i.unitnumber)),i.owner_email&&(O(i.owner_email),N(i.owner_email),M(i.owner_email),Y(i.owner_email),h(i.owner_email),A(i.owner_email)),i.communityid&&(O(i.communityid),M(i.communityid),Y(i.communityid),x(i.communityid),h(i.communityid),A(i.communityid)),i.projectnameid&&(O(i.projectnameid),N(i.projectnameid),Y(i.projectnameid),x(i.projectnameid),h(i.projectnameid),A(i.projectnameid)),i.buildingid&&(O(i.buildingid),N(i.buildingid),M(i.buildingid),x(i.buildingid),h(i.buildingid),A(i.buildingid)),i.email&&(O(i.email),N(i.email),M(i.email),Y(i.email),x(i.email),h(i.email)),i.bookingagent&&(O(i.bookingagent),N(i.bookingagent),M(i.bookingagent),Y(i.bookingagent),x(i.bookingagent)),()=>{N(""),M(""),Y(""),x(""),h(""),O("")}),[i]);const W=e=>{const{name:n,value:l}=e.target;i.unitnumber&&(N(i.unitnumber),r({...t,[n]:l}),ue({...t,[n]:l})),i.owner_email&&(O(i.owner_email),r({...t,[n]:l}),N(i.owner_email)),i.communityid&&(O(i.communityid),r({...t,[n]:l})),i.projectnameid&&(O(i.projectnameid),r({...t,[n]:l})),i.buildingid&&(O(i.buildingid),r({...t,[n]:l})),i.email&&(O(i.email),r({...t,[n]:l})),i.bookingagent&&(O(i.bookingagent),r({...t,[n]:l}))},te=e=>{const{name:n,value:l}=e.target;i.unitnumber&&r({...t,[n]:l}),i.owner_email&&(r({...t,[n]:l}),M(i.owner_email)),i.communityid&&(r({...t,[n]:l}),M(i.communityid)),i.buildingid&&r({...t,[n]:l}),i.email&&r({...t,[n]:l}),i.bookingagent&&r({...t,[n]:l})},le=e=>{const{name:n,value:l}=e.target;i.unitnumber&&r({...t,[n]:l}),i.owner_email&&r({...t,[n]:l}),i.communityid&&r({...t,[n]:l}),i.projectnameid&&r({...t,[n]:l}),i.email&&r({...t,[n]:l}),i.bookingagent&&r({...t,[n]:l})},ie=e=>{const{name:n,value:l}=e.target;i.unitnumber&&r({...t,[n]:l}),i.communityid&&r({...t,[n]:l}),i.projectnameid&&r({...t,[n]:l}),i.buildingid&&r({...t,[n]:l}),i.email&&r({...t,[n]:l}),i.bookingagent&&r({...t,[n]:l})},ae=e=>{const{name:n,value:l}=e.target;i.email&&r({...t,[n]:l}),i.unitnumber&&r({...t,[n]:l}),i.communityid&&r({...t,[n]:l}),i.projectnameid&&r({...t,[n]:l}),i.buildingid&&r({...t,[n]:l}),i.bookingagent&&r({...t,[n]:l})},gt=async e=>{Ce(!0),me(e)},ce=e=>{const{name:n,value:l}=e.target;i.email&&r({...t,[n]:l}),i.unitnumber&&r({...t,[n]:l}),i.communityid&&r({...t,[n]:l}),i.projectnameid&&r({...t,[n]:l}),i.buildingid&&r({...t,[n]:l}),i.bookingagent&&r({...t,[n]:l})},pt=()=>{Ce(!1)},bt=async e=>{try{await mt.patch("http://dev-rare.srp.ai/booking/api/updatebooking",{_id:e,softdelete:!0}),P()}catch(n){console.log(n,"error")}};function p(e){var s,d;const n={},l=[];for(const c of e){const T=`${(s=c==null?void 0:c.label)==null?void 0:s.trim()}|${(d=c==null?void 0:c.value)==null?void 0:d.trim()}`;n[T]||(l.push(c),n[T]=!0)}return l}const[Ee,ft]=u.exports.useState(!1),vt=async e=>{const l=`http://dev-rare.srp.ai/property/${e.propertyid}`,s=await mt.get(`${l}`);if(console.log("proData",s),s.statusText==="OK"&&s.status===200){const{propertyimages:d,propertylocation:c,subtype:T}=s.data,I={propertyimages:d.length>0?d[0]:null,propertylocation:c,subtype:T};V("/bookingsd",{state:{data:e,obj:I}})}},ht=[{Header:"Sr no",accessor:"id",Cell:({row:e,flatRows:n})=>a("span",{children:n.indexOf(e)+1})},{Header:"Booking Number",accessor:"bookingnumber",Cell:e=>{var n,l,s,d,c,T,I,_,R,q,J;return a(B,{children:oe==="http://127.0.0.1:5173"||oe==="http://stg.srp.ai"||oe==="http://127.0.0.1:5174"?a(F,{to:`/view-booking/${(s=(l=(n=e==null?void 0:e.cell)==null?void 0:n.row)==null?void 0:l.original)==null?void 0:s._id}`,children:(d=e==null?void 0:e.cell)!=null&&d.value?((T=(c=e==null?void 0:e.cell)==null?void 0:c.value)==null?void 0:T.slice(0,15))+(((I=e==null?void 0:e.cell)==null?void 0:I.value.length)>15?"...":""):"Not Available"}):a("span",{children:(_=e==null?void 0:e.cell)!=null&&_.value?((q=(R=e==null?void 0:e.cell)==null?void 0:R.value)==null?void 0:q.slice(0,15))+(((J=e==null?void 0:e.cell)==null?void 0:J.value.length)>15?"...":""):"Not Available"})})}},{Header:"Booking Status",accessor:"cancelled",Cell:e=>{var n,l,s;return a("span",{className:"block w-full",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)===!1?"text-success-500 bg-success-500":""} 
            ${((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-danger-500 bg-danger-500":""}
            
             `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)===!0?"Cancelled":"Approved"})})}},{Header:"Unit No",accessor:e=>`${e.unitnumber}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Building Name",accessor:e=>`${e.building_name}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Floor Level",accessor:e=>`${e.floor}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Community Name",accessor:e=>`${e.community_name}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Project Name",accessor:e=>`${e.project_name}`,Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Owner Name",accessor:"owner_name",Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Guest Name",accessor:"guestname",Cell:e=>{var n,l;return a("div",{children:a("span",{className:"inline-flex items-center",children:a("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})})})}},{Header:"Check in Type",accessor:"checkintype",Cell:e=>{var n,l,s,d;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((d=e==null?void 0:e.cell)==null?void 0:d.value.length)>15?"...":""):"Not Available"})}},{Header:"Nationality",accessor:"nationality",Cell:e=>{var n,l,s,d;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((d=e==null?void 0:e.cell)==null?void 0:d.value.length)>15?"...":""):"Not Available"})}},{Header:"passport no",accessor:"passportnumber",Cell:e=>{var n,l,s,d;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((d=e==null?void 0:e.cell)==null?void 0:d.value.length)>15?"...":""):"Not Available"})}},{Header:"Mobile Number",accessor:"mobilenumber",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Email",accessor:"email",Cell:e=>{var n,l,s,d;return a("span",{className:"lowercase",children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((d=e==null?void 0:e.cell)==null?void 0:d.value.length)>15?"...":""):"Not Available"})}},{Header:"No. of Adults",accessor:"noadults",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"No. of Children",accessor:"nochildern",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"0"})}},{Header:"No. Of Occupants",accessor:"totaloccupants",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Confirmation Code",accessor:"confirmationcode",Cell:e=>{var n,l,s,d;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=(l=e==null?void 0:e.cell)==null?void 0:l.value)==null?void 0:s.slice(0,15))+(((d=e==null?void 0:e.cell)==null?void 0:d.value.length)>15?"...":""):"Not Available"})}},{Header:"Booking Date",accessor:"reservation_date",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?new Date((l=e==null?void 0:e.cell)==null?void 0:l.value).toDateString():"Not Available"})}},{Header:"Booking Agent",accessor:"bookingagent",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Mode of Payment",accessor:"modepayment",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"Check in Date",accessor:"checkindate",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?new Date((l=e==null?void 0:e.cell)==null?void 0:l.value).toDateString():"Not Available"})}},{Header:"Check out Date",accessor:"checkoutdate",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?new Date((l=e==null?void 0:e.cell)==null?void 0:l.value).toDateString():"Not Available"})}},{Header:"No. of Nights",accessor:"nonight",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"0.00"})}},{Header:"Tourism Fee /Unit",accessor:"tourismfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value)+" AED":"0.00"})}},{Header:"Security Deposit Amount",accessor:"securitydeposit",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"TOTAL PAYOUT",accessor:"totalpayout",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Host Service Fee (portal)",accessor:"hostservicefee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Collection All incl",accessor:"totalcollectall",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Cleaning Fee",accessor:"cleaningfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"TOTAL ADDITIONAL FEE",accessor:"totaladditionalfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Room Rent Amount: ( Incl. portal fee)",accessor:"roomrentamount",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"Room Rent Amount: (host Payable)",accessor:"roomrenthostpayable",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"Guest Service Fee",accessor:"guestservicefee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Guest Management Fee",accessor:"guestmanagementfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Host Management Fee",accessor:"hostmanagementfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Room Rent Amount (incl. GM FEE)",accessor:"propertyid",Cell:e=>{var l,s,d,c,T,I,_,R,q,J,de,ge,pe,be,fe,ve,he,ye,Hn,Xn,Dn,Jn,Qn,Zn,Vn,Fn,wn,et,nt,tt,lt,it,at,ct,ot,st;let n;return((d=(s=(l=e==null?void 0:e.cell)==null?void 0:l.row)==null?void 0:s.original)==null?void 0:d.guestservicefee)&&((I=(T=(c=e==null?void 0:e.cell)==null?void 0:c.row)==null?void 0:T.original)==null?void 0:I.guestservicefee)>0?n=(parseFloat((q=(R=(_=e==null?void 0:e.cell)==null?void 0:_.row)==null?void 0:R.original)!=null&&q.roomrentamount?(ge=(de=(J=e==null?void 0:e.cell)==null?void 0:J.row)==null?void 0:de.original)==null?void 0:ge.roomrentamount:0)+parseFloat((fe=(be=(pe=e==null?void 0:e.cell)==null?void 0:pe.row)==null?void 0:be.original)!=null&&fe.guestmanagementfee?(ye=(he=(ve=e==null?void 0:e.cell)==null?void 0:ve.row)==null?void 0:he.original)==null?void 0:ye.guestmanagementfee:0)+parseFloat((Dn=(Xn=(Hn=e==null?void 0:e.cell)==null?void 0:Hn.row)==null?void 0:Xn.original)!=null&&Dn.guestservicefee?(Zn=(Qn=(Jn=e==null?void 0:e.cell)==null?void 0:Jn.row)==null?void 0:Qn.original)==null?void 0:Zn.guestservicefee:0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):n=(parseFloat((wn=(Fn=(Vn=e==null?void 0:e.cell)==null?void 0:Vn.row)==null?void 0:Fn.original)!=null&&wn.roomrentamount?(tt=(nt=(et=e==null?void 0:e.cell)==null?void 0:et.row)==null?void 0:nt.original)==null?void 0:tt.roomrentamount:0)+parseFloat((at=(it=(lt=e==null?void 0:e.cell)==null?void 0:lt.row)==null?void 0:it.original)!=null&&at.guestmanagementfee?(st=(ot=(ct=e==null?void 0:e.cell)==null?void 0:ct.row)==null?void 0:ot.original)==null?void 0:st.guestmanagementfee:0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),a("span",{children:n?n+" AED":"0.00"})}},{Header:"VAT 5% on Booking Room Rent",accessor:"vatperbookingrent",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Service fee",accessor:"vatperservicefee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Cleaning fee",accessor:"vatpercleaningfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% on Guest Management",accessor:"vatperguestmanagementfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"VAT 5% On Host Management Fee",accessor:"vatperhostmanagementfee",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Payout Vat",accessor:"totalvatper",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((l=e==null?void 0:e.cell)==null?void 0:l.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Total Room rent + GM+VAT",accessor:e=>`${e.totalroomrent}`,Cell:e=>{var n,l,s;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?((s=parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value))==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+" AED":"0.00"})}},{Header:"Audit Difference",accessor:e=>`${e.auditdiff}`,Cell:e=>a("span",{children:"0"})},{Header:"Total Collection All incl",accessor:e=>`${e.totalcollectall}`,Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?parseFloat((l=e==null?void 0:e.cell)==null?void 0:l.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":"0.00"})}},{Header:"DTCM uploaded",accessor:"dtcm_uploaded",Cell:e=>{var n,l,s,d;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)===!0?"Yes":"No"})})})}},{Header:"passort id collected",accessor:"passortid_collected",Cell:e=>{var n,l,s,d;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)===!0?"Yes":"No"})})})}},{Header:"Signature verified as per Passport",accessor:"sign_verified",Cell:e=>{var n,l,s,d;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)===!0?"Yes":"No"})})})}},{Header:"smart code provided",accessor:"smartcode_provided",Cell:e=>{var n,l,s,d;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)===!0?"Yes":"No"})})})}},{Header:"Payment collected",accessor:"payment_collected",Cell:e=>{var n,l,s,d;return a(B,{children:a("span",{className:"block w-full ",children:a("span",{className:` inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25 ${((n=e==null?void 0:e.cell)==null?void 0:n.value)&&((l=e==null?void 0:e.cell)==null?void 0:l.value)===!0?"text-success-500 bg-success-500":"text-danger-500 bg-danger-500"} `,children:((s=e==null?void 0:e.cell)==null?void 0:s.value)&&((d=e==null?void 0:e.cell)==null?void 0:d.value)===!0?"Yes":"No"})})})}},{Header:"created-by",accessor:"employee_email_createdBy",Cell:e=>{var n,l;return a("span",{className:"normal-case",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"created-on",accessor:"Created_At",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"updated-by",accessor:"employee_email_updatedBy",Cell:e=>{var n,l;return a("span",{className:"normal-case",children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"updated-on",accessor:"updated_At",Cell:e=>{var n,l;return a("span",{children:(n=e==null?void 0:e.cell)!=null&&n.value?(l=e==null?void 0:e.cell)==null?void 0:l.value:"Not Available"})}},{Header:"action",accessor:e=>`${e._id}`,Cell:e=>{var R,q,J,de,ge,pe,be,fe,ve,he,ye;const n=localStorage.getItem("isAuth"),l=JSON.parse(n),{data:s}=dt(l==null?void 0:l.roleid);if(!s)return null;const d=(s==null?void 0:s.readbooking)===!0,c=(s==null?void 0:s.updatebooking)===!0,T=(s==null?void 0:s.deletebooking)===!0,I=(s==null?void 0:s.updatecustomer)===!0,_=(q=(R=e==null?void 0:e.cell)==null?void 0:R.row)==null?void 0:q.original;return y("div",{className:"flex space-x-3 rtl:space-x-reverse",children:[a(Ne,{content:"Download PDF Under Maintenance",placement:"top",arrow:!0,animation:"shift-away",children:a("button",{className:"action-btn",onClick:Hn=>vt(_),type:"button",children:a(K,{icon:"heroicons:arrow-down"})})}),I&&a(Ne,{content:"Edit Customer",placement:"top",arrow:!0,animation:"shift-away",children:((ge=(de=(J=e==null?void 0:e.cell)==null?void 0:J.row)==null?void 0:de.original)==null?void 0:ge.customertype)==="New Customer"?a(F,{className:"action-btn",to:`/update-customer/${(fe=(be=(pe=e==null?void 0:e.cell)==null?void 0:pe.row)==null?void 0:be.original)==null?void 0:fe.guest_id}`,type:"button",children:a(K,{icon:"heroicons:user"})}):a(F,{className:"action-btn",to:`/update-customer/${(ye=(he=(ve=e==null?void 0:e.cell)==null?void 0:ve.row)==null?void 0:he.original)==null?void 0:ye.customerid}`,type:"button",children:a(K,{icon:"heroicons:user"})})}),d&&a(Ne,{content:"View",placement:"top",arrow:!0,animation:"shift-away",children:a(F,{className:"action-btn",to:`/view-booking/${e==null?void 0:e.cell.value}`,type:"button",children:a(K,{icon:"heroicons:eye"})})}),c&&a(Ne,{content:"Edit",placement:"top",arrow:!0,animation:"shift-away",children:a(F,{to:`/update-booking/${e==null?void 0:e.cell.value}`,className:"action-btn",type:"button",children:a(K,{icon:"heroicons:pencil-square"})})}),T&&a(Ne,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:a("button",{className:"action-btn",type:"button",onClick:()=>gt(e==null?void 0:e.cell.value),children:a(K,{icon:"heroicons:trash"})})})]})}}];function yt(e){const n=[["BOOKING NUMBER","BOOKING STATUS","UNIT NO","BUILDING NAME","FLOOR LEVEL","COMMUNITY NAME","PROJECT NAME","OWNER NAME","GUEST NAME","CHECK IN TYPE","NATIONALITY","PASSPORT NO","MOBILE NUMBER","EMAIL","NO. OF ADULTS","NO. OF CHILDREN","NO. OF OCCUPANTS","CONFIRMATION CODE","BOOKING DATE","BOOKING DATE","MODE OF PAYMENT","CHECK IN DATE","CHECK OUT DATE","NO. OF NIGHTS","NO. OF NIGHTS","SECURITY DEPOSIT AMOUNT","TOTAL PAYOUT","HOST SERVICE FEE (PORTAL)","TOTAL COLLECTION ALL INCL","CLEANING FEE","TOTAL ADDITIONAL FEE","ROOM RENT AMOUNT: ( INCL. PORTAL FEE)","Room Rent Amount: (host Payable)","GUEST SERVICE FEE","GUEST MANAGEMENT FEE","HOST MANAGEMENT FEE","VAT 5% ON BOOKING ROOM RENT","VAT 5% ON BOOKING ROOM RENT","VAT 5% ON CLEANING FEE","VAT 5% ON GUEST MANAGEMENT","VAT 5% ON HOST MANAGEMENT FEE","TOTAL PAYOUT VAT","TOTAL ROOM RENT + GM+VAT","AUDIT DIFFERENCE","TOTAL COLLECTION ALL INCL","CREATED-BY","CREATED-ON"],...e.map(c=>[c.bookingnumber,c.cancelled===!1?"Approved":"Cancelled",c.unitnumber,c==null?void 0:c.building_name,c==null?void 0:c.floor,c==null?void 0:c.community_name,c==null?void 0:c.project_name,c==null?void 0:c.owner_name,c.guestname,c.checkintype,c.nationality,c.passportnumber,c.mobilenumber,c.email,c.noadults,c.nochildern,c.totaloccupants,c.confirmationcode,new Date(c.reservationdate).toDateString(),c.bookingagent,c.modepayment,new Date(c.checkindate).toDateString(),new Date(c.checkoutdate).toDateString(),c.nonight,c.tourismfee,c.securitydeposit?c.securitydeposit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalpayout?c.totalpayout.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.hostservicefee?c.hostservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalcollectall?c.totalcollectall.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.cleaningfee?c.cleaningfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totaladditionalfee?c.totaladditionalfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.roomrentamount?c.roomrentamount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.roomrenthostpayable?c.roomrenthostpayable.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.guestservicefee?c.guestservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.guestmanagementfee?c.guestmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.hostmanagementfee?c.hostmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperbookingrent?c.vatperbookingrent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperservicefee?c.vatperservicefee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatpercleaningfee?c.vatpercleaningfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperguestmanagementfee?c.vatperguestmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.vatperhostmanagementfee?c.vatperhostmanagementfee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalvatper?c.totalvatper.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c.totalroomrent?c.totalroomrent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,0,c.totalcollectall?c.totalcollectall.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0,c==null?void 0:c.employee_email_createdBy,new Date(c.createdAt).toDateString()])],l=Bn.aoa_to_sheet(n),s=Bn.book_new();Bn.book_append_sheet(s,l,"Sheet1");const d=ql(s,{bookType:"xlsx",type:"array"});Wl.exports.saveAs(new Blob([d],{type:"application/octet-stream"}),"bookings.xlsx")}const xt=u.exports.useMemo(()=>ht,[]),Nt=u.exports.useMemo(()=>j),[f,Gn]=u.exports.useState(""),[Fl,$n]=u.exports.useState(!1),[Kn,Yn]=u.exports.useState(!1);u.exports.useState(!1),u.exports.useState(""),u.exports.useState(!1),u.exports.useEffect(()=>{Gn(""),Yn(!1)},[j]);const Ct=xe.exports.useTable({columns:xt,data:Nt,initialState:{pageIndex:0,pageSize:50}},xe.exports.useGlobalFilter,xe.exports.useSortBy,xe.exports.usePagination,xe.exports.useRowSelect,e=>{e.visibleColumns.push(n=>[{id:"selection",Header:({getToggleAllRowsSelectedProps:l})=>a("div",{children:a(Dl,{...l()})}),Cell:({row:l})=>{var I;const[s,d]=u.exports.useState(""),c=_=>{_!=null&&_._id?$n(!0):$n(!1),d(R=>R===_?"":_),Gn(R=>R===_?"":_)};let T;return u.exports.useEffect(()=>{var _;Yn(((_=l==null?void 0:l.original)==null?void 0:_._id)===(s==null?void 0:s._id)),Kn===!0?T=!0:Kn===!1&&(T=!1)},[(I=l==null?void 0:l.original)==null?void 0:I._id,s==null?void 0:s._id]),a("div",{children:a("input",{type:"checkbox",...l.getToggleRowSelectedProps(),checked:T,onChange:()=>c(l.original),className:"table-checkbox"})})}},...n])}),{getTableProps:kt,getTableBodyProps:At,headerGroups:Et,footerGroups:wl,page:St,nextPage:_t,previousPage:Tt,canNextPage:Se,canPreviousPage:_e,pageOptions:qn,state:Ot,gotoPage:Pe,pageCount:jt,setPageSize:Lt,setGlobalFilter:Ht,prepareRow:It}=Ct,{globalFilter:Rt,pageIndex:zn,pageSize:Bt}=Ot,Pt=m.filter(e=>e.unitnumber!==void 0),Te=[...new Set(Pt.map(e=>e.unitnumber))].sort((e,n)=>e.localeCompare(n,void 0,{sensitivity:"base"})).map(e=>({label:e,value:e})),Ut=m.filter(e=>e.community_name!==void 0),Ue=[...[...new Set(Ut.map(e=>e.communityid))].map(e=>{const n=m.find(l=>l.communityid===e);return n?{label:n.community_name,value:n.communityid}:null}).filter(Boolean)].sort((e,n)=>e.label.localeCompare(n.label)),Mt=m.filter(e=>e.project_name!==void 0),Me=[...[...new Set(Mt.map(e=>e.projectnameid))].map(e=>{const n=m.find(l=>l.projectnameid===e);return n?{label:n.project_name,value:n.projectnameid}:null}).filter(Boolean)].sort((e,n)=>e.label.localeCompare(n.label)),Wt=m.filter(e=>e.building_name!==void 0),We=[...[...new Set(Wt.map(e=>e.buildingid))].map(e=>{const n=m.find(l=>l.buildingid===e);return n?{label:n.building_name,value:n.buildingid}:null}).filter(Boolean)].sort((e,n)=>e.label.localeCompare(n.label)),Gt=m.filter(e=>e.owner_email!==void 0),Ge=[...[...new Set(Gt.map(e=>e.owner_email))].map(e=>{const n=m.find(l=>l.owner_email===e);return n?{label:n.owner_name+" | "+n.owner_email,value:n.owner_email}:null}).filter(Boolean)].sort((e,n)=>{var l;return(l=e.label)==null?void 0:l.localeCompare(n.label)}),$t=m.filter(e=>e.email!==void 0),$e=[...[...new Set($t.map(e=>e.email))].map(e=>{const n=m.find(l=>l.email===e);return n?{label:n.guestname+" | "+n.email,value:n.email}:null}).filter(Boolean)].sort((e,n)=>e.label.localeCompare(n.label)),Ke=[...[{value:"Airbnb",label:"Airbnb"},{value:"Booking.com",label:"Booking.com"},{value:"vrbo",label:"vrbo"},{value:"Direct Booking",label:"Direct Booking"},{value:"Not in the List",label:"Not in the List"}]].sort((e,n)=>e.label.localeCompare(n.label)),Kt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),Yt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),qt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),zt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),Xt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),Dt=m.filter(e=>e.unitnumber===i.unitnumber).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),Jt=p(Kt),Qt=p(Yt),Zt=p(qt),Vt=p(zt),Ft=p(Xt),wt=p(Dt),Ye=Jt.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),qe=Qt.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),ze=Zt.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Xe=Vt.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),De=Ft.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Je=wt.filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),el=m.filter(e=>e.communityid===i.communityid).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),nl=m.filter(e=>e.communityid===i.communityid).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),tl=m.filter(e=>e.communityid===i.communityid).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),ll=m.filter(e=>e.communityid===i.communityid).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),il=m.filter(e=>e.communityid===i.communityid).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),al=m.filter(e=>e.communityid===i.communityid).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),Qe=p(el).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ze=p(nl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ve=p(tl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Fe=p(ll).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),we=p(il).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),en=p(al).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),cl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),nn=p(cl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),ol=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),tn=p(ol).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),sl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),ln=p(sl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),ml=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),an=p(ml).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),ul=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),cn=p(ul).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),rl=m.filter(e=>e.projectnameid===i.projectnameid).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),on=p(rl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),dl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),sn=p(dl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),gl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),mn=p(gl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),pl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),un=p(pl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),bl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),rn=p(bl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),fl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),dn=p(fl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),vl=m.filter(e=>e.buildingid===i.buildingid).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),gn=p(vl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),hl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),yl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),xl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),Nl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),Cl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),kl=m.filter(e=>e.owner_email===i.owner_email).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),Oe=p(hl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),pn=p(yl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),bn=p(xl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),fn=p(Nl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),vn=p(Cl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),hn=p(kl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Al=m.filter(e=>e.email===i.email).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),yn=p(Al).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),El=m.filter(e=>e.email===i.email).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),xn=p(El).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Sl=m.filter(e=>e.email===i.email).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),Nn=p(Sl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),_l=m.filter(e=>e.email===i.email).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),Cn=p(_l).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Tl=m.filter(e=>e.email===i.email).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),kn=p(Tl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ol=m.filter(e=>e.email===i.email).map(e=>{const{bookingagent:n}=e;if(n!="")return{label:n,value:n}}),An=p(Ol).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),jl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{unitnumber:n}=e;if(n!="")return{label:n,value:n}}),En=p(jl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Ll=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{community_name:n,communityid:l}=e;if(n!=""&&l!="")return{label:n,value:l}}),Sn=p(Ll).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Hl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{projectnameid:n,project_name:l}=e;if(n!=""&&l!="")return{label:l,value:n}}),_n=p(Hl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Il=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{building_name:n,buildingid:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),Tn=p(Il).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Rl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{owner_name:n,owner_email:l}=e;if(l!=""&&n!="")return{label:n,value:l}}),On=p(Rl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Bl=m.filter(e=>e.bookingagent===i.bookingagent).map(e=>{const{email:n,guestname:l}=e;if(n!=""&&l!="")return{label:l+"|"+n,value:n}}),jn=p(Bl).filter(e=>e.label!==void 0&&typeof e.label=="string").sort((e,n)=>e.label.localeCompare(n.label)),Pl=()=>{Z(),N(""),Ae(""),ue(""),M(""),Re(""),r(""),x(""),Be(""),h(""),A("")},[Ln,re]=u.exports.useState(!1);return u.exports.useEffect(()=>{const e=n=>{const{_id:l,propertyid:s,checkindate:d,checkoutdate:c,cancelled:T}=n,{checkindate:I,checkoutdate:_,propertyid:R}=f;return l!==(f==null?void 0:f._id)&&T===!1?new Date(d).toISOString()<new Date(_).toISOString()&&new Date(c).toISOString()>new Date(I).toISOString()&&s===R?(re(!0),!0):(re(!1),!1):(console.log("first else"),re(!1),!1)};if((f==null?void 0:f.checkindate)&&(f==null?void 0:f.checkoutdate)&&(f==null?void 0:f.propertyid)){let n=!1;for(let l=0;l<m.length;l++){const s=m[l];if(e(s)){n=!0;break}}re(n)}else re(!1)},[f==null?void 0:f.checkindate,f==null?void 0:f.checkoutdate,f==null?void 0:f.propertyid]),y(B,{children:[y("div",{className:"md:flex justify-end items-center mb-6 gap-x-[25px]",children:[y(F,{to:"/calendar-2-0",className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer",children:[a("img",{src:zl,alt:"Calendar icon",className:"w-[20px] h-[20px] noselect"}),a("p",{className:"text-[14px] leading regular color-black",children:"Calendar View"})]}),y("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer",onClick:()=>yt(j),children:[a("img",{src:Yl,alt:"Excel icon",className:"w-[20px] h-[20px] noselect"}),a("p",{className:"text-[14px] leading regular color-black",children:"Export in Excel"})]}),f&&(f==null?void 0:f.cancelled)===!1?a(B,{children:a(rt,{title:"Do you want to Cancel this booking?",label:"Cancel booking",labelClass:"btn btn inline-flex justify-center btn-danger py-[8px] px-[24px] rounded-[5px]",uncontrol:!0,alldata:f,onDataUpdate:P,bookingtable:!0,cancelkrnihai:!0,bookingUpdate:!0,children:a("h4",{className:"font-medium text-lg mb-3 text-slate-900 text-center",children:"Are you sure?"})})}):null,Ln===!1&&f&&(f==null?void 0:f.cancelled)===!0?a(B,{children:a(rt,{title:"Do you want to Approve this booking?",label:"Approve booking",labelClass:"btn btn inline-flex justify-center btn-dark py-[8px] px-[24px] rounded-[5px]",uncontrol:!0,alldata:f,onDataUpdate:P,bookingtable:!0,cancelkrnihai:!1,alreadyBooking:Ln,bookingUpdate:!0,children:a("h4",{className:"font-medium text-lg mb-3 text-slate-900 text-center",children:"Are you sure?"})})}):null,Ln===!0&&f&&(f==null?void 0:f.cancelled)===!0?a(B,{children:a("button",{type:"button",class:"btn btn btn inline-flex justify-center btn-danger py-[8px] px-[24px] rounded-[5px]",children:"This property cannot be approved as it is already booked"})}):null,a(B,{}),y("button",{className:"h-[34px] rounded-[10px] relative bg-white border1px flex items-center gap-x-[10px] justify-around px-[10px] py-[5px] cursor-pointer md:mb-0 mb-4",onClick:()=>ft(!Ee),children:[Ee===!0?a(K,{icon:"heroicons:minus-small",className:"w-[20px] h-[20px]"}):a(K,{icon:"heroicons:plus-small",className:"w-[20px] h-[20px]"}),a("p",{className:"text-[16px] leading regular color-black",children:"Advance filter"})]}),v===!0?a("button",{className:"btn-dark py-[8px] px-[24px] rounded-[5px]",type:"button",onClick:U,children:"Remove Date Filter"}):null,a("div",{className:"w-[180px]",children:a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:w,value:w==null?void 0:w.filter(function(e){return e.value===$}),onChange:e=>{je(e==null?void 0:e.value)},styles:Q,id:"hh",placeholder:"Select Date filter option..."})}),a(Kl,{filter:Rt,setFilter:Ht})]}),console.log("unitNumberOptions",Te,"first",Oe),y("div",{className:`xl:grid-cols-3 grid gap-5 grid-cols-1 ${Ee===!0?"filter-show mt-6 pointer-events-auto":"filter-remove -mt-4 pointer-events-none"}`,children:[y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Unit No."}),a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:E?i.communityid&&E?Qe:i.projectnameid&&E?nn:i.buildingid&&E?sn:i.email&&E?yn:i.bookingagent&&E?En:Oe:Te,value:E?i.communityid&&E?Qe&&Qe.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):i.projectnameid&&E?nn&&nn.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):i.buildingid&&E?sn&&sn.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):i.email&&E?yn&&yn.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):i.bookingagent&&E?En&&En.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):Oe&&Oe.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}):Te&&Te.filter(function(e){if((t==null?void 0:t.unitnumber)!=="")return e.value===(t==null?void 0:t.unitnumber)}),onChange:e=>{E?i.communityid&&E?W({target:{name:"unitnumber",value:e.value}}):i.projectnameid&&E?W({target:{name:"unitnumber",value:e.value}}):i.buildingid&&E?W({target:{name:"unitnumber",value:e.value}}):i.email&&E?W({target:{name:"unitnumber",value:e.value}}):i.bookingagent&&E?W({target:{name:"unitnumber",value:e.value}}):W({target:{name:"unitnumber",value:e.value}}):L({target:{name:"unitnumber",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.unitnumber?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>r({...t,unitnumber:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Community Name"}),a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:S?i.owner_email&&S?pn:i.projectnameid&&S?tn:i.buildingid&&S?mn:i.email&&S?xn:i.bookingagent&&S?Sn:Ye:Ue,value:S?i.owner_email&&S?pn&&pn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):i.projectnameid&&S?tn&&tn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):i.buildingid&&S?mn&&mn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):i.email&&S?xn&&xn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):i.bookingagent&&S?Sn&&Sn.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):Ye&&Ye.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}):Ue&&Ue.filter(function(e){if((t==null?void 0:t.communityid)!=="")return e.value===(t==null?void 0:t.communityid)}),onChange:e=>{S?i.owner_email&&S?W({target:{name:"communityid",value:e.value}}):i.projectnameid&&S?W({target:{name:"communityid",value:e.value}}):i.buildingid&&S?W({target:{name:"communityid",value:e.value}}):i.email&&S?W({target:{name:"communityid",value:e.value}}):i.bookingagent&&S?W({target:{name:"communityid",value:e.value}}):W({target:{name:"communityid",value:e.value}}):L({target:{name:"communityid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.communityid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>r({...t,communityid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Project Name"}),a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:C?i.owner_email&&C?bn:i.communityid&&C?Ze:i.buildingid&&C?un:i.email&&C?Nn:i.bookingagent&&C?_n:qe:Me,value:C?i.owner_email&&C?bn&&bn.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):i.communityid&&C?Ze&&Ze.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):i.buildingid&&C?un&&un.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):i.email&&C?Nn&&Nn.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):i.bookingagent&&C?_n&&_n.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):qe&&qe.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}):Me&&Me.filter(function(e){if((t==null?void 0:t.projectnameid)!=="")return e.value===(t==null?void 0:t.projectnameid)}),onChange:e=>{C?i.owner_email&&C?te({target:{name:"projectnameid",value:e.value}}):i.communityid&&C?te({target:{name:"projectnameid",value:e.value}}):i.buildingid&&C?te({target:{name:"projectnameid",value:e.value}}):i.email&&C?te({target:{name:"projectnameid",value:e.value}}):i.bookingagent&&C?te({target:{name:"projectnameid",value:e.value}}):te({target:{name:"projectnameid",value:e.value}}):L({target:{name:"projectnameid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.projectnameid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>r({...t,projectnameid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Building Name"}),a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:k?i.owner_email&&k?fn:i.communityid&&k?Ve:i.projectnameid&&k?ln:i.email&&k?Cn:i.bookingagent&&k?Tn:ze:We,value:k?i.owner_email&&k?fn&&fn.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):i.communityid&&k?Ve&&Ve.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):i.projectnameid&&k?ln&&ln.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):i.email&&k?Cn&&Cn.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):i.bookingagent&&k?Tn&&Tn.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):ze&&ze.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}):We&&We.filter(function(e){if((t==null?void 0:t.buildingid)!=="")return e.value===(t==null?void 0:t.buildingid)}),onChange:e=>{k?i.owner_email&&k?le({target:{name:"buildingid",value:e.value}}):i.communityid&&k?le({target:{name:"buildingid",value:e.value}}):i.projectnameid&&k?le({target:{name:"buildingid",value:e.value}}):i.email&&k?le({target:{name:"buildingid",value:e.value}}):i.bookingagent&&k?le({target:{name:"buildingid",value:e.value}}):le({target:{name:"buildingid",value:e.value}}):L({target:{name:"buildingid",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.buildingid?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>r({...t,buildingid:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Owner Name"}),a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:o?i.communityid&&o?Fe:i.projectnameid&&o?an:i.buildingid&&o?rn:i.email&&o?kn:i.bookingagent&&o?On:Xe:Ge,value:o?i.communityid&&o?Fe&&Fe.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):i.projectnameid&&o?an&&an.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):i.buildingid&&o?rn&&rn.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):i.email&&o?kn&&kn.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):i.bookingagent&&o?On&&On.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):Xe&&Xe.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}):Ge&&Ge.filter(function(e){if((t==null?void 0:t.owner_email)!=="")return e.value===(t==null?void 0:t.owner_email)}),onChange:e=>{o?i.communityid&&o?ie({target:{name:"owner_email",value:e.value}}):i.projectnameid&&o?ie({target:{name:"owner_email",value:e.value}}):i.buildingid&&o?ie({target:{name:"owner_email",value:e.value}}):i.email&&o?ie({target:{name:"owner_email",value:e.value}}):i.bookingagent&&o?ie({target:{name:"owner_email",value:e.value}}):ie({target:{name:"owner_email",value:e.value}}):L({target:{name:"owner_email",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.owner_email?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>r({...t,owner_email:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Guest Name / Email"}),a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:b?i.communityid&&b?we:i.buildingid&&b?dn:i.projectnameid&&b?cn:i.owner_email&&b?vn:i.bookingagent&&b?An:De:$e,value:b?i.communityid&&b?we&&we.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):i.buildingid&&b?dn&&dn.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):i.projectnameid&&b?cn&&cn.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):i.owner_email&&b?vn&&vn.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):i.bookingagent&&b?An&&An.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):De&&De.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}):$e&&$e.filter(function(e){if((t==null?void 0:t.email)!=="")return e.value===(t==null?void 0:t.email)}),onChange:e=>{b?i.communityid&&b?ae({target:{name:"email",value:e.value}}):i.buildingid&&b?ae({target:{name:"email",value:e.value}}):i.projectnameid&&b?ae({target:{name:"email",value:e.value}}):i.owner_email&&b?ae({target:{name:"email",value:e.value}}):i.bookingagent&&b?ae({target:{name:"email",value:e.value}}):ae({target:{name:"email",value:e.value}}):L({target:{name:"email",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.email?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>r({...t,email:""}),children:"Clear filter"}):null]}),y("div",{children:[a("label",{htmlFor:" hh",className:"form-label ",children:"Booking Agent"}),a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:g?i.communityid&&g?en:i.projectnameid&&g?on:i.buildingid&&g?gn:i.owner_email&&g?hn:i.email&&g?jn:Je:Ke,value:g?i.communityid&&g?en&&en.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):i.projectnameid&&g?on&&on.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):i.buildingid&&g?gn&&gn.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):i.owner_email&&g?hn&&hn.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):i.email&&g?jn&&jn.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):Je&&Je.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}):Ke&&Ke.filter(function(e){if((t==null?void 0:t.bookingagent)!=="")return e.value===(t==null?void 0:t.bookingagent)}),onChange:e=>{g?i.communityid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.projectnameid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.buildingid&&g?ce({target:{name:"bookingagent",value:e.value}}):i.owner_email&&g?ce({target:{name:"bookingagent",value:e.value}}):i.email&&g?ce({target:{name:"bookingagent",value:e.value}}):ce({target:{name:"bookingagent",value:e.value}}):L({target:{name:"bookingagent",value:e.value}})},styles:Q,id:"hh",placeholder:"Select..."}),t!=null&&t.bookingagent?a("div",{className:" mt-2 block text-sm cursor-pointer",onClick:()=>r({...t,bookingagent:""}),children:"Clear filter"}):null]})]}),y("div",{className:`flex ${Ee===!0?"filter-show mt-6 pointer-events-auto":"filter-remove mt-0 pointer-events-none"} justify-end gap-x-[10px]`,children:[a("button",{className:"btn btn-secondary  text-center",type:"button",onClick:()=>Pl(),children:"Clear filter"}),a("button",{className:"btn btn-dark  text-center",type:"button",onClick:()=>X(t),children:"Search"})]}),a(Xl,{showModal:ee,handleClose:pt,loaderModal:ne,linkedData:se,handleDeleteData:bt,dataId:He,moduleName:"Booking"}),a(Jl,{showModal:Ie}),a("div",{className:"overflow-x-auto -mx-6 mt-6",children:a("div",{className:"inline-block min-w-full align-middle",children:a("div",{className:"",children:y("table",{className:"min-w-[206%] overflow-x-scroll divide-y divide-slate-100 table-fixed dark:divide-slate-700",...kt,children:[a("thead",{className:"bg-slate-200 dark:bg-slate-700",children:Et.map(e=>a("tr",{...e.getHeaderGroupProps(),children:e.headers.map(n=>n.Header==="action"&&!((H==null?void 0:H.readbooking)===!0||(H==null?void 0:H.updatebooking)===!0||(H==null?void 0:H.deletebooking)===!0)?a("th",{}):y("th",{...n.getHeaderProps(n.getSortByToggleProps()),scope:"col",className:"table-th",children:[n.render("Header"),a("span",{children:n.isSorted?n.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),D===!0?a("div",{className:"pl-[10px]",children:a(Pn,{})}):a("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...At,children:St.map(e=>(It(e),a("tr",{...e.getRowProps(),children:e.cells.map(n=>a("td",{...n.getCellProps(),className:"table-td",children:n.render("Cell")}))})))})]})})})}),y("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[y("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[a("select",{className:"form-control py-2 w-max",value:Bt,onChange:e=>Lt(Number(e.target.value)),children:[50,100,200].map(e=>y("option",{value:e,children:["Show ",e]},e))}),y("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",y("span",{children:[zn+1," of ",qn.length]})]})]}),y("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[a("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${_e?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Pe(0),disabled:!_e,children:a(K,{icon:"heroicons:chevron-double-left-solid"})})}),a("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${_e?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>Tt(),disabled:!_e,children:"Prev"})}),qn.map((e,n)=>a("li",{children:a("button",{href:"#","aria-current":"page",className:` ${n===zn?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>Pe(n),children:e+1})},n)),a("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{className:` ${Se?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>_t(),disabled:!Se,children:"Next"})}),a("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:a("button",{onClick:()=>Pe(jt-1),disabled:!Se,className:` ${Se?"":"opacity-50 cursor-not-allowed"}`,children:a(K,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})},Zl={option:(j,P)=>({...j,fontSize:"14px"})},Vl=({title:j,linktitle:P,pagelink:H,handleDataUpdate:m})=>{const X=localStorage.getItem("isAuth"),Z=JSON.parse(X),{data:D}=dt(Z==null?void 0:Z.roleid),[v,U]=u.exports.useState([]),[w,$]=u.exports.useState(!1),[je,oe]=u.exports.useState(""),[V,ee]=u.exports.useState(""),[Ce,ne]=u.exports.useState(!1);u.exports.useState({startDate:"",endDate:""});const[G,se]=u.exports.useState(""),Le=[{value:"SELECT RESERVATION DATE",label:"SELECT RESERVATION DATE"},{value:"SELECT CHECK-IN DATE",label:"SELECT CHECK-IN DATE"},{value:"SELECT CHECK-OUT DATE",label:"SELECT CHECK-OUT DATE"}],[He,me]=u.exports.useState({startDate:"",endDate:""}),[Ie,ke]=u.exports.useState({startDate:"",endDate:""}),[E,O]=u.exports.useState({startDate:"",endDate:""}),[t,r]=u.exports.useState(!1),i=async o=>{if(G==="SELECT RESERVATION DATE"){me(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.reservationdate),A=new Date(o==null?void 0:o.startDate),L=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),L.setHours(0,0,0,0),(b<A||b>L)&&(h=!1)}return h});U(x),r(!0)}else if(G==="SELECT CHECK-IN DATE"){ke(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.checkindate),A=new Date(o==null?void 0:o.startDate),L=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),L.setHours(0,0,0,0),(b<A||b>L)&&(h=!1)}return h});U(x),r(!0)}else if(G==="SELECT CHECK-OUT DATE"){O(o);const x=v.filter(g=>{let h=!0;if((o==null?void 0:o.startDate)&&(o==null?void 0:o.endDate)){const b=new Date(g.checkoutdate),A=new Date(o==null?void 0:o.startDate),L=new Date(o==null?void 0:o.endDate);b.setHours(0,0,0,0),A.setHours(0,0,0,0),L.setHours(0,0,0,0),(b<A||b>L)&&(h=!1)}return h});U(x),r(!0)}},Ae=async()=>{$(!0);const x=await(await fetch("http://dev-rare.srp.ai/booking")).json();U(x),ee(x),me({startDate:"",endDate:""}),ke({startDate:"",endDate:""}),O({startDate:"",endDate:""}),se(""),$(!1),r(!1)},S=[{value:"All Booking",label:"All Booking"},{value:"Approved Booking",label:"Approved Booking"},{value:"Cancelled Booking",label:"Cancelled Booking"}],[N,Un]=u.exports.useState("All Booking");u.exports.useEffect(()=>{N==="All Booking"?(async()=>{$(!0);const g=await(await fetch("http://dev-rare.srp.ai/booking")).json();U(g),ee(g),oe(g),$(!1)})():N==="Approved Booking"?(async()=>{$(!0);const g=await(await fetch("http://dev-rare.srp.ai/booking/api/approvedbooking")).json();U(g),ee(g),$(!1)})():N==="Cancelled Booking"&&(async()=>{$(!0);const g=await(await fetch("http://dev-rare.srp.ai/booking/api/cancelledbooking?cancelled=true")).json();U(g),ee(g),$(!1)})()},[N]);const[ue,C]=u.exports.useState(0),M={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#00EBFF"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}},Mn={series:[{data:[800,600,1e3,800,600,1e3,800,900]}],options:{chart:{toolbar:{autoSelected:"pan",show:!1},offsetX:0,offsetY:0,zoom:{enabled:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},colors:["#FB8F65"],tooltip:{theme:"light"},grid:{show:!1,padding:{left:0,right:0}},yaxis:{show:!1},fill:{type:"solid",opacity:[.1]},legend:{show:!1},xaxis:{low:0,offsetX:0,offsetY:0,show:!1,labels:{low:0,offsetX:0,show:!1},axisBorder:{low:0,offsetX:0,show:!1}}}};u.exports.useEffect(()=>{var o,x,g;if(N==="All Booking"){let h=0;for(let b=0;b<(v==null?void 0:v.length);b++){let A=parseFloat((o=v[b])==null?void 0:o.roomrentamount);!isNaN(A)&&((x=v[b])==null?void 0:x.cancelled)===!1&&(h+=A)}C(h||0)}else{let h=0;for(let b=0;b<(v==null?void 0:v.length);b++){let A=parseFloat((g=v[b])==null?void 0:g.roomrentamount);isNaN(A)||(h+=A)}C(h||0)}},[v==null?void 0:v.length,N]);const[Re,k]=u.exports.useState(0);u.exports.useEffect(()=>{if(N==="All Booking"||N==="Approved Booking"){let o=v==null?void 0:v.filter(x=>x.cancelled===!1).length;k(o)}else{let o=v==null?void 0:v.length;k(o)}},[N,v]);const Y=[{name:M,title:"Total No of Check-In",count:Re,bg:"bg-[#E5F9FF] dark:bg-slate-900	"},{name:Mn,title:"Total Collection",count:ue?ue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" AED":0,bg:"bg-[#FFEDE5] dark:bg-slate-900	"}];function Wn(o){if(o){const x=v.filter(g=>{ne(!0);let h=!0;return o.buildingid&&g.buildingid!==o.buildingid&&(h=!1),o.communityid&&g.communityid!==o.communityid&&(h=!1),o.owner_email&&g.owner_email!==o.owner_email&&(h=!1),o.projectnameid&&g.projectnameid!==o.projectnameid&&(h=!1),o.unitnumber&&g.unitnumber!==o.unitnumber&&(h=!1),o.email&&g.email!==o.email&&(h=!1),o.bookingagent&&g.bookingagent!==o.bookingagent&&(h=!1),h});U(x),ne(!1)}else U(V)}const Be=async()=>{ne(!0),me({startDate:"",endDate:""}),ke({startDate:"",endDate:""}),O({startDate:"",endDate:""}),se(""),U(V),ne(!1),r(!1)};return a(B,{children:w===!0?a(Pn,{}):y(ut,{children:[y("div",{className:"flex justify-between items-center mb-6",children:[a("h4",{className:"card-title",children:j}),(D==null?void 0:D.createbooking)===!0&&a(F,{to:H,className:"btn-dark py-[8px] px-[24px] rounded-[5px]",children:P})]}),a("div",{className:"grid grid-cols-12 gap-5 mb-5",children:y("div",{className:"2xl:col-span-12 lg:col-span-12 col-span-12",children:[a(ut,{bodyClass:"p-4",children:a("div",{className:"grid md:grid-cols-2 col-span-1 gap-4",children:a(Gl,{statistics:Y})})}),a("div",{className:"flex justify-end items-center mb-[15px] mt-[25px]",children:a("div",{className:"flex justify-end items-center ",children:y("div",{className:"flex -gap-x-[5px] items-center",children:[a("div",{className:"w-[300px]",children:a(z,{label:"Basic Select",className:"react-select",classNamePrefix:"select",options:Le,value:Le.filter(function(o){return o.value===G}),onChange:o=>{se(o==null?void 0:o.value)},styles:Zl,id:"hh",placeholder:"Select Date filter option..."})}),G&&G==="SELECT RESERVATION DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(Rn,{value:He,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT RESERVATION DATE"})})}):null,G&&G==="SELECT CHECK-IN DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(Rn,{value:Ie,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT CHECK-IN DATE"})})}):null,G&&G==="SELECT CHECK-OUT DATE"?a("div",{className:"w-[150px]",children:a("div",{className:"date-range-custom relative",children:a(Rn,{value:E,inputClassName:"input-class",containerClassName:"container-class",onChange:i,placeholder:"SELECT CHECK-OUT DATE"})})}):null]})})})]})}),(V==null?void 0:V.length)&&(v==null?void 0:v.length)?a(Ql,{allBooking:v,handleDataUpdate:m,dataRole:D,forFilterData:je,handleClearFilter:Be,typeOfBooking:S,selectedtypeOfBooking:N,setSelectedtypeOfBooking:Un,filterLoader:Ce,handleFilterSearch:Wn,dataFilterActive:t,removeDateFilter:Ae}):a("div",{className:"flex justify-center items-center",children:a("img",{src:$l,alt:"NotFound",className:"h-[564px] object-contain"})})]})})},_i=()=>{const[j,P]=u.exports.useState([]),[H,m]=u.exports.useState(!1);return u.exports.useEffect(()=>{m(!0),(async()=>{const v=await(await fetch("http://dev-rare.srp.ai/booking")).json();P(v),m(!1)})()},[]),a(B,{children:H===!1?a("div",{className:" space-y-5",children:a(Vl,{pagelink:"/add-booking",linktitle:"Add new Booking",title:"All Booking",allData:j,handleDataUpdate:()=>{(async()=>{m(!0);const v=await(await fetch("http://dev-rare.srp.ai/booking")).json();P(v),m(!1)})()}})}):a(Pn,{})})};export{_i as default};
